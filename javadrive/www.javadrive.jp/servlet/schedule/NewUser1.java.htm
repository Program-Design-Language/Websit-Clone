import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class NewUser1 extends HttpServlet{

    public void doGet(HttpServletRequest req, HttpServletResponse res)
        throws IOException, ServletException{

        res.setContentType("text/html; charset=Shift_JIS");
        PrintWriter out = res.getWriter();

        /* [U[o */
        HttpSession session = req.getSession(false);
        String roll = (String)session.getAttribute("roll");
        if (roll == null || !roll.equals("1")){
            res.sendRedirect("/schedule/MonthView");
        }

        StringBuffer sb = new StringBuffer();

        sb.append("<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.0.1//EN\" \"http://www.w3.org/TR/html4/strict.dtd\">");

        sb.append("<html lang=\"ja\">");
        sb.append("<head>");
        sb.append("<meta http-equiv=\"Content-Type\" Content=\"text/html;charset=Shift_JIS\">");
        sb.append("<title>[U[</title>");
        sb.append("</head>");
        sb.append("<body>");

        sb.append("<h1>[U[</h1>");
        sb.append("<p>V[U[</p>");

        Object status = session.getAttribute("CreateUserCheck");

        if (status != null){
            String statusStr = (String)status;

            if (statusStr.equals("Fail")){
                sb.append("<p>[U[s</p>");
                sb.append("<p>x[U[pX[h</p>");
            }else if (statusStr.equals("Success")){
                sb.append("<p>[U[</p>");
                sb.append("<p>[U[pX[h</p>");
            }

            session.setAttribute("CreateUserCheck", null);
        }

        sb.append("<form method=\"POST\" action="https://www.javadrive.jp/"/schedule/CreateUserCheck/"" name=\"loginform\">");
        sb.append("<table>");
        sb.append("<tr>");
        sb.append("<td>[U[</td>");
        sb.append("<td><input type=\"text\" name=\"user\" size=\"32\"></td>");
        sb.append("</tr>");
        sb.append("<tr>");
        sb.append("<td>pX[h</td>");
        sb.append("<td><input type=\"password\" name=\"pass\" size=\"32\"></td>");
        sb.append("</tr>");
        sb.append("<tr>");
        sb.append("<td></td>");
        sb.append("<td>");
        sb.append("<select name=\"roll\">");
        sb.append("<option value=\"1\">");
        sb.append("<option value=\"0\" selected>");
        sb.append("</select>");
        sb.append("</td>");
        sb.append("</tr>");
        sb.append("<tr>");
        sb.append("<td><input type=\"submit\" value=\"create\"></td>");
        sb.append("<td><input type=\"reset\" value=\"reset\"></td>");
        sb.append("</tr>");
        sb.append("</table>");
        sb.append("</form>");

        sb.append("<p><a href="javascript:if(confirm('https://www.javadrive.jp/%22/schedule/MonthView/%22  \n\n该文件无法用 Teleport Ultra 下载, 因为 不可用, 或放弃了下载, 或项目即将停止。  \n\n你想在服务器上打开它?'))window.location='https://www.javadrive.jp/"/schedule/MonthView/"'" tppabs="https://www.javadrive.jp/"/schedule/MonthView/"">XPW[</a></p>");

        sb.append("</body>");
        sb.append("</html>");

        out.println(new String(sb));
    }
}
