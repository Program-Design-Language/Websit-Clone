<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>WwwLounge Ver2.16利用メモ - とほほのWWW入門</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<link rel="stylesheet" href="../style3.css" tppabs="http://www.tohoho-web.com/style3.css">
</head>
<body>
<h2>WwwLounge Ver2.17利用メモ</h2>

<h4>目次</h4>
<div class=i>
<ul>
<li><a href="#WhatIs">ラウンジ（WwwLounge）とは</a>
<li><a href="#Sample">動作イメージ</a>
<li><a href="#Download">ダウンロード</a>
<li><a href="#History">履歴</a>
<li><a href="#Install">設置方法</a>
<li><a href="#Manage">管理者機能</a>
<li><a href="#Trouble">動かない時は</a>
</ul>
</div>

<h4 id="WhatIs">ラウンジ（WwwLounge）とは</h4>
<div class=i>
<p>WwwLounge は、「掲示板」と同じようにメッセージを書き込むものですが、複数のトピック（スレッドと呼ばれることもあります）を生成することができます。「掲示板」とか「Q&amp;Aシステム」と呼ばれるものですが、当サイトではこれを「ラウンジ」と呼んでいます。</p>
<p>WwwLounge は、フリーソフトとして配布しています。私用・商用を問わず、使用・改造・流用・転載可能です。邪魔であれば、画面の Copyright 表記も削除していただいて構いません。雑誌の CD-ROM に収録される場合は、連絡を希望します。</p>
<p>ただし、jcode.pl は Utashiro氏が開発されたものを同梱させていただいていますので、jcode.pl の利用条件（改造が無ければ利用・再配布可能・・・）に従ってください。</p>
</div>

<h4 id="Sample">動作イメージ</h4>
<div class=i>
<p>動作イメージは「<a href="../cgi/wwwlng.cgi.htm" tppabs="http://www.tohoho-web.com/cgi/wwwlng.cgi">ラウンジ動作イメージ</a>」を参照してください。テスト用なので、適当に書きこんでください。</p>
</div>

<h4 id="Download">最新版ダウンロード</h4>
<div class=i>
<p>最新版ダウンロードは下記より行ってください。</p>
<ul>
<li><a href="../www.htm" tppabs="http://www.tohoho-web.com/www.htm">とほほのＷＷＷ入門</a> → 「とほほのCGIソフト集」
</ul>
</div>

<h4 id="History">履歴</h4>
<div class=i>
<ul>
<li>Ver2.17 未解決表示機能、自画面表示機能を追加。
<li>Ver2.16 セキュリティホール対応。
<li>Ver2.14/Ver2.15 ソートがうまくできない問題の対応。
<li>Ver2.12/Ver2.13 セキュリティホール対応。
<li>Ver2.11 メールアドレス不正時に空ファイルができる問題を修正。
<li>Ver2.10 Netscapeのサーバーに対応。
<li>Ver2.09 Perl4で動作しなかったのを修正。
<li>Ver2.08 メールアドレスの書式をチェックするように修正。
<li>Ver2.07 誤ってロックファイルを消してしまうことがあるバグを修正。
<li>Ver2.06 ロックファイルのパーミッションを0755に修正。
<li>Ver2.05 タイトルも検索対象になるよう修正。
<li>Ver2.04 全角の「＞」もコメントとみなすよう修正。
<li>Ver2.03 メッセージ末尾の改行を削除するよう修正。
<li>Ver2.02 utimeコマンドでパスワードをチェック。
<li>Ver2.01 空行が空行として表示されないバグを修正。
<li>Ver2.00 過去のフォルダへの追加発言など大幅改造。
</ul>
</div>

<h4 id="Install">設置方法</h4>
<div class=i>
<p>下記の手順に従って設置してください。</p>
<ol>
<li><p>CGIの設置経験の浅い方は、「<a href="../wwwcgi.htm" tppabs="http://www.tohoho-web.com/wwwcgi.htm">とほほのCGI入門</a>」などを参考に、簡単なCGIの設置を練習してみてください。</p>
<li><p>wwwlng.cgi をメモ帳などのテキストエディタで開き、1行目の perl のパス名を、サーバーやプロバイダに適したものに変更してください。</p>
<li><p>wwwlng.cgi中の「$g_return_url = "";」という行を、例えば「$g_return_url = "../index.html";」のように修正すれば、「戻る」ボタンが表示されるようになります。必要に応じて変更してください。</p>
<li><p>添付されているファイル（readme.htm）を除くをすべて、Webサーバーに転送してください。この時、少なくとも wwwlng.cgi、jcode.pl は、Webサーバーに適した改行コードになるようにしてください。Windows から FTP を用いて転送する場合は、テキストモードで転送すると大丈夫だと思います。（参考：「<a href="../wwwxx011.htm" tppabs="http://www.tohoho-web.com/wwwxx011.htm">改行コードについて</a>」）</p>
<p>転送後のファイルの構成は以下のようになります。</p>
<pre class=c>
<img src="../image/folder.png" tppabs="http://www.tohoho-web.com/image/folder.png" alt="フォルダ"> (設置フォルダ)
　<img src="../image/folder.png" tppabs="http://www.tohoho-web.com/image/folder.png" alt="フォルダ"> wwwlng
　<img src="../image/folder.png" tppabs="http://www.tohoho-web.com/image/folder.png" alt="フォルダ"> lock
　<img src="../image/file.png" tppabs="http://www.tohoho-web.com/image/file.png" alt="ファイル"> wwwlng.cgi
　<img src="../image/file.png" tppabs="http://www.tohoho-web.com/image/file.png" alt="ファイル"> wwwlng.htm
　<img src="../image/file.png" tppabs="http://www.tohoho-web.com/image/file.png" alt="ファイル"> jcode.pl
</pre>
<li><p>wwwlng.cgi のパーミッションを 755（rwxr-xr-x）、wwwlngフォルダ、lockフォルダのパーミッションを 777（rwxrwxrwx）に変更してください。（参考：「<a href="javascript:if(confirm('http://wakusei.cplaza.ne.jp/twn/wwwxx012.htm  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://wakusei.cplaza.ne.jp/twn/wwwxx012.htm'" tppabs="http://wakusei.cplaza.ne.jp/twn/wwwxx012.htm">パーミッションを変更するには</a>」）</p>
<li><p>ブラウザから http://サーバー名/フォルダ名/wwwlng.cgi というアドレスにアクセスすると、ラウンジの画面が表示されるはずです。</p>
</ol>
</div>

<h4 id="Manage">管理者機能</h4>
<div class=i>
<p>wwwlng.cgi の中の「$g_passwd = "";」という行を、例えば「$g_passwd = "xxx";」のように変更しておけば、下記の管理者機能が使用可能になります。</p>
<ol>
<li><b>ファイル削除機能</b>
<p>ラウンジを下記のように呼び出すことにより、1999 フォルダの中の 99129999.txt ファイルを削除することができます。</p>
<pre class=c>
http://～/～/wwwlng.cgi?delete+xxx+199912/99129999.txt
</pre>
<li><b>ファイル時刻更新機能</b>
<p>トピックファイルを直接編集すると、最終発言時刻は1週間前なのに「過去3日分のトピック」と見なされてしまうことがあります。この問題を回避するために、本機能を用いてファイルの更新時刻を最終発言時刻に合わせます。下記の例では、199911 と 199912 フォルダの中のファイルの更新時刻を、それぞれのトピックの最終発言時刻にあわせます。フォルダ名の代わりに all と指定すると、すべてのフォルダ中のファイル更新時刻を更新します。</p>
<pre class=c>
http://～/～/wwwlng.cgi?utime+xxx+199911+199911
</pre>
</ol>
</div>

<h4 id="Trouble">動かない時は</h4>
<div class=i>
<ol>
<li><p>まず、CGIの設置経験の無い方は、「<a href="../wwwcgi.htm" tppabs="http://www.tohoho-web.com/wwwcgi.htm">とほほのCGI入門</a>」や、プロバイダの説明書などを参考に、CGIが動作するところまでは自力で（もしくはプロバイダに問い合わせて）頑張ってください。</p>
<li><p>ラウンジを下記のようなアドレスで呼び出すと、自己診断機能を利用することができます。</p>
<pre class=c>
http://～/～/cgi-bin/wwwlng.cgi?test
</pre>
<li><p>Windows NT + IIS をご使用の場合で動作しない場合は、wwwlng.cgi の2行目に、下記の行を追加することで、動作するようになる場合があります。○○ の部分には、wwwlng.cgi を設置したフォルダの実パス名を指定してください。実パス名は、URLの仮想パス名と異なりますので注意してください。</p>
<pre class=c>
@ARGV = split(/\+/, $ENV{'QUERY_STRING'});
chdir('○○');
</pre>
<li><p>interQ など一部のご使用の場合は、wwwlng.cgi の 2行目に、以下の1行を追加することで動作する場合があります。○○には、wwwlng.cgi を設置したフォルダの仮想パス名を指定してください。例えば、http://www.yyy.zzz/aaa/bbb/wwwlng.cgi の場合は、/aaa/bbb/ となります。</p>
<pre class=c>
$ENV{'SCRIPT_NAME'} = "○○";
</pre>
<li><p>どうしてもラウンジが動作しない場合は質問メールを受け付けています。CGIの設置経験があるか無いかなどの情報を追記して、「<a href="../wwwquest.htm" tppabs="http://www.tohoho-web.com/wwwquest.htm">杜甫々へメールを送る</a>」を参照して質問をお寄せください。</p>
</ol>
</div>

<hr>
<div>Copyright (C) 1997-2001 杜甫々</div>
<div>初版：1997年5月23日、最終更新：2001年9月10日</div>
<div>http://www.tohoho-web.com/soft/wlng.htm</div>
</body>
</html>
