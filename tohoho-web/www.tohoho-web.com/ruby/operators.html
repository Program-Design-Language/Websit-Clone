<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Ruby入門 - 演算子 - とほほのWWW入門</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<link rel="stylesheet" href="../style3.css" tppabs="http://www.tohoho-web.com/style3.css">
</head>
<body>
<h2>Ruby入門 - 演算子</h2>
<a href="../www.htm" tppabs="http://www.tohoho-web.com/www.htm">トップ</a> &gt;
<a href="index.html" tppabs="http://www.tohoho-web.com/ruby/index.html">Ruby入門</a> &gt;
演算子

<h4 id="arithmetic">代数演算子(+, -, *, /, %, *)</h4>
<div class=i>
<p>下記の代数演算子が定義されています。</p>
<div class="tab">Ruby</div>
<pre class=c2>
<em>+</em>a            # 正数
<em>-</em>a            # 負数
a <em>+</em> b         # 加算
a <em>-</em> b         # 減算
a <em>*</em> b         # 乗算
a <em>/</em> b         # 除算
a <em>%</em> b         # a を b で割った余り
a <em>**</em> b        # a の b 乗
</pre>
<p>Ruby には a++ や ++a のような加算子(インクリメント)、減算子(デクリメント)はありません。代わりに +=, -= を用います。</p>
<div class="tab">Ruby</div>
<pre class=c2>
a <em>+=</em> 1        # a の値をひとつ加算する
a <em>-=</em> 1        # a の値をひとつ減算する
</pre>
</div>

<h4 id="string">文字列演算子(+, &lt;&lt;, *, %)</h4>
<div class=i>
<p>文字列を連結するには、+ を用いる方法と &lt;&gt; を用いる方法があります。後者の方が高速です。</p>
<div class="tab">Ruby</div>
<pre class=c2>
str1 <em>+</em> str2       # 文字列str1とstr2を連結(遅い、str1自体は変更無し)
str1 <em>&lt;&lt;</em> str2      # 文字列str1とstr2を連結(高速、str1自体が変更される)
str1 <em>*</em> n          # 文字列str1を n回繰り返した文字列
</pre>
<p><b>%</b> は、printf() のフォーマットで引数を整形します。</p>
<div class="tab">Ruby</div>
<pre class=c2>
puts <em>"%d" %</em> 127      #=&gt; 127
puts <em>"%x" %</em> 127      #=&gt; 7f
puts <em>"%o" %</em> 127      #=&gt; 177
puts <em>"[%5d]" %</em> 127   #=&gt; [  127]
</pre>
</div>

<h4 id="bitwise">ビット演算子(~, &amp;, |, ^, &lt;&lt;, &gt;&gt;, [])</h4>
<div class=i>
<p>下記のビット演算子が定義されています。</p>
<div class="tab">Ruby</div>
<pre class=c2>
<em>~</em>a            # a の否定(1は0、0は1)
a <em>&amp;</em> b         # ビット積(aもbも1のビットが1)
a <em>|</em> b         # ビット和(aまたはbが1のビットが1)
a <em>^</em> b         # 排他的論理和(aまたはbどちらかが1の時のみ1)
a <em>&lt;&lt;</em> b        # b ビット左シフト
a <em>&gt;&gt;</em> b        # b ビット右シフト
a<em>[n]</em>          # nビット目が立っていれば1、さもなくば0
</pre>
</div>

<h4 id="assignment">代入演算子(=, +=, -=, *=, /=, %=, **=, &amp;=, |=, ^=, &lt;&lt;=, &gt;&gt;=)</h4>
<div class=i>
<p>下記の代入演算子が定義されています。</p>
<div class="tab">Ruby</div>
<pre class=c2>
a <em>=</em> b         # a に b を代入する
a <em>+=</em> b        # a = a + b に同じ
a <em>-=</em> b        # a = a - b に同じ
a <em>*=</em> b        # a = a * b に同じ
a <em>/=</em> b        # a = a / b に同じ
a <em>%=</em> b        # a = a % b に同じ
a <em>**=</em> b       # a = a ** b に同じ
a <em>&amp;=</em> b        # a = a &amp; b に同じ
a <em>|=</em> b        # a = a | b に同じ
a <em>^=</em> b        # a = a ^ b に同じ
a <em>&lt;&lt;=</em> b       # a = a &lt;&lt; b に同じ
a <em>&gt;&gt;=</em> b       # a = a &gt;&gt; b に同じ
a <em>&amp;&amp;=</em> b       # a &amp;&amp; (a = b) に同じ
a <em>||=</em> b       # a || (a = b) に同じ
</pre>
</div>

<h4 id="comparison">比較演算子(==, !=, &lt;, &gt;, &lt;=, &gt;=, &lt;=&gt;, ===)</h4>
<div class=i>
<p>下記の比較演算子が定義されています。</p>
<div class="tab">Ruby</div>
<pre class=c2>
a <em>==</em> b        # a と b が等しい
a <em>!=</em> b        # a と b が等しくない
a <em>&lt;</em> b         # a が b よりも小さい
a <em>&gt;</em> b         # a が b よりも大きい
a <em>&lt;=</em> b        # a が b 以下である
a <em>&gt;=</em> b        # a が b 以上である
</pre>
<p><b>&lt;=&gt;</b> 演算子は、a &lt; b であれば -1、a == b であれば 0、a &gt; b であれば 1、比較できない時は nil を返します。</p>
<div class="tab">Ruby</div>
<pre class=c2>
a <em>&lt;=&gt;</em> b
</pre>
<p><b>===</b> 演算子は、case文のマッチングで用いられる比較を行います。例えば数値(Numeric)の場合は数値が等しいか、範囲(Range)の場合はその範囲内にあるか、正規表現(Regexp)の場合は正規表現にマッチするか、モジュール(Module)の場合はオブジェクトがサブクラスのインスタンスであるかどうかなどが判断されます。</p>
<div class="tab">Ruby</div>
<pre class=c2>
if <em>5 === 5</em> then               # Numeric
  puts "OK"
end

if <em>(1..10) === 5</em> then         # Range
  puts "OK"
end

if <em>/[a-z]/ === "a"</em> then       # Regexp
  puts "OK"
end

if <em>String === "a"</em> then        # Module
  puts "OK"
end
</pre>
</div>

<h4 id="logical">論理演算子(!, &amp;&amp;, ||, not, and, or)</h4>
<div class=i>
<p>下記の論理演算子が定義されています。</p>
<div class="tab">Ruby</div>
<pre class=c2>
<em>!</em>a                   # a が false であれば
a <em>&amp;&amp;</em> b               # a かつ b が true であれば
a <em>||</em> b               # a または b が true であれば
<em>not</em> a                # a が false であれば
a <em>and</em> b              # a かつ b が true であれば
a <em>or</em> b               # a または b が true であれば
</pre>
</div>

<h4 id="3terms">三項演算子(? :)</h4>
<div class=i>
<p><b>? : </b> は三項演算子と呼ばれます。</p>
<div class="tab">Ruby</div>
<pre class=c2>
a <em>?</em> b <em>:</em> c            # a が真であれば b さもなくば c
</pre>
</div>

<h4 id="array">配列演算子(+, -, &amp;, *, &lt;&lt;, ==, [])</h4>
<div class=i>
<p>配列(Array)に関しては、下記の演算子が定義されています。</p>
<div class="tab">Ruby</div>
<pre class=c2>
arr1 <em>+</em> arr2          # arr1 と arr2 を連結した配列
arr1 <em>-</em> arr2          # arr1 から arr2 の要素を取り除いた配列
arr1 <em>*</em> n             # arr1 の各要素を n 回繰り返した配列
arr1 <em>*</em> sep           # arr1 の各要素をセパレータ sep で連結した文字列
arr1 <em>&amp;</em> arr2          # arr1 と arr2 双方に含まれる要素からなる配列
arr1 <em>&lt;&lt;</em> obj          # arr1 に要素 obj を追加した配列
arr1 <em>==</em> arr2         # arr1 と arr2 が等しければ true さもなくば false
arr1 <em>&lt;=&gt;</em> arr2        # arr1 と arr2 が等しければ 0、大きければ 1、小さければ -1
arr1<em>[n]</em>              # arr1 の n番目の要素
arr1<em>[n..m]</em>           # arr1 の n～m番目の要素からなる配列
arr1<em>[n, len]</em>         # arr1 の n番目から len個の要素からなる配列
arr1<em>[n] =</em> val        # arr1 の n番目の要素を val で置換
arr1<em>[n..m] =</em> val     # arr1 の n～m番目の要素を val で置換
arr1<em>[n, len] =</em> val   # arr1 の n番目から len個の要素を val で置換
</pre>
</div>

<h4 id="hash">ハッシュ演算子(==, ===, [])</h4>
<div class=i>
<p>ハッシュ(Hash)に関しては、下記の演算子が定義されています。</p>
<div class="tab">Ruby</div>
<pre class=c2>
hash1 <em>==</em> hash2       # hash1 と hash2 の要素がすべて等しければ true
hash1 <em>===</em> hash2      # hash1 と hash2 の要素がすべて等しければ true
hash1<em>[key]</em>           # hash1 の中の keyに関連付けられた値
hash1<em>[key] =</em> val     # hash1 の中の keyに関連付けられた値を valで置換
</pre>
</div>

<h4 id="regexp">正規表現演算子(=~, !~)</h4>
<div class=i>
<p>正規表現(Regexp)に関しては、下記の演算子が定義されています。</p>
<div class="tab">Ruby</div>
<pre class=c2>
reg <em>=~</em> str           # 正規表現 reg に str がマッチすれば
reg <em>!~</em> str           # 正規表現 reg に str がマッチしなければ
</pre>
</div>

<h4 id="ope">演算子一覧</h4>
<div class=i>
<div class="tab">演算子一覧</div>
<pre class=c2>
Object(==, ===, =~)
  Array(+, -, *, &amp;, &lt;&lt;, &lt;=&gt;, ==, [], []=)
  Hash(==, ===, [], []=)
  String(%, *, +, &lt;&lt;, &lt;=&gt;, ==, =~, [], []=)
  Numeric(+, -, &lt;=&gt;)
    Float(+, -, *, /, %, **, ==, &lt;, &gt;, &lt;=, &gt;=, &lt;=&gt;)
    Integer(**, /)
      Bignum(+, -, *, /, %, **, ==, &lt;=, &gt;=, &lt;=&gt;, &lt;&lt;, &gt;&gt;, [], &amp;, |, ^, ~)
      Fixnum(+, -, *, /, %, **, ==, &lt;=, &gt;=, &lt;=&gt;, &lt;&lt;, &gt;&gt;, [], &amp;, |, ^, ~)
  Range(==, ===)
  Regexp(==, ===, =~)
</pre>
</div>

<hr>
<div>Copyright(C) 2014 杜甫々</div>
<div>初版：2014年12月30日、最終更新：2014年12月30日</div>
<div>http://www.tohoho-web.com/ruby/operators.html</div>
</body>
</html>

