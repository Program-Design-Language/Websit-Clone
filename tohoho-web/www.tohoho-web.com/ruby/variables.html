<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Ruby入門 - 変数・定数 - とほほのWWW入門</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<link rel="stylesheet" href="../style3.css" tppabs="http://www.tohoho-web.com/style3.css">
</head>
<body>
<h2>Ruby入門 - 変数・定数</h2>
<a href="../www.htm" tppabs="http://www.tohoho-web.com/www.htm">トップ</a> &gt;
<a href="index.html" tppabs="http://www.tohoho-web.com/ruby/index.html">Ruby入門</a> &gt;
変数・定数

<h4 id="identifier">識別子</h4>
<div class=i>
<p>変数、定数、クラス名、モジュール名、メソッド名等はすべて <b>識別子</b> で識別されます。識別子には、アンダーバー(_)を含む半角英数字を使用できます。ただし、識別子の先頭は数値であってはなりません。大文字・小文字は区別されます。</p>
<table class="tb1">
<tr><th>識別子</th><th>説明</th></tr>
<tr><td><b><i>ClassName</i></b></td><td>クラス名。大文字で始まる。</td></tr>
<tr><td><b><i>ModuleName</i></b></td><td>モジュール名。大文字で始まる。</td></tr>
<tr><td><b><i>local_var</i></b></td><td>ローカル変数。小文字で始まる。</td></tr>
<tr><td><b><i>@instans_var</i></b></td><td>インスタンス変数。@小文字で始まる。</td></tr>
<tr><td><b><i>@@instans_var</i></b></td><td>クラス変数。@@小文字で始まる。</td></tr>
<tr><td><b><i>$global_var</i></b></td><td>グローバル変数。$小文字で始まる。</td></tr>
<tr><td><b><i>Const_var</i></b></td><td>定数。$大文字で始まる。</td></tr>
<tr><td><b><i>LABEL</i></b></td><td>ラベル。先頭は大文字でも小文字でも可。ヒアドキュメントで使用。</td></tr>
</table>
</div>

<h4 id="local_var">ローカル変数(var)</h4>
<div class=i>
<p>小文字またはアンダーバー(<b>_</b>)で始まる変数は「<b>ローカル変数</b>」と呼ばれます。ブロック内、メソッド内などローカルなスコープで有効です。</p>
<div class="tab">Ruby</div>
<pre class=c2>
def func()
  <em>var</em> = 123
end
</pre>
</div>

<h4 id="instance_var">インスタンス変数(@var)</h4>
<div class=i>
<p>アットマーク(<b>@</b>) で始まる変数は「<b>インスタンス変数</b>」と呼ばれます。そのオブジェクトが存在する間有効です。インスタンス変数は、自クラスやサブクラスから参照できます。</p>
<div class="tab">Ruby</div>
<pre class=c2>
class MyClass
  def setName(str)
    <em>@name</em> = str
  end

  def getName()
    return <em>@name</em>
  end
end

obj1 = MyClass.new()
obj2 = MyClass.new()
obj1.setName("Tanaka")
puts obj1.getName()           # =&gt; Tanaka
puts obj2.getName()           # =&gt; nil
</pre>
</div>

<h4 id="class_var">クラス変数(@@var)</h4>
<div class=i>
<p>2つのアットマーク(<b>@@</b>) で始まる変数は「<b>クラス変数</b>」と呼ばれます。同じクラスのすべてのインスタンスで共有されます。クラス変数は、自クラスやサブクラスから参照できます。</p>
<div class="tab">Ruby</div>
<pre class=c2>
class MyClass
  def setName(str)
    <em>@@name</em> = str
  end

  def getName()
    return <em>@@name</em>
  end
end

obj1 = MyClass.new()
obj2 = MyClass.new()
obj1.setName("Tanaka")
puts obj1.getName()           # =&gt; Tanaka
puts obj2.getName()           # =&gt; Tanaka
</pre>
</div>

<h4 id="global_var">グローバル変数($var)</h4>
<div class=i>
<p>ドル記号(<b>$</b>) で始まる変数は「<b>グローバル変数</b>」と呼ばれます。プログラムのどこからでも参照できます。</p>
<div class="tab">Ruby</div>
<pre class=c2>
$name = "Tanaka"
puts $name
</pre>
</div>

<h4 id="const">定数(CONST)</h4>
<div class=i>
<p>大文字で始まる識別子は「<b>定数</b>」と呼ばれます。一度代入すると、再度値を変更することはできません。</p>
<div class="tab">Ruby</div>
<pre class=c2>
<em>PI</em> = 3.14

puts PI                 # =&gt; 3.14
</pre>
<p>クラス内で定義された定数は、クラス名::定数名 で参照されます。</p>
<div class="tab">Ruby</div>
<pre class=c2>
class MyClass
  PI = 3.14
end

puts <em>MyClass::PI</em>        # =&gt; 3.14
</pre>
<p>クラス外で定義された定数は、暗黙的に Object クラスの定数となります。Object::定数名は、::定数名 とすることもできます。</p>
<div class="tab">Ruby</div>
<pre class=c2>
PI = 3.14
puts <em>Object::PI</em>         # =&gt; 3.14
puts <em>::PI</em>               # =&gt; 3.14
</pre>
</div>

<h4 id="pseudo">擬似変数(true, false, nil, self)</h4>
<div class=i>
<p>下記の4つの擬似変数があります。擬似変数は値を変更することはできません。</p>
<table class="tb1">
<tr><th>擬似変数</th><th>説明</th></tr>
<tr><td><b>true</b></td><td>真を意味します。TrueClass クラスの唯一のインスタンスです。</td></tr>
<tr><td><b>false</b></td><td>偽を意味します。FalseClass クラスの唯一のインスタンスです。</td></tr>
<tr><td><b>nil</b></td><td>未定義値を意味します。NilClass クラスの唯一のインスタンスです。</td></tr>
<tr><td><b>self</b></td><td>処理中の自分自身のインスタンスを示します。</td></tr>
</table>
</div>

<hr>
<div>Copyright(C) 2014 杜甫々</div>
<div>初版：2014年12月30日、最終更新：2014年12月30日</div>
<div>http://www.tohoho-web.com/ruby/variables.html</div>
</body>
</html>

