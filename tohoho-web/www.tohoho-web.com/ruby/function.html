<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Ruby入門 - メソッド - とほほのWWW入門</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<link rel="stylesheet" href="../style3.css" tppabs="http://www.tohoho-web.com/style3.css">
</head>
<body>
<h2>Ruby入門 - メソッド</h2>
<a href="../www.htm" tppabs="http://www.tohoho-web.com/www.htm">トップ</a> &gt;
<a href="index.html" tppabs="http://www.tohoho-web.com/ruby/index.html">Ruby入門</a> &gt;
メソッド

<h4 id="def">メソッド(def)</h4>
<div class=i>
<div class="title-tab">文法</div>
<pre class=c2>
<b>def</b> <i>method_name</i> [<b>(</b>[<i>arg</i>[<b>=</b><i>default</i>]]...[<b>,</b> *<i>rest_args</i>][<b>,</b> <b>&amp;</b><i>block_arg</i>]<b>)</b>]
  <i>expression</i>...
[<b>rescue</b> [<i>error_type</i>, ...] [<b>=&gt;</b> <i>evar</i>] [<b>then</b>]
  <i>expression</i>...]...
[<b>else</b>
  <i>expression</i>...]...
[<b>ensure</b>
  <i>expression</i>...]
<b>end</b>
</pre>
<p><b>def</b> はメソッドを定義します。</p>
<div class="tab">Ruby</div>
<pre class=c2>
<em>def hello</em>           # helloメソッドを定義する
  puts "Hello!!"
<em>end</em>

<em>hello</em>               # helloメソッドを呼び出す
</pre>
<p>(...) で引数を受け取ることができます。</p>
<div class="tab">Ruby</div>
<pre class=c2>
<em>def hello(name)</em>
  puts "Hello " + name
<em>end</em>

puts hello("Tanaka")    #=&gt; Hello Tanaka
</pre>
<p>下記の様に、引数を省略した場合のデフォルト値を指定することができます。</p>
<div class="tab">Ruby</div>
<pre class=c2>
<em>def hello(name = "Tanaka")</em>
  puts "Hello " + name
<em>end</em>

puts hello              #=&gt; Hello Tanaka
</pre>
</div>

<h4 id="return">メソッドの戻り値(return)</h4>
<div class=i>
<div class="title-tab">文法</div>
<pre class=c2>
<b>return</b> [<i>expr</i>]
</pre>
<p><b>return</b> は、メソッドの戻り値を指定します。下記の例は、引数 x と y の合計値を返すメソッドを定義します。</p>
<div class="tab">Ruby</div>
<pre class=c2>
def add(x, y)
  <em>return x + y</em>
end
</pre>
<p>メソッドの中の一番最後の式がメソッドの戻り値となるため、上記は下記の様にも記述できます。</p>
<div class="tab">Ruby</div>
<pre class=c2>
def add(x, y)
  <em>x + y</em>
end
</pre>
</div>

<h4 id="vargs">可変引数(*args)</h4>
<div class=i>
<p>引数の前に <b>*</b> をつけると、残りの引数をすべて <b>可変引数</b> の配列として受け取ります。</p>
<div class="tab">Ruby</div>
<pre class=c2>
def func(num, <em>*args</em>)
  p num                #=&gt; 123
  p <em>args</em>               #=&gt; ["A", "B", "C"]
end

func(123, "A", "B", "C")
</pre>
</div>

<h4 id="block">メソッドにブロックを渡す(&amp;block)</h4>
<div class=i>
<p>引数に <b>&amp;</b> をつけると、ブロックを受け取ります。元々は繰り返し処理のために実装されたため、ブロックはイテレータとも呼ばれます。</p>
<div class="tab">Ruby</div>
<pre class=c2>
def hello(cnt, <em>&amp;block_arg</em>)
  cnt.times do
    <em>block_arg.call</em>
  end
end

hello(3) { print "Hello " }       #=&gt; Hello Hello Hello
</pre>
</div>

<h4 id="specific_method">特異メソッド</h4>
<div class=i>
<p>作成済みのオブジェクトに対して、一時的なメソッド(<b>特異メソッド</b>)を追加することが可能です。自分自身のオブジェクトは <b>self</b> で参照できます。ただし、Fixednum、Symbol、true, false, nil に対しては特異メソッドを定義できません。</p>
<div class="tab">Ruby</div>
<pre class=c2>
str = String.new("ABC");

<em>def str.print</em>                     # strオブジェクトに特異メソッドを定義
  puts "[[[" + self + "]]]"
end

str.print                         # 特異メソッドを呼び出す
</pre>
</div>

<hr>
<div>Copyright(C) 2014 杜甫々</div>
<div>初版：2014年12月30日、最終更新：2014年12月30日</div>
<div>http://www.tohoho-web.com/ruby/syntax.html</div>
</body>
</html>

