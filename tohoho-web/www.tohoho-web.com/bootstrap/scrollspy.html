<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8"utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="stylesheet" href="../../stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" tppabs="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
<title>とほほのBootstrap 4入門 - スクロールスパイ - とほほのWWW入門</title>
<link rel="stylesheet" href="style.css" tppabs="http://www.tohoho-web.com/bootstrap/style.css">
<script src="../../code.jquery.com/jquery-3.3.1.slim.min.js" tppabs="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script>
$(function() {
  $('#example-main').scrollspy({offset:60});
  $('#example-menu a').click(function(event) {
    location.replace($(this).attr('href'));
  });
});
</script>
<style>
.example-box {
  position: relative;
  width: 100%;
  height: 200px;
  border: 1px solid #ccc;
}
#example-menu {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 8rem;
  z-index: 1;
  background-color: #f6f6f6;
}
#example-main {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 100%;
  padding-left: 8.5rem;
  overflow-y: scroll;
}
</style>
</head>
<body class="my-body">
<div class="container-fluid my-container">
<h2 class="my-h2">とほほのBootstrap 4入門 <img src="../image/popase.gif" tppabs="http://www.tohoho-web.com/image/popase.gif" alt="" height=19 width=18></h2>
<a href="../www.htm" tppabs="http://www.tohoho-web.com/www.htm">トップ</a> &gt;
<a href="index.html" tppabs="http://www.tohoho-web.com/bootstrap/index.html">Bootstrap 4入門</a> &gt;
スクロールスパイ

<h4 class="my-h4" id="scrollspy">スクロールスパイ</h4>
<div class=i>
<p>スクロールスパイはメニュー(ナビゲーションバー、またはリストグループ)に応じて本文をスクロールします。また、本文のスクロールを監視し、スクロールに応じてメニューの該当アイテムをアクティブにします。</p>
<div class="my-title">Sample</div>
<div class="my-sample">
<div class="example-box">
  <div id="example-menu" class="list-group">
    <a class="list-group-item list-group-item-action active" href="#section-1">Section #1</a>
    <a class="list-group-item list-group-item-action" href="#section-2">Section #2</a>
    <a class="list-group-item list-group-item-action" href="#section-3">Section #3</a>
  </div>
  <div id="example-main">
    <h1 id="section-1" style="height:280px">Section #1</h1>
    <h1 id="section-2" style="height:280px">Section #2</h1>
    <h1 id="section-3" style="height:280px">Section #3</h1>
  </div>  
</div>
</div>
<p>下記にサンプルを示します。スクロールを監視する対象に対して <code>scrollspy()</code> を呼び出すことにより監視が始まります。</p>
<div class="my-title">Code</div>
<pre class="my-sample">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;link rel="stylesheet"
    href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"
    integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS"
    crossorigin="anonymous"&gt;
&lt;title&gt;Scrollspy Example&lt;/title&gt;
&lt;script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"&gt;&lt;/script&gt;
&lt;style&gt;
body {
  position: absolute;
  width: 100%;
  top: 0;
  bottom: 0;
}
#example-menu {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 8rem;
  z-index: 1;
  background-color: #f6f6f6;
}
#example-main {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 100%;
  padding-left: 8.5rem;
  overflow-y: scroll;
}
&lt;/style&gt;
&lt;script&gt;
$(function() {
  <em class="s">$('#example-main').scrollspy({offset:$(window).height() / 2});</em>
});
&lt;/script&gt;
&lt;body&gt;
&lt;h4&gt;サンプル&lt;/h4&gt;
&lt;div id="example-menu" class="list-group"&gt;
  &lt;a class="list-group-item list-group-item-action active" href="#section-1"&gt;Section #1&lt;/a&gt;
  &lt;a class="list-group-item list-group-item-action" href="#section-2"&gt;Section #2&lt;/a&gt;
  &lt;a class="list-group-item list-group-item-action" href="#section-3"&gt;Section #3&lt;/a&gt;
&lt;/div&gt;
&lt;div id="example-main"&gt;
  &lt;h1 id="section-1"&gt;Section #1&lt;/h1&gt;
  &lt;p style="height:800px"&gt;...&lt;/p&gt;
  &lt;h1 id="section-2"&gt;Section #2&lt;/h1&gt;
  &lt;p style="height:800px"&gt;...&lt;/p&gt;
  &lt;h1 id="section-3"&gt;Section #3&lt;/h1&gt;
  &lt;p style="height:800px"&gt;...&lt;/p&gt;
&lt;/div&gt;
&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"
    integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
    crossorigin="anonymous"&gt;&lt;/script&gt;
&lt;script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"
    integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"
    crossorigin="anonymous"&gt;&lt;/script&gt;
&lt;/body&gt;  
&lt;/html&gt;
</pre>
<p>監視する対象が body の場合は <code>scrollspy()</code> は不要です。代わりに body 要素に <code>data-spy="scroll"</code>, <code>data-target="..."</code> を指定します。下記の例ではナビゲーションバーをウィンドウの最上部部に張り付けています。ナビゲーションバー分のオフセットを得るために body に margin-top を指定し、メニュークリック時にオフセット分スクロールを戻しています。</p>
<div class="my-title">Code</div>
<pre class="my-sample">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;link rel="stylesheet"
    href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"
    integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS"
    crossorigin="anonymous"&gt;
&lt;title&gt;Scrollspy Example&lt;/title&gt;
&lt;script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"&gt;&lt;/script&gt;
&lt;style&gt;
body {
  margin-top: 56px;
}
&lt;/style&gt;
&lt;script&gt;
$(function() {
  var offset = 56;
  $('.navbar li a').click(function(event) {
    event.preventDefault();
    location.replace($(this).attr('href'));
    window.scrollBy(0, -offset);
  });
});
&lt;/script&gt;
&lt;body <em class="s">data-spy="scroll" data-target="#navbar1" data-offset="100"</em>&gt;
&lt;nav class="navbar fixed-top navbar-dark bg-dark" id="navbar1"&gt;
  &lt;a class="navbar-brand" href="#"&gt;Navbar&lt;/a&gt;
  &lt;ul class="nav nav-pills"&gt;
    &lt;li class="nav-item"&gt;&lt;a class="nav-link active" href="#section-1"&gt;Section #1&lt;/a&gt;&lt;/li&gt;
    &lt;li class="nav-item"&gt;&lt;a class="nav-link" href="#section-2"&gt;Section #2&lt;/a&gt;&lt;/li&gt;
    &lt;li class="nav-item"&gt;&lt;a class="nav-link" href="#section-3"&gt;Section #3&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/nav&gt;
&lt;h1 id="section-1"&gt;Section #1&lt;/h1&gt;
&lt;p style="height:800px"&gt;...&lt;/p&gt;
&lt;h1 id="section-2"&gt;Section #2&lt;/h1&gt;
&lt;p style="height:800px"&gt;...&lt;/p&gt;
&lt;h1 id="section-3"&gt;Section #3&lt;/h1&gt;
&lt;p style="height:800px"&gt;...&lt;/p&gt;
&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"
    integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
    crossorigin="anonymous"&gt;&lt;/script&gt;
&lt;script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"
    integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"
    crossorigin="anonymous"&gt;&lt;/script&gt;
&lt;/body&gt;  
&lt;/html&gt;
</pre>
</div>

<h4 class="my-h4" id="options">オプション</h4>
<div class=i>
<div class="my-title">Code</div>
<pre class="my-sample">
&lt;body data-spy="scroll" <em class="s">data-target="#navbar1"</em> <em class="s">data-offset="100"</em>&gt;
  ...
&lt;/body&gt;
</pre>
<div class="my-title">Code</div>
<pre class="my-sample">
$(...).scrollspy({<em class="s">target:'#navbar1'</em>, <em class="s">offset:100</em>});
</pre>
<table class="table table-bordered table-striped table-sm">
<tr>
  <th style="min-width:6rem;">名前</th>
  <th style="min-width:5rem;">型</th>
  <th style="min-width:4rem;">規定値</th>
  <th>説明</th>
</tr>
<tr>
  <td><code>offset</code></td>
  <td>number</td>
  <td>10</td>
  <td>トップからの距離がこの値以下になった時に、アクティブ要素を変更します。</td>
</tr>
<tr>
  <td><code>method</code></td>
  <td>string</td>
  <td>auto</td>
  <td>監視方法を指定します。<code>offset</code> は jQuery の offset メソッドを用いて、<code>position</code> は jQuery の position メソッドを用いて監視します。<code>auto</code> を指定すると適切なメソッドを自動判断します。</td>
</tr>
<tr>
  <td><code>target</code></td>
  <td>string</td>
  <td>(なし)</td>
  <td>監視結果を反映するメニュー(ナビゲーションバーまたはリストグループ)を指定します。</td>
</tr>
</table>
</div>

<hr>
<div>Copyright (C) 2015-2019 杜甫々</div>
<div>初版:2015年9月6日 最終更新:2019年1月6日</div>
<div>http://www.tohoho-web.com/bootstrap/scrollspy.html</div>
</div>
<script src="../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" tppabs="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
<script src="../../stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" tppabs="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
</body>
</html>
