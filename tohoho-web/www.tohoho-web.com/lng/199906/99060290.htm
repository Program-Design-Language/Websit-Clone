<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
<title>巨大なHTMLファイルが出来てしまう場合の対応方法を教えて下さい</title>
<link rel="stylesheet" href="../style.css" tppabs="http://www.tohoho-web.com/lng/style.css">
</head>
<body>
<h3>巨大なHTMLファイルが出来てしまう場合の対応方法を教えて下さい</h3>
<a href="index.htm" tppabs="http://www.tohoho-web.com/lng/199906/index.htm">[上に]</a>
<a href="99060289.htm" tppabs="http://www.tohoho-web.com/lng/199906/99060289.htm">[前に]</a>
<a href="99060291.htm" tppabs="http://www.tohoho-web.com/lng/199906/99060291.htm">[次に]</a>
<hr>
<span class=name>しんきち</span>
<span class=email><a href="mailto:s-kaneko@hpt.yrc.co.jp">[E-Mail]</a></span>
<span class=time>1999/06/29(火) 18:59:05</span><br>
与えられた検索条件によりデータベースを検索し、その検索結果をテーブルとして<br>
ブラウザに表示する CGI を作っています。<br>
基本的には正しく動いているのですが、検索条件が甘い場合には、作成されるHTML<br>
ファイルが巨大（1MB以上）になってしまうため、読み込み時間が非常に長くなる<br>
だけでなく、マシンによってはメモリ不足を起こしてしまい、困っています。<br>
このようなケースに対処するには、どうすれば良いでしょうか？<br>
アドバイスをお願いいたします。<br>
<hr>
<span class=name>ばかぼん</span>
<span class=time>1999/06/29(火) 19:27:06</span><br>
１．テーブルをやめる。（多少軽くなる）<br>
２．ある件数で切る。（その旨のメッセージを表示する）<br>
３．次ページ／前ページ機能。<br>
個人的には、３番が一番良いのでは？と思います。<br>
一度に全て検索してくるのではなく、最初に５０件検索し、<br>
次ページで次の５０件を検索するようにする。<br>
今のＣＧＩをチョット改造すればできると思いますよ。<br>
<hr>
<span class=name>ふじ</span>
<span class=time>1999/06/29(火) 19:27:46</span><br>
ヒットした件数か、書き出す文字列のバイト数で判断して、<br>
大きすぎる場合は処理を中断してメッセージを出せばいいんじゃないでしょうか。<br>
<hr>
<span class=name>ばかぼん</span>
<span class=time>1999/06/29(火) 19:59:34</span><br>
１．テーブルをやめる。（多少軽くなる）<br>
２．ある件数で切る。（その旨のメッセージを表示する）<br>
３．次ページ／前ページ機能。<br>
個人的には、３番が一番良いのでは？と思います。<br>
一度に全て検索してくるのではなく、最初に５０件検索し、<br>
次ページで次の５０件を検索するようにする。<br>
今のＣＧＩをチョット改造すればできると思いますよ。<br>
<hr>
<span class=name>ばかぼん</span>
<span class=time>1999/06/29(火) 20:01:27</span><br>
1回目送信して再読込したら同じのが入ってしまいました。<br>
ごめんなさい。<br>
<hr>
<span class=name>しんきち</span>
<span class=email><a href="mailto:s-kaneko@hpt.yrc.co.jp">[E-Mail]</a></span>
<span class=time>1999/06/30(水) 09:40:44</span><br>
アドバイスありがとうございます。<br>
「次ページ／前ページ機能」が「チョットの改造」で出来るのなら、やはりそれがいいでしょうね。<br>
その辺のテクニックについて解説されたホームページ等ご存知でしたら、ご紹介下さい。<br>
以上、宜しくお願いします。<br>
<hr>
<span class=name>ばかぼん</span>
<span class=time>1999/06/30(水) 13:59:46</span><br>
<font color="#CC8000">&gt;その辺のテクニックについて解説されたホームページ等</font><br>
これについては、申し訳ありませんが見たことがありません。<br>
私の例でよろしければポイントをいくつか紹介します。<br>
１．ＣＧＩのパラメータ（多分今は検索条件だけですか？）に表示するページ<br>
　　数と１ページに表示する件数を追加する。<br>
２．表示するページ数は、４で埋め込むhiddenタグのページ数に<br>
　　ＣＧＩを呼ぶときJavaScriptで＋１または−１する。<br>
３．検索してＨＴＭＬを作るとき、２ページ目の表示で１ページに５０件の表示なら<br>
　　５１件目から１００件目までを出力し、それ以外はスキップする。<br>
４．ＣＧＩの出力するＨＴＭＬの中にhiddenタグを使って、ヒット件数、<br>
　　表示したページ数、１ページに表示する件数を埋め込んでおく。<br>
ちなみにＣＧＩはＣで組みました。<br>
仕事がらみですのでソースは公開できません。<br>
基本的には検索そのものは変える必要はなく、ヒットしたデータの何件目から何件目<br>
を表示してやるかだけなんですけど。<br>
説明が下手ですいません。<br>
<hr>
<span class=name>じぇい</span>
<span class=time>1999/06/30(水) 14:37:16</span><br>
フリーのＣＧＩで次ページ前ページ機能のついてるやつを探してソースを見てみたらいいと思います。<br>
<hr>
<a href="index.htm" tppabs="http://www.tohoho-web.com/lng/199906/index.htm">[上に]</a>
<a href="99060289.htm" tppabs="http://www.tohoho-web.com/lng/199906/99060289.htm">[前に]</a>
<a href="99060291.htm" tppabs="http://www.tohoho-web.com/lng/199906/99060291.htm">[次に]</a>
</body>
</html>
