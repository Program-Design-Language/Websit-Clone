<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
<title>cgiでファイルを作ってメールを出す</title>
<link rel="stylesheet" href="../style.css" tppabs="http://www.tohoho-web.com/lng/style.css">
</head>
<body>
<h3>cgiでファイルを作ってメールを出す</h3>
<a href="index.htm" tppabs="http://www.tohoho-web.com/lng/199907/index.htm">[上に]</a>
<a href="99070103.htm" tppabs="http://www.tohoho-web.com/lng/199907/99070103.htm">[前に]</a>
<a href="99070105.htm" tppabs="http://www.tohoho-web.com/lng/199907/99070105.htm">[次に]</a>
<hr>
<span class=name>すぎの</span>
<span class=time>1999/07/11(日) 02:57:36</span><br>
#!/usr/local/bin/perl<br>
require './jcode.pl';<br>
$tmp_emb = 'mail.dat';<br>
$mailto&nbsp;&nbsp;&nbsp;= 'cgi@komekawa.or.jp';<br>
$nkf&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= '/usr/local/bin/nkf';<br>
$sendmail = '/usr/sbin/sendmail';<br>
open(OUT, '&gt;$tmp_emb');<br>
print OUT "これはCGIからのメールです。\n";<br>
print OUT "ちゃんと動いています。\n";<br>
close(OUT);<br>
'$sendmail $mailto &lt; $tmp_emb';<br>
unlink('$tmp_emb');<br>
<br>
このcgiファイルを読み込んだら自動でメールが来るように<br>
したいのですが、エラーもでずに完全に無視されています。<br>
何が足りないのでしょうか？<br>
<hr>
<span class=name>ふじ</span>
<span class=time>1999/07/11(日) 04:02:59</span><br>
検証してないけど<br>
<br>
<font color="#CC8000">＞open(OUT, '&gt;$tmp_emb');</font><br>
<br>
これ、$tmp_emb という名前のファイルをオープンしてます。<br>
シングルクォートだから変数展開されていないでしょう。<br>
<br>
open などのシステムコールの戻り値はちゃんとチェックしましょう。<br>
open (OUT , "hoge") or print "can't open hoge $!";<br>
みたいにして。<br>
<br>
メールを送る部分は、とほほさんの「メール送信フォーム」などの<br>
ソースを参考にするといいかも。エラーチェックもしてますし。<br>
<hr>
<a href="index.htm" tppabs="http://www.tohoho-web.com/lng/199907/index.htm">[上に]</a>
<a href="99070103.htm" tppabs="http://www.tohoho-web.com/lng/199907/99070103.htm">[前に]</a>
<a href="99070105.htm" tppabs="http://www.tohoho-web.com/lng/199907/99070105.htm">[次に]</a>
</body>
</html>
