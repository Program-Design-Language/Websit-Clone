<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
<title>SSIsocketgvOo</title>
<link rel="stylesheet" href="../style.css" tppabs="http://www.tohoho-web.com/lng/style.css">
</head>
<body>
<h3>SSIsocketgvOo</h3>
<a href="index.htm" tppabs="http://www.tohoho-web.com/lng/199907/index.htm">[]</a>
<a href="99070249.htm" tppabs="http://www.tohoho-web.com/lng/199907/99070249.htm">[O]</a>
<a href="99070251.htm" tppabs="http://www.tohoho-web.com/lng/199907/99070251.htm">[]</a>
<hr>
<span class=name>miyu</span>
<span class=time>1999/07/23() 20:33:22</span><br>
WWWT[oA: CGIgpsCSSI\<br>
WWWT[oB: CGI, SSI\<br>
DAy[WSSIBCGIvO<br>
o\vOD<br>
Ay[W&lt;A HREF="<a href="javascript:if(confirm('http://b/~miyu/98022505.htm  \n\n该文件无法用 Teleport Ultra 下载, 因为 它是一个域或路径外部被设置为它的启始地址的地址。  \n\n你想在服务器上打开它?'))window.location='http://b/~miyu/98022505.htm'" tppabs="http://b/~miyu/foo.cgi">http://B/~miyu/foo.cgi</a>"&gt;c<br>
oCBT[ooD<br>
<br>
XNvgT[oAuC<br>
&lt;!---exec cmd="`"---&gt;<br>
oCXNvgF<br>
C\D<br>
<br>
PerlCy[WXNvgQlx<br>
DD<br>
<br>
-----begin------<br>
$post_parameter = "hogehoge=hagahaga&amp;..."<br>
$addr = (gethostbyname("T[oBzXg"))[4];<br>
$method = "POST";<br>
$url&nbsp;&nbsp;&nbsp;&nbsp;= "~miyu/foo.cgi";<br>
$ipname = pack("S n a4 x8", 2, 80, $addr);<br>
<br>
#-----------------------------------------Zbg--------------<br>
&amp;make_socket;<br>
print @lines;<br>
<br>
#-----------------------------------------f[^M--------------<br>
sub make_socket{<br>
 socket(SOCKET, 2, 1, 0) || die "Can't socket\n";<br>
 connect(SOCKET, $ipname) || die "Can't connect\n";<br>
 select(SOCKET); $| = 1; select(STDOUT);<br>
<br>
 if( $method eq "GET" ){<br>
&nbsp;&nbsp;print SOCKET "$method /$url?$post_parameter HTTP/1.0\r\n";<br>
 }else{<br>
&nbsp;&nbsp;print SOCKET "$method /$url HTTP/1.0\r\n";<br>
 }<br>
 if( $method eq "POST" ){<br>
&nbsp;&nbsp;$len = length($post_parameter);<br>
&nbsp;&nbsp;print SOCKET "Content-length: $len\r\n";<br>
&nbsp;&nbsp;print SOCKET "\r\n";<br>
&nbsp;&nbsp;print SOCKET "$post_parameter\r\n";<br>
 }<br>
 print SOCKET "User-Agent: $ownscript\r\n";<br>
 print SOCKET "\r\n";<br>
<br>
 #----------------------------------------f[^M---------------<br>
 $i=0;<br>
<br>
 if( $method eq "GET" || $method eq "POST" ){<br>
&nbsp;&nbsp;print "$i\n";<br>
&nbsp;&nbsp;while(&lt;SOCKET&gt;){&nbsp;&nbsp;m/^\r\n$/ &amp;&amp; last;&nbsp;&nbsp;$i++;}<br>
&nbsp;&nbsp;while(&lt;SOCKET&gt;){<br>
&nbsp;&nbsp;&nbsp;if( $_ =~ m/^&lt;HR&gt;.*/ ){ $lines[$i++] = $_; }#foo.cgio<br>
&nbsp;&nbsp;&nbsp;$i++;<br>
&nbsp;&nbsp;}<br>
 }elsif( $method eq "HEAD" ){<br>
&nbsp;&nbsp;while(&lt;SOCKET&gt;){&nbsp;&nbsp;&nbsp;print $_;&nbsp;&nbsp;}<br>
 }<br>
}<br>
<hr>
<span class=name>miyu</span>
<span class=time>1999/07/23() 20:36:24</span><br>
CuZbgvC<br>
<font color="#CC8000">&gt;#-----------------------------------------Zbg--------------</font><br>
<font color="#CC8000">&gt;&amp;make_socket;</font><br>
<font color="#CC8000">&gt;print @lines;</font><br>
<hr>
<span class=name>B-Cus</span>
<span class=time>1999/07/23() 22:32:45</span><br>
A<br>
<font color="#CC8000">&gt; socket(SOCKET, 2, 1, 0) || die "Can't socket\n";</font><br>
A<br>
@if ( ! socket(SOCKET, 2, 1, 0) ){ print "Error in socket"; exit; }<br>
AfobNB<br>
@close(STDERR);<br>
@open(STDERR,"&gt;&amp;-");<br>
die?("&gt;-")<br>
<br>
<font color="#CC8000">&gt; &lt;!---exec cmd="`"---&gt;</font><br>
 &lt;!--#exec cmd="`" --&gt;<br>
<hr>
<span class=name>miyu</span>
<span class=time>1999/07/23() 23:07:10</span><br>
AhoCXD<br>
<font color="#CC8000">&gt;if ( ! socket(SOCKET, 2, 1, 0) ){ print "Error in socket"; exit; }</font><br>
\D<br>
<br>
<font color="#CC8000">&gt;if( $method eq "GET" || $method eq "POST" ){</font><br>
<font color="#CC8000">&gt;print "$i\n";</font><br>
<br>
C`0'$il\DC<br>
T[oBANZXOCL^D<br>
<br>
B-CusCG[bZ[W<br>
G[o\C<br>
CD<br>
<br>
<font color="#CC8000">&gt;@close(STDERR);</font><br>
<font color="#CC8000">&gt;@open(STDERR,"&gt;&amp;-");</font><br>
<br>
H<br>
<hr>
<span class=name>B-Cus</span>
<span class=time>1999/07/24(y) 14:05:29</span><br>
JBSOB<br>
<br>
-------------------------------------------------------------------------<br>
XNvgA<a href="../../wwwperl2.htm#socket" tppabs="http://www.tohoho-web.com/wwwperl2.htm#socket">http://www.tohoho-web.com/wwwperl2.htm#socket</a><br>
Ql? l SocketW[g<br>
(vperl5)AOuc<br>
<br>
------------------------------------------------------------------------<br>
<font color="#CC8000">&gt; socket(S, 2, 1, 0);</font><br>
BbmB<br>
<br>
@@socketAA\PbgAhC^Cv()A<br>
@@\Pbg^CvAvgR^CvB<br>
<br>
@@hC^Cv<br>
@@@EAF_UNIX(UNIXhC\Pbg)AF_INET(C^[lbghC\Pbg)<br>
@@wBAC^[lbghC\PbgB<br>
<br>
@@\Pbg^Cv<br>
@@@ESOCK_STREAM(TCP/IP)SOCK_DGRAM(UDP/IP)<br>
@@IB<br>
<br>
@@vgR^CvAIPTCPICMPwA<br>
@@0B<br>
<br>
Asocket(S,2,1,0)AF_INETASOCK_DGRAMB<br>
vC^[lbgAUDP/IPgB<br>
<br>
BWWWT[oUDP/IPTCP/IPB<br>
ATCP/IPB<br>
# B{uHTTPUDPv<br>
# mBRFC<br>
#@@HTTP communication usually takes place over TCP/IP connections.<br>
# ATCPvB<br>
<br>
A socket(S,2,2,0) B<br>
AUDPWWWT[oB<br>
AUDPB<br>
# AB<br>
<br>
------------------------------------------------------------------------<br>
A<a href="../../wwwperl2.htm#socket" tppabs="http://www.tohoho-web.com/wwwperl2.htm#socket">http://www.tohoho-web.com/wwwperl2.htm#socket</a> <br>
TvAB<br>
\[X}WbNio()<br>
B<br>
<br>
perl5g SocketW[g<br>
@<a href="javascript:if(confirm('http://www.cs.gunma-u.ac.jp/~j5306050/net/98022507.htm  \n\n该文件无法用 Teleport Ultra 下载, 因为 它是一个域或路径外部被设置为它的启始地址的地址。  \n\n你想在服务器上打开它?'))window.location='http://www.cs.gunma-u.ac.jp/~j5306050/net/98022507.htm'" tppabs="http://www.cs.gunma-u.ac.jp/~j5306050/net/http-2.html">http://www.cs.gunma-u.ac.jp/~j5306050/net/http-2.html</a><br>
B|[g80 getservbynamegB<br>
2PF_INETB<br>
@socket(SERVER,2,2,0)<br>
@socket(SERVER,PF_INET,SOCK_STREAM,$proto)<br>
?<br>
<br>
LWPW[gB<br>
# SocketW[Perl5WtB<br>
# LWPW[CXg[KvB<br>
<br>
ALq]<br>
# ASc<br>
<br>
------------------------------------------------------------------------<br>
A\BSSIT[oOA<br>
proxyoRsB<br>
@GET /$url HTTP/1.0\r\n<br>
<br>
@GET http://WWWT[ozXg/$url HTTP/1.0\r\n<br>
BRconnectproxyT[oB<br>
<br>
------------------------------------------------------------------------<br>
APOST ? $post_parameter<br>
tv(mF)B<br>
<br>
------------------------------------------------------------------------<br>
AfobOAvOP<br>
iB<br>
<br>
POSTHEADBGET(HEAD)<br>
lBlsv<br>
fobOnB<br>
<br>
$addr = (gethostbyname("T[oBzXg"))[4];<br>
$url = "/index.html";<br>
$ipname = pack("S n a4 x8", 2, 80, $addr);<br>
socket(SOCKET, 2, 1, 0);<br>
connect(SOCKET, $ipname);<br>
select(SOCKET); $| = 1; select(STDOUT);<br>
print SOCKET "GET /index.html HTTP/1.0\r\n\r\n";<br>
while(&lt;SOCKET&gt;){print;}<br>
<br>
------------------------------------------------------------------------<br>
<font color="#CC8000">&gt; H</font><br>
XNvgBdieSTDOUToB<br>
<hr>
<span class=name>miyu</span>
<span class=time>1999/07/25() 23:19:54</span><br>
<span class=resolv>[[]]</span><br>
<font color="#CC8000">&gt;&gt; socket(S, 2, 1, 0);</font><br>
<font color="#CC8000">&gt;BbmB</font><br>
<br>
CD<br>
socket(S, 2, 2, 0);<br>
CD<br>
<br>
wEC}WbNio[vO<br>
mC<br>
socketgC<br>
CSR<br>
DCB-Cus<br>
DD<br>
CB-Cusy[WQlD<br>
<br>
CvOC<br>
}[N`FbND<br>
<hr>
<span class=name>B-Cus</span>
<span class=time>1999/07/26() 02:59:05</span><br>
BRB<br>
<br>
<font color="#CC8000">&gt; WWWT[oUDP/IPTCP/IPB</font><br>
<font color="#CC8000">&gt; ATCP/IPB</font><br>
RBHTTPUDPTCPB<br>
<br>
<font color="#CC8000">&gt; {uHTTPUDPvmB</font><br>
\B<br>
<br>
<br>
C socket ASOCK_STREAM  SOCK_DGRAM <br>
gB (/usr/include/)sys/socket.h `B<br>
FreeBSD<br>
@@#define SOCK_STREAM 1 /* stream socket */<br>
@@#define SOCK_DGRAM 2 /* datagram socket */<br>
BAsocket(2,1,0)B<br>
# AANZXT[oUDP<br>
# v<br>
<br>
ASolaris<br>
@@#define SOCK_STREAM 2 /* stream socket */<br>
@@#define SOCK_DGRAM 1 /* datagram socket */<br>
ATCPUDPlStBA<br>
<a href="../../wwwperl2.htm#socket" tppabs="http://www.tohoho-web.com/wwwperl2.htm#socket">http://www.tohoho-web.com/wwwperl2.htm#socket</a>  socket(2,1,0) A<br>
FreeBSD TCP/IP ASolaris UDP/IPA<br>
Tv<br>
<br>
perl5Oq<br>
@use Socket;<br>
@socket(SERVER,PF_INET,SOCK_STREAM,$proto)<br>
Aperl4Ac?<br>
N_{AR[fBOB<br>
<hr>
<span class=name>miyu</span>
<span class=time>1999/07/26() 16:13:25</span><br>
<font color="#CC8000">&gt;FreeBSD TCP/IP ASolaris UDP/IP</font><br>
CPerlCvD<br>
CLT[oASolarisC<br>
T[oBFreeBSDD<br>
T[oBCvOPDCPerlPrDDD<br>
<hr>
<a href="index.htm" tppabs="http://www.tohoho-web.com/lng/199907/index.htm">[]</a>
<a href="99070249.htm" tppabs="http://www.tohoho-web.com/lng/199907/99070249.htm">[O]</a>
<a href="99070251.htm" tppabs="http://www.tohoho-web.com/lng/199907/99070251.htm">[]</a>
</body>
</html>
