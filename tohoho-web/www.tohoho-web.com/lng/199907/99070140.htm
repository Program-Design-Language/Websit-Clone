<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
<title>JavaScriptで現在の日付をリストボックスに設定するには？</title>
<link rel="stylesheet" href="../style.css" tppabs="http://www.tohoho-web.com/lng/style.css">
</head>
<body>
<h3>JavaScriptで現在の日付をリストボックスに設定するには？</h3>
<a href="index.htm" tppabs="http://www.tohoho-web.com/lng/199907/index.htm">[上に]</a>
<a href="99070139.htm" tppabs="http://www.tohoho-web.com/lng/199907/99070139.htm">[前に]</a>
<a href="99070141.htm" tppabs="http://www.tohoho-web.com/lng/199907/99070141.htm">[次に]</a>
<hr>
<span class=name>るみ</span>
<span class=time>1999/07/14(水) 12:30:45</span><br>
過去のラウンジログを参考にさせていただいて、<br>
こういうものをつくりましたが、<br>
<br>
&lt;FORM method=post action="day.cgi" name="form2"&gt;<br>
&lt;SELECT NAME="toyear"&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;OPTION VALUE="1999"&gt;99<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;OPTION VALUE="2000"&gt;00<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;OPTION VALUE="2001"&gt;01<br>
&lt;/SELECT&gt;<br>
年<br>
&lt;SELECT NAME="tomon"&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;OPTION VALUE="1"&gt;１<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;OPTION VALUE="2"&gt;２<br>
（途中省略）<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;OPTION VALUE="11"&gt;11<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;OPTION VALUE="12"&gt;12<br>
&lt;/SELECT&gt;<br>
月<br>
&lt;SELECT NAME="today"&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;OPTION VALUE="1"&gt;１<br>
（途中省略）<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;OPTION VALUE="31"&gt;31<br>
&lt;/SELECT&gt;<br>
日まで<br>
&lt;/FORM&gt;<br>
<br>
&lt;SCRIPT LANGUAGE="JavaScript"&gt;<br>
&lt;!--<br>
&nbsp;&nbsp;&nbsp;&nbsp;dd = new Date();<br>
&nbsp;&nbsp;&nbsp;&nbsp;year = dd.getYear();<br>
&nbsp;&nbsp;&nbsp;&nbsp;year = (year &gt; 100) ? year : year + 1900;<br>
&nbsp;&nbsp;&nbsp;&nbsp;mon = dd.getMonth() + 1;<br>
&nbsp;&nbsp;&nbsp;&nbsp;date = dd.getDate();<br>
&nbsp;&nbsp;&nbsp;&nbsp;document.form2.toyear.selectedIndex = year;<br>
&nbsp;&nbsp;&nbsp;&nbsp;document.form2.tomon.selectedIndex = mon;<br>
&nbsp;&nbsp;&nbsp;&nbsp;document.form2.today.selectedIndex = date;<br>
// --&gt;<br>
&lt;/SCRIPT&gt;<br>
<br>
<br>
月と日はちゃんと表示されるのに、<br>
年だけが表示されません。<br>
どこかおかしい所があったらご指摘ください。<br>
宜しくお願いします。<br>
ちなみに（途中省略）しているのは月と日だけで、<br>
年のソースはこのままです。<br>
OSは WindowsNT Server4.0、<br>
ブラウザはIE4.0、NN3.03、NN4.04で確かめましたが<br>
どれも結果は同じでした。<br>
<hr>
<span class=name>無責任官庁</span>
<span class=time>1999/07/14(水) 12:48:01</span><br>
ちょっとした勘違いのようですね。<br>
selectIndex は、“何番目の要素か”です。<br>
月と日は１から始まってるから問題ないですが、<br>
年は違いますよね？<br>
&lt;OPTION&gt;を１から２０００行ぐらい書いたら意味的には合いますけど、<br>
まあ、これをちょっとの修正で直す場合は・・・<br>
<br>
--これより上のソースは省略--<br>
year = dd.getYear();<br>
year = (year &gt; 100) ? year: year + 1900;<br>
mon = dd.getMonth() + 1;<br>
date = dd.getDate();<br>
year = year - 1998;				//これを追加<br>
document.form2.toyear.selectedIndex = year;<br>
--以下省略--<br>
<br>
ってな具合でしょうか。<br>
<hr>
<span class=name>るみ</span>
<span class=time>1999/07/14(水) 12:50:52</span><br>
<span class=resolv>[[解決]]</span><br>
無責任官庁さん、ばっちり解決しましたよ！<br>
本当にありがとうございました！(^O^)<br>
<hr>
<a href="index.htm" tppabs="http://www.tohoho-web.com/lng/199907/index.htm">[上に]</a>
<a href="99070139.htm" tppabs="http://www.tohoho-web.com/lng/199907/99070139.htm">[前に]</a>
<a href="99070141.htm" tppabs="http://www.tohoho-web.com/lng/199907/99070141.htm">[次に]</a>
</body>
</html>
