<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
<title>数字に「,」をいれるには？</title>
<link rel="stylesheet" href="../style.css" tppabs="http://www.tohoho-web.com/lng/style.css">
</head>
<body>
<h3>数字に「,」をいれるには？</h3>
<a href="index.htm" tppabs="http://www.tohoho-web.com/lng/199804/index.htm">[上に]</a>
<a href="98040030.htm" tppabs="http://www.tohoho-web.com/lng/199804/98040030.htm">[前に]</a>
<a href="98040032.htm" tppabs="http://www.tohoho-web.com/lng/199804/98040032.htm">[次に]</a>
<hr>
<span class=name>駆け出し</span>
<span class=time>1998/04/08(水) 20:29:45</span><br>
Perlで数値計算（足し算など）をしてその結果、<br>
例えば $x=1234;&nbsp;&nbsp;となり、<br>
その $x を表示する際に 1,234 のように3桁目と4桁目に「,」を入れたいんです。<br>
どのようにすればいいのか教えて下さい。<br>
<hr>
<span class=name>miyasiro</span>
<span class=time>1998/04/08(水) 21:37:10</span><br>
なんか懐かしいなぁ〜<br>
それはともかく、$x が整数なら<br>
　1 while $x =~ s/(\d+)(\d\d\d)/$1,$2/;<br>
小数点が付くなら<br>
　1 while $x =~ s/(^|[^.\d])(\d+)(\d\d\d)/$1$2,$3/;<br>
ではいかがでしょう。<br>
ちなみに、$x には、複数の数字があってもいいはずです。<br>
<hr>
<span class=name>駆け出し</span>
<span class=time>1998/04/10(金) 03:31:21</span><br>
<span class=resolv>[[解決]]</span><br>
できました。ありがとうございました。<br>
<br>
ところで、<br>
　1 while $x =~ s/(\d+)(\d\d\d)/$1,$2/;<br>
の”1 while”の部分はどういう意味なんですか？<br>
<hr>
<span class=name>B-Cus</span>
<span class=time>1998/04/10(金) 04:00:38</span><br>
&amp;func while command;<br>
なら、commandが成功し続ける間、&amp;funcを呼び続けます。<br>
<br>
ということは、$x =~ s/(\d+)(\d\d\d)/$1,$2/; が成功<br>
している間は1を実行し続ける、というわけで。<br>
<br>
つまり、「〜が失敗するまで〜を続ける」という定番の<br>
書き方ですね。<br>
<hr>
<span class=name>駆け出し</span>
<span class=time>1998/04/10(金) 23:53:25</span><br>
ありがとうございます。仕組みはわかりました。<br>
この場合 &amp;func の所が 1 になってますけど、<br>
1 にしているのはどういう意味なんですか？<br>
（1を0や2に変えても結果が同じだったんで）<br>
<hr>
<span class=name>B-Cus</span>
<span class=time>1998/04/11(土) 00:15:53</span><br>
「1」は、いわゆるnopと同じで「何もしない」ということと思ってください。<br>
whileを続けるかどうか決めるのは、1の部分じゃなくて<br>
あくまでも s/// の結果です。<br>
<br>
# 「1を評価しているんじゃなくて、1を実行しているわけです」<br>
# と書こうとしたけど、サブルーチンの最後によく書く<br>
# 　1;<br>
# というのは評価しているとも言えるし、1を実行っつーのもわけわからんし…。<br>
# 誰かうまい説明をお願ひ。<br>
<hr>
<span class=name>miyasiro</span>
<span class=time>1998/04/11(土) 02:07:38</span><br>
うまい説明になるかどうかは分かりませんが…(＾＾;<br>
while修飾子の前には式が要求されるんで（というか式の後に文修飾子が書ける）、<br>
害のない簡単な式の代表として 1 を使うんだと思います。<br>
で、1 は評価でいいんじゃないのかなぁ…<br>
1 を評価して 1 という値を得て、これを捨てる…ってことで。<br>
<hr>
<a href="index.htm" tppabs="http://www.tohoho-web.com/lng/199804/index.htm">[上に]</a>
<a href="98040030.htm" tppabs="http://www.tohoho-web.com/lng/199804/98040030.htm">[前に]</a>
<a href="98040032.htm" tppabs="http://www.tohoho-web.com/lng/199804/98040032.htm">[次に]</a>
</body>
</html>
