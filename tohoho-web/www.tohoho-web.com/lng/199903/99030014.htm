<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
<title>ＤＯＳプロンプト上で Perl の /()/ を使うと表示が乱れる</title>
<link rel="stylesheet" href="../style.css" tppabs="http://www.tohoho-web.com/lng/style.css">
</head>
<body>
<h3>ＤＯＳプロンプト上で Perl の /()/ を使うと表示が乱れる</h3>
<a href="index.htm" tppabs="http://www.tohoho-web.com/lng/199903/index.htm">[上に]</a>
<a href="99030013.htm" tppabs="http://www.tohoho-web.com/lng/199903/99030013.htm">[前に]</a>
<a href="99030015.htm" tppabs="http://www.tohoho-web.com/lng/199903/99030015.htm">[次に]</a>
<hr>
<span class=name>匿名希望</span>
<span class=time>1999/03/03(水) 23:03:42</span><br>
標準入力から読み込んだデータの中に特定の文字列（仮に "ABC"）があったら<br>
標準出力に書きだす目的で以下のコードを grep_modoki.pl に用意しました。<br>
<br>
while(&lt;STDIN&gt;)<br>
{<br>
	if($_ =~ /(ABC)/)<br>
	{<br>
		print;<br>
	}<br>
}<br>
<br>
# 単に文字列マッチなら =~ /ABC/ で足りますが、実際に使用するコードは<br>
# $1 などを使用した複雑な物になっています。ここでは現象を再現した<br>
# 最小限のコードを出しています。<br>
<br>
type TEXT.FILE | perl grep_modoki.pl または perl grep_modoki.pl を実行し<br>
データに "ABC" が含まれていない時は問題無いのですが、含まれていると<br>
バイナリファイルを表示（例：type command.com）したかのようにが乱れます。<br>
（良く見るとその中に "Perl EXE", "Error: Runtime exception" という文字がある）<br>
しかも perl grep_modoki.pl で実行した時は "ABC" を含んだ行を入力して Enter を<br>
押した時点で表示が乱れ、更に実行が終了してプロンプトが出てしまうのです。<br>
しかし type TEXT.FILE | perl grep_modoki.pl | more または perl grep_modoki.pl | more<br>
のようにパイプをかませる（またはファイルにリダイレクトする）と表示は乱れません。<br>
<br>
同じような現象を体験された方、対応法を御存知の方はいらっしゃいますか。<br>
こちらの環境は<br>
Win95(4.00.950a) + IE4.0(4.72.3110.8)<br>
Perl for Win32 Build 315 - Built 09:33:08 Dec 31 1997 (version 5.003_07)<br>
です。<br>
<hr>
<span class=name>べる</span>
<span class=time>1999/03/06(土) 00:32:45</span><br>
<span class=resolv>[[解決]]</span><br>
ActivePerl Build 509 (version 5.005_02) と入れ替えたら<br>
希望する動きになりました。<br>
<hr>
<a href="index.htm" tppabs="http://www.tohoho-web.com/lng/199903/index.htm">[上に]</a>
<a href="99030013.htm" tppabs="http://www.tohoho-web.com/lng/199903/99030013.htm">[前に]</a>
<a href="99030015.htm" tppabs="http://www.tohoho-web.com/lng/199903/99030015.htm">[次に]</a>
</body>
</html>
