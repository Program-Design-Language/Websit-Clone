<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
<title>フォームで指定したファイルをダウンロードするには？</title>
<link rel="stylesheet" href="../style.css" tppabs="http://www.tohoho-web.com/lng/style.css">
</head>
<body>
<h3>フォームで指定したファイルをダウンロードするには？</h3>
<a href="index.htm" tppabs="http://www.tohoho-web.com/lng/199903/index.htm">[上に]</a>
<a href="99030040.htm" tppabs="http://www.tohoho-web.com/lng/199903/99030040.htm">[前に]</a>
<a href="99030042.htm" tppabs="http://www.tohoho-web.com/lng/199903/99030042.htm">[次に]</a>
<hr>
<span class=name>石川高志</span>
<span class=email><a href="mailto:metal@trynet.co.jp">[E-Mail]</a></span>
<span class=time>1999/03/08(月) 20:35:31</span><br>
フォーム文でTEXTエリアに入力されたファイル名のファイルを<br>
SUBMITしたときにダウンロードするにはどうすればよいでしょうか？<br>
ブラウザに標準出力は出来るんでですけど…<br>
<hr>
<span class=name>B-Cus</span>
<span class=time>1999/03/10(水) 00:34:16</span><br>
&lt;form method=get action=hoge.cgi&gt;<br>
&lt;input type=text name=filename&gt;<br>
&lt;input type=submit value=ok&gt;<br>
&lt;/form&gt;<br>
<br>
-----hoge.cgi-----<br>
#!/usr/local/bin/perl<br>
($filename) = $ENV{QUERY_STRING} =~ m/filename=(.*)/;<br>
open(IN,"$filename");<br>
print "Content-type: application/octet-stream\n\n";<br>
print &lt;IN&gt;;<br>
<br>
など。<br>
<hr>
<span class=name>とほほ</span>
<span class=time>1999/03/10(水) 01:25:37</span><br>
例えば、Wordのファイルをダウンロードさせる時には、MIMEタイプを<br>
Content-type: application/msword と指定してやれば、ダウンロード<br>
確認ダイアログを表示させることが可能です。<br>
しかし、拡張子の不明な、一般的なダウンロードのさせ方となると、<br>
MIMEタイプに何を指定すべきなのか、ちょっと悩んでしまいます。<br>
<hr>
<span class=name>とほほ</span>
<span class=time>1999/03/10(水) 01:28:53</span><br>
あ、書き込みを中断して、お茶を飲んでいる間に、B-Casさんからの<br>
回答が・・・そっか、application/octet-stream だと大抵の場合に<br>
ダウンロードできますね。でも、ファイル名に勝手に .exe の拡張子<br>
がついてしまうことがあるようです。(NN4.01で確認) うーむ。<br>
<hr>
<span class=name>石川高志</span>
<span class=email><a href="mailto:metal@trynet.co.jp">[E-Mail]</a></span>
<span class=time>1999/06/24(木) 17:32:27</span><br>
<span class=resolv>[[解決]]</span><br>
う〜、、みなさんありがとうございます。(;_;)<br>
みごと解決です。<br>
<br>
このページには、本当に感謝感謝です！<br>
<hr>
<a href="index.htm" tppabs="http://www.tohoho-web.com/lng/199903/index.htm">[上に]</a>
<a href="99030040.htm" tppabs="http://www.tohoho-web.com/lng/199903/99030040.htm">[前に]</a>
<a href="99030042.htm" tppabs="http://www.tohoho-web.com/lng/199903/99030042.htm">[次に]</a>
</body>
</html>
