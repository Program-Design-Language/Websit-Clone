<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
<title>ファイル(LZHなど)をダウンロードさせる方法は？</title>
<link rel="stylesheet" href="../style.css" tppabs="http://www.tohoho-web.com/lng/style.css">
</head>
<body>
<h3>ファイル(LZHなど)をダウンロードさせる方法は？</h3>
<a href="index.htm" tppabs="http://www.tohoho-web.com/lng/199807/index.htm">[上に]</a>
<a href="98070011.htm" tppabs="http://www.tohoho-web.com/lng/199807/98070011.htm">[前に]</a>
<a href="98070013.htm" tppabs="http://www.tohoho-web.com/lng/199807/98070013.htm">[次に]</a>
<hr>
<span class=name>(よ)</span>
<span class=time>1998/07/06(月) 15:25:59</span><br>
ファイル(lzh)をダウンロードさせたいため、A HREFでリンクを張ったのですが、<br>
ファイルの中身がテキストとして表示されてしまいます。<br>
ディレクトリを掘ってそこにファイルを置き、ブラウザでディレクトリのツリー表示をさせてみると、<br>
lzhファイルがtxt扱いになっています。<br>
原因と、解決策があればご教示願います。<br>
なお、サーバーはリムネット(sm)です。<br>
<hr>
<span class=name>匿名希望</span>
<span class=time>1998/07/06(月) 16:17:21</span><br>
もし「.htaccess」ファイルをあなたが置くことが認められている<br>
のなら、（そしてリムのサーバーは皆NCSA系なら）<br>
<br>
AddType&nbsp;&nbsp;&nbsp;application/x-lha-compressed&nbsp;&nbsp;&nbsp;.lzh<br>
<br>
の一行を含む.htaccessファイルをlzhファイルがあるディレクトリ<br>
（かその親ディレクトリ）に置いてみて。これは拡張子lzhのファイ<br>
ルを「テキストファイルではない、これこれのファイルとして扱え」<br>
という指示。（なお、lzhの「これこれ」は所定のものがない。<br>
まぁ上のものでいいだろう。これはring.asahinet.or.jpの設定だ。）<br>
<br>
リムネットでlzhの設定がなされていないとは驚きだ。それはともか<br>
く、ブラウザーはサーバーから送られてくるファイルがどのような<br>
ファイルであるか（一番大事なのは、画面に表示すべきものかファ<br>
イルとして保存すべきものか、の違い）をブラウザー自身が（拡張<br>
子などから）判断するのでは必ずしもない。最近のIEはある程度自<br>
分でも判断するようだが、基本は、サーバーが教えてくれる「種別」<br>
をそのまま受け入れる。ところで、lzhファイルは海外では必ずし<br>
も広まっていないので、米国製のサーバーが多い世の中、lzhファ<br>
イルを未知のファイルと見なす設定になっているところが過去に少<br>
なくなかった。そして、未知のファイルはテキストファイルとして<br>
扱われる設定になっていることが多い。よって、今回は、サーバー<br>
が誤って「lzhはテキストファイルだよ」とブラウザーに教えたの<br>
で、ブラウザーは素直にそれを「表示」してしまったというわけだ。<br>
<br>
なお、一旦不本意にでも画面に表示されてしまうと、ブラウザーや<br>
proxy serverのキャッシュに「aaa.lzhファイルはテクストファイ<br>
ルである」という誤った情報が記録されるため、上記のように<br>
AddType宣言をその後で行っても事態は改善しないことが多い。<br>
その場合は、ファイル名を変えるか、ブラウザー/proxyのキャッ<br>
シュを消すしかない。<br>
<hr>
<span class=name>(よ)</span>
<span class=time>1998/07/06(月) 16:39:10</span><br>
<span class=resolv>[[解決]]</span><br>
ご回答、ありがとうございます。<br>
<br>
.htaccessを修正したところ、正常に動作させることができました。<br>
とういことは、他にもファイルとしてバイナリーダウンロードさせたい場合には、<br>
それぞれ AddType 宣言を追加するか、lzhやzipなどのファイルにしてから置くかする必要があるんですね。<br>
#今のところ、そういう必要性はありませんが<br>
<br>
非常にわかりやすい回答でよく理解することができました。<br>
ありがとうございました。<br>
<hr>
<a href="index.htm" tppabs="http://www.tohoho-web.com/lng/199807/index.htm">[上に]</a>
<a href="98070011.htm" tppabs="http://www.tohoho-web.com/lng/199807/98070011.htm">[前に]</a>
<a href="98070013.htm" tppabs="http://www.tohoho-web.com/lng/199807/98070013.htm">[次に]</a>
</body>
</html>
