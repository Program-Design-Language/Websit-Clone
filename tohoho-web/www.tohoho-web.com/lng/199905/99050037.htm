<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
<title>題名２０個に記事番号付けるには？</title>
<link rel="stylesheet" href="../style.css" tppabs="http://www.tohoho-web.com/lng/style.css">
</head>
<body>
<h3>題名２０個に記事番号付けるには？</h3>
<a href="index.htm" tppabs="http://www.tohoho-web.com/lng/199905/index.htm">[上に]</a>
<a href="99050036.htm" tppabs="http://www.tohoho-web.com/lng/199905/99050036.htm">[前に]</a>
<a href="99050038.htm" tppabs="http://www.tohoho-web.com/lng/199905/99050038.htm">[次に]</a>
<hr>
<span class=name>矢部くん</span>
<span class=time>1999/05/11(火) 19:00:35</span><br>
すいません。済マーク押しちゃったのでもう一度発言させてください。<br>
「題名を抜き出すには？」の続きです。<br>
ログから題名だけを取り出すために<br>
#!/usr/bin/perl<br>
<br>
$subjectfile = './bbs.dat';<br>
open(DATA,$subjectfile);<br>
while (&lt;DATA&gt;){<br>
chop;<br>
($date,$fname,$email,$value,$subject,$res,$cnt) = split(/,/);<br>
print "$subject\n";<br>
if ($subject ne "") {<br>
last if ++$i&gt;=20;}<br>
}<br>
close(DATA);<br>
というふうに教えていただいて書いたのですが、<br>
題名が並んで表示されてやや見づらいので、<br>
抜き出した題名に１〜２０までの記事番号を付けたいと思いました。<br>
そこで<br>
print "$subject\n";を変更して<br>
print "$i $subject\n";<br>
としたのですが、<br>
これだと、ログの中の題名のない行も記事番号を表示してしまい、<br>
「１１１こんにちは！２２ようこそ！３３３３３３おはよう！」<br>
っていう感じになっちゃいます。<br>
レス式の掲示板のためにログに題名のない行があって困っています。<br>
よろしくお願いします。<br>
<hr>
<span class=name>ふじ</span>
<span class=time>1999/05/11(火) 19:12:04</span><br>
if ($subject ne "") {<br>
&nbsp;&nbsp;print "$i $subject\n";<br>
&nbsp;&nbsp;last if ++$i&gt;=20;}<br>
}<br>
てなかんじで。$subject が空でない時だけ printすれば良いのでは。<br>
<hr>
<span class=name>矢部くん</span>
<span class=time>1999/05/11(火) 19:55:55</span><br>
<span class=resolv>[[解決]]</span><br>
お返事ありがとうございます！<br>
うまく動作しました。<br>
<hr>
<a href="index.htm" tppabs="http://www.tohoho-web.com/lng/199905/index.htm">[上に]</a>
<a href="99050036.htm" tppabs="http://www.tohoho-web.com/lng/199905/99050036.htm">[前に]</a>
<a href="99050038.htm" tppabs="http://www.tohoho-web.com/lng/199905/99050038.htm">[次に]</a>
</body>
</html>
