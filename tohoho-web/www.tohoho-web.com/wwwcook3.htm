<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Cookie(JavaScript版)のソースコード - とほほのWWW入門</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
</head>
<body>
<h2>Cookie(JavaScript版)のソースコード</h2>
<pre>

&lt;html&gt;
&lt;head&gt;
&lt;title&gt;テスト&lt;/title&gt;
&lt;script&gt;
times = getCookie("Times");
if (times == "") {
    times = 1;
}
date = getCookie("Date");
if (date == "") {
    date = "????";
}
document.write("これまでの訪問回数：" + times + "&lt;br&gt;");
document.write("前回の訪問日：" + date + "&lt;br&gt;");

times++;

dd = new Date();
ye = dd.getYear();      if (ye &lt; 1900) ye += 1900;
mo = dd.getMonth() + 1; if (mo &lt; 10) mo = "0" + mo;
da = dd.getDate();      if (da &lt; 10) da = "0" + da;
ho = dd.getHours();     if (ho &lt; 10) ho = "0" + ho;
mi = dd.getMinutes();   if (mi &lt; 10) mi = "0" + mi;
se = dd.getSeconds();   if (se &lt; 10) se = "0" + se;
date = ye + "/" + mo + "/" + da + " " + ho + ":" + mi + ":" + se;

setCookie("Times", times);
setCookie("Date", date);

// clearCookie("Times");
// clearCookie("Date");

function getCookie(key,  tmp1, tmp2, xx1, xx2, xx3) {
    tmp1 = " " + document.cookie + ";";
    xx1 = xx2 = 0;
    len = tmp1.length;
    while (xx1 &lt; len) {
        xx2 = tmp1.indexOf(";", xx1);
        tmp2 = tmp1.substring(xx1 + 1, xx2);
        xx3 = tmp2.indexOf("=");
        if (tmp2.substring(0, xx3) == key) {
            return(unescape(tmp2.substring(xx3 + 1, xx2 - xx1 - 1)));
        }
        xx1 = xx2 + 1;
    }
    return("");
}
function setCookie(key, val, tmp) {
    tmp = key + "=" + escape(val) + "; ";
    // tmp += "path=" + location.pathname + "; ";
    tmp += "expires=Tue, 31-Dec-2030 23:59:59; ";
    document.cookie = tmp;
}
function clearCookie(key) {
    document.cookie = key + "=" + "xx; expires=Tue, 1-Jan-1980 00:00:00;";
}
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
</body>
</html>
