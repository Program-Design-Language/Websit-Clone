<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8"utf-8">
<title>MySQL/MariaDB - ã¨ã»ã»ã®WWWå…¥é–€</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<link rel="stylesheet" href="../style3.css" tppabs="http://www.tohoho-web.com/style3.css">
</head>
<body>
<h2>MySQL/MariaDB</h2>
<a href="../www.htm" tppabs="http://www.tohoho-web.com/www.htm">ãƒˆãƒƒãƒ—</a> &gt;
MySQL/MariaDB

<h4>MySQL ã¨ã¯</h4>
<div class="i">
<ul>
<li>ã‚¹ã‚¦ã‚§ãƒ¼ãƒ‡ãƒ³ã® MySQL ABç¤¾ã«ã‚ˆã£ã¦é–‹ç™ºãƒ»å…¬é–‹ã•ã‚Œã¦ã„ãŸãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€‚
<li>å•†ç”¨ãƒ»æœ‰æ–™ã® Oracle ã«å¯¾ã™ã‚‹ã€ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ç³» RDB ã¨ã—ã¦ã€PostgreSQL ã¨ã‚·ã‚§ã‚¢ã‚’äºŒåˆ†ã—ã¦ã„ã‚‹ã€‚
<li>GPL ã¨å•†ç”¨ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ãƒ‡ãƒ¥ã‚¢ãƒ«ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã§æä¾›ã•ã‚Œã¦ã„ã‚‹ã€‚
<li>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚‚åŸºæœ¬çš„ã«ã¯ GPL ã®ãŸã‚ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’åˆ©ç”¨ã™ã‚‹ã‚½ãƒ•ãƒˆã‚’é…å¸ƒã™ã‚‹å ´åˆã¯ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®å…¬é–‹ãŒå¿…è¦ã€‚
<li>ãŸã ã—ã€ã‚½ãƒ•ãƒˆãŒ Apache 2.0ã€BSDãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã€MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã€PHPãƒ©ã‚¤ã‚»ãƒ³ã‚¹ãªã©ã€FOSS ã¨å‘¼ã°ã‚Œã‚‹ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¨ã—ã¦é…å¸ƒã•ã‚Œã‚‹å ´åˆã¯ã€GPL ã®å‘ªç¸›ãŒã¯ãšã‚Œã€ãã‚Œãã‚Œã®ã‚½ãƒ•ãƒˆã®ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¨ã—ã¦é…å¸ƒãŒå¯èƒ½ã€‚ä¾‹ãˆã°ã€PHP ã‹ã‚‰ MySQL ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’åˆ©ç”¨ã™ã‚‹éš›ã¯ã€PHP ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¨ã—ã¦åˆ©ç”¨å¯èƒ½ã€‚<br>â†’ <a href="javascript:if(confirm('http://www-jp.mysql.com/about/legal/licensing/foss-exception/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www-jp.mysql.com/about/legal/licensing/foss-exception/'" tppabs="http://www-jp.mysql.com/about/legal/licensing/foss-exception/">http://www-jp.mysql.com/about/legal/licensing/foss-exception/</a>
<li>2008å¹´ã« MySQL ABç¤¾ãŒ Sun Microsystemsç¤¾ã«è²·åã•ã‚Œã€2010å¹´ã« Sun Microsystemsç¤¾ãŒ Oracleç¤¾ã«è²·åã•ã‚ŒãŸã“ã¨ã‹ã‚‰ã€ç¾åœ¨ã§ã¯ Oracleç¤¾ãŒé–‹ç™ºãƒ»å…¬é–‹ã‚’ç¶™ç¶šã—ã¦ãŠã‚Šã€ã“ã®ãƒ©ã‚¤ã‚»ãƒ³ã‚¹å½¢æ…‹ãŒç¶™ç¶šã™ã‚‹ã‹ã¯ä¸æ˜ã€‚
</ul>
</div>
<h4>MariaDB ã¨ã¯</h4>
<div class="i">
<ul>
<li>MySQL ã®ã€Œå¦¹åˆ†ã€çš„ãªãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€‚
<li>MySQL ãŒ Oracle ç¤¾ã®å‚˜ä¸‹ã«å…¥ã£ãŸã“ã¨ã‚‚ã‚ã‚Šã€MySQL AB ç¤¾ã®å‰µè¨­è€… Michael "Montry" Widenius æ°ãŒã€MySQL ã‹ã‚‰åˆ†é›¢ã—ã€MySQL äº’æ›ã® RDB ã¨ã—ã¦å…¬é–‹ã—ãŸã‚‚ã®ã€‚
<li>Red Hat Enterprise Linux 7ã€CentOS 7ã€Fedora 19 ãªã©ã¯ã™ã§ã«æ¨™æº–ã® RDB ã‚’ MySQL ã‹ã‚‰ MariaDB ã«å¤‰æ›´ã—ã¦ã„ã‚‹ã€‚
<li>MySQL 5.1 ã¨ MariaDB 5.1 ã‚„ã€MySQL 5.5 ã¨ MariaDB 5.5 ã¯ã»ã¼äº’æ›æ€§ã‚ã‚Šã€‚
<li>MySQL 5.6 ã¨ MariaDB ã¯å¾ã€…ã«ç‹¬è‡ªã®å¼·åŒ–ã‚’è¡Œã†ã‚ˆã†ã«ãªã‚Šã€MariaDB 5.6 ã§ã¯ãªãã€MariaDB 10.0 ã¨ã—ã¦å…¬é–‹ã•ã‚ŒãŸã€‚
<li>ã‚µãƒ¼ãƒãƒ¼ã®ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¯ GPL ã®ã¾ã¾ã ãŒã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¯ LGPL ã«å¤‰æ›´ã•ã‚ŒãŸã€‚(ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦åˆ©ç”¨ã™ã‚‹ã®ã§ã‚ã‚Œã°ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰å…¬é–‹ã¯ä¸è¦)
<li>MariaDB ã¨ã„ã†åå‰ã¯ã€Wideniusæ°ã®æ¬¡å¥³ã®åå‰ã‹ã‚‰å‘½åã•ã‚ŒãŸã€‚å®Ÿã¯ã€MySQL ã® My ã‚‚åŒæ°ã®é•·å¥³ã®åå‰ã‹ã‚‰å‘½åã•ã‚Œã¦ã„ã‚‹ã€‚
</ul>
</div>

<h4>MySQL/MariaDBã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»èµ·å‹•ã™ã‚‹</h4>
<div class="i">
<pre class="dos">
<span class="cm">CentOS 6 (MySQL 5.1)</span>
# yum install -y mysql mysql-server
# chkconfig mysqld on
# service mysqld start

<span class="cm">CentOS 7 (MariaDB 5.5)</span>
# yum install -y mariadb mariadb-server
# systemctl enable mariadb
# systemctl start mariadb

<span class="cm">CentOS 8 (MariaDB 10.3)</span>
# dnf install -y mariadb mariadb-server
# systemctl enable mariadb
# systemctl start mariadb

<span class="cm">CentOS 8 (MariaDB 10.4)</span>
# curl -O https://downloads.mariadb.com/MariaDB/mariadb-10.4.8/yum/centos/mariadb-10.4.8-rhel-8-x86_64-rpms.tar
# tar xvf mariadb-10.4.8-rhel-8-x86_64-rpms.tar
# cd mariadb-10.4.8-rhel-8-x86_64-rpms
# dnf localinstall -y \
 galera-4-26.4.2-1.rhel8.0.el8.x86_64.rpm \ 
 MariaDB-client-10.4.8-1.el8.x86_64.rpm \
 MariaDB-common-10.4.8-1.el8.x86_64.rpm \
 MariaDB-server-10.4.8-1.el8.x86_64.rpm \
 MariaDB-shared-10.4.8-1.el8.x86_64.rpm

<span class="cm">Ubuntu 14.04 (MariaDB 5.5)</span>
# sudo apt-get install -y mariadb-server
# sudo service mysql start

<span class="cm">Ubuntu 16.04 (MariaDB 10.0)</span>
# sudo apt-get install -y mariadb-server
# sudo service mysql start

<span class="cm">Ubuntu 18.04 (MariaDB 10.1)</span>
# sudo apt-get install -y mariadb-server
# sudo service mysql start

<span class="cm">Ubuntu 18.04 (MariaDB 10.4)</span>
# curl -sS https://downloads.mariadb.com/MariaDB/mariadb_repo_setup | sudo bash
# sudo apt-get install -y mariadb-server-10.4
</pre>
</div>

<h4>ã‚³ãƒ³ãƒ•ã‚£ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¤‰æ›´ã™ã‚‹</h4>
<div class="i">
<pre class="dos">
<span class="cm">CentOS 6/7/8</span>
# vi /etc/my.cnf

<span class="cm">Ubuntu 14.04 LTS</span>
# sudo vi /etc/mysql/my.cnf
</pre>
</div>

<h4>æœ€ä½é™ã‚„ã£ã¦ãŠããŸã„è¨­å®š</h4>
<div class="i">
<p>my.cnf ã«ä¸‹è¨˜ã‚’è¿½è¨˜ã—ã¾ã™ã€‚</p>
<pre class="dos">
[mysqld]
<span class="cm"># æ–‡å­—ã‚³ãƒ¼ãƒ‰ã‚’ utf8mb4 ã«ã™ã‚‹</span>
<em>character-set-server=utf8mb4</em>

<span class="cm"># ãƒã‚¤ãƒŠãƒªãƒ­ã‚°ã‚’å–å¾—ã™ã‚‹</span>
<em>log-bin=mysql-bin</em>
<em>max_binlog_size=256M</em>
<em>expire_logs_days=7</em>

<span class="cm"># ã‚¹ãƒ­ãƒ¼ã‚¯ã‚¨ãƒªãƒ­ã‚°ã‚’å–å¾—ã™ã‚‹</span>
<em>slow_query_log=1</em>

[client]
<span class="cm"># æ–‡å­—ã‚³ãƒ¼ãƒ‰ã‚’ utf8mb4 ã«ã™ã‚‹</span>
<em>default-character-set=utf8mb4</em>
</pre>
</div>

<h4>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é–¢é€£ã®åˆæœŸè¨­å®šã‚’è¡Œã†</h4>
<div class="i">
<pre class="dos">
# mysql_secure_installation
Enter current password for root (enter for none):
Set root password? [Y/n] <em>Y</em>
New password: <em>********</em>
Re-enter new password: <em>********</em>
Remove anonymous users? [Y/n] <em>Y</em>
Disallow root login remotely? [Y/n] <em>Y</em>
Remove test database and access to it? [Y/n] <em>Y</em>
Reload privilege tables now? [Y/n] <em>Y</em>
</pre>
</div>

<h4>ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¢ãƒ¼ãƒ‰ã§æ¥ç¶šã™ã‚‹</h4>
<div class="i">
<pre class="dos">
# mysql -h localhost -u root -p
Enter password:
mysql&gt; quit
</pre>
</div>

<h4>ãƒ¦ãƒ¼ã‚¶</h4>
<div class="i">
<pre class="dos">
<span class="cm">ãƒ¦ãƒ¼ã‚¶ã‚’ä½œæˆã™ã‚‹</span>
mysql&gt; create user ãƒ¦ãƒ¼ã‚¶å identified by 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰';

<span class="cm">ãƒ¦ãƒ¼ã‚¶ã«æ¨©é™ã‚’ä»˜ä¸ã™ã‚‹</span>
mysql&gt; grant all on ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å.ãƒ†ãƒ¼ãƒ–ãƒ«å to ãƒ¦ãƒ¼ã‚¶å;
</pre>
</div>

<h4>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹</h4>
<div class="i">
<pre class="dos">
<span class="cm">ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆã™ã‚‹</span>
mysql&gt; create database ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å;

<span class="cm">ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’åˆ©ç”¨ã™ã‚‹</span>
mysql&gt; use ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å;

<span class="cm">ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ä¸€è¦§ã‚’è¡¨ç¤ºã™ã‚‹</span>
mysql&gt; show databases;

<span class="cm">ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’å‰Šé™¤ã™ã‚‹</span>
mysql&gt; drop database ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å;
</pre>
</div>

<h4>ãƒ†ãƒ¼ãƒ–ãƒ«</h4>
<div class="i">
<pre class="dos">
<span class="cm">ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã™ã‚‹</span>
mysql&gt; create table ãƒ†ãƒ¼ãƒ–ãƒ«å ( ã‚«ãƒ©ãƒ 1 å‹1, ã‚«ãƒ©ãƒ 2 å‹2, ...);

<span class="cm">ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä¸€è¦§ã‚’è¡¨ç¤ºã™ã‚‹</span>
mysql&gt; show tables;

<span class="cm">ãƒ†ãƒ¼ãƒ–ãƒ«ã®è©³ç´°ã‚’è¡¨ç¤ºã™ã‚‹</span>
mysql&gt; desc ãƒ†ãƒ¼ãƒ–ãƒ«å;

<span class="cm">ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å‰Šé™¤ã™ã‚‹</span>
mysql&gt; drop table ãƒ†ãƒ¼ãƒ–ãƒ«å;
</pre>
</div>

<h4>ãƒ¬ã‚³ãƒ¼ãƒ‰</h4>
<div class="i">
<pre class="dos">
<span class="cm">ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’æŒ¿å…¥ã™ã‚‹</span>
mysql&gt; insert into ãƒ†ãƒ¼ãƒ–ãƒ«å ( ã‚«ãƒ©ãƒ 1, ã‚«ãƒ©ãƒ 2 ) values ( å€¤1, å€¤2 );

<span class="cm">ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤ºã™ã‚‹</span>
mysql&gt; select ã‚«ãƒ©ãƒ 1, ã‚«ãƒ©ãƒ 2 from ãƒ†ãƒ¼ãƒ–ãƒ«å;

<span class="cm">æ¡ä»¶ã‚’æŒ‡å®šã—ã¦ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤ºã™ã‚‹</span>
mysql&gt; select ã‚«ãƒ©ãƒ 1, ã‚«ãƒ©ãƒ 2 from ãƒ†ãƒ¼ãƒ–ãƒ«å where ã‚«ãƒ©ãƒ 1 = å€¤1;

<span class="cm">ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’æ›´æ–°ã™ã‚‹</span>
mysql&gt; update ãƒ†ãƒ¼ãƒ–ãƒ«å set ã‚«ãƒ©ãƒ 2 = å€¤2 where ã‚«ãƒ©ãƒ 1 = å€¤1;

<span class="cm">ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’å‰Šé™¤ã™ã‚‹</span>
mysql&gt; delete from ãƒ†ãƒ¼ãƒ–ãƒ«å where ã‚«ãƒ©ãƒ 1 = å€¤1;
</pre>
</div>

<h4>ãã®ä»–</h4>
<div class="i">
<ul>
<li><a href="mysql-mysqldump.html" tppabs="http://www.tohoho-web.com/ex/mysql-mysqldump.html">mysqldumpã§ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»ãƒªã‚¹ãƒˆã‚¢ã™ã‚‹</a>
<li><a href="mysql-mariabackup.html" tppabs="http://www.tohoho-web.com/ex/mysql-mariabackup.html">mariabackupã§ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»ãƒªã‚¹ãƒˆã‚¢ã™ã‚‹</a>
<li><a href="mysql-replication.html" tppabs="http://www.tohoho-web.com/ex/mysql-replication.html">MySQL/MariaDBãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³</a>
</ul>
</div>

<hr>
<div>Copyright (C) 2016-2019 æœç”«ã€…</div>
<div>åˆç‰ˆ:2016å¹´6æœˆ26æ—¥ æœ€çµ‚æ›´æ–°:2019å¹´12æœˆ8æ—¥</div>
<div>http://www.tohoho-web.com/ex/mysql.html</div>
</body>
</html>
