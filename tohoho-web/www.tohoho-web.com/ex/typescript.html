<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>TypeScript入門 - とほほのWWW入門</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<link rel="stylesheet" href="../style3.css" tppabs="http://www.tohoho-web.com/style3.css">
</head>
<body>
<h2>TypeScript入門</h2>
<a href="../www.htm" tppabs="http://www.tohoho-web.com/www.htm">トップ</a> &gt;
TypeScript入門

<h4 id="about">TypeScriptとは</h4>
<div class="i">
<ul>
<li>Microsoft が開発した言語で、JavaScript に型定義などの機能を追加したものです。
<li>JavaScript 言語の完全なスーパーセットになっています。
<li>型の異なる関数呼び出しや代入をコンパイル時に検出することによりプログラムの品質を高めることができます。
<li>また、ECMAScript の最新機能を早めに取り入れるため、まだ、ブラウザが未対応の機能を早い時期から使用することが可能となります。
<li>プログラムの拡張子には通常 .ts をつけます。
<li>TypeScriptファイル(*.ts) を JavaScript ファイル(*.js)にコンパイル(トランスコンパイル・トランスパイル)します。
<li><a href="react.html" tppabs="http://www.tohoho-web.com/ex/react.html">React</a> や <a href="angular.html" tppabs="http://www.tohoho-web.com/ex/angular.html">Angular</a> などでも TypeScript がよく利用されています。
</ul>
</div>

<h4 id="install">インストール</h4>
<div class="i">
<p><a href="npm.html" tppabs="http://www.tohoho-web.com/ex/npm.html">npm</a> を用いてインストールします。</p>
<div class="title-tab">Shell</div>
<pre class="c2">
$ mkdir sample
$ cd sample
$ npm init
$ npm install typescript
$ echo export PATH=\$PATH:`pwd`/node_modules/.bin >> ~/.bashrc
$ source ~/.bashrc
$ tsc --version
</pre>
</div>

<h4 id="compile">コンパイル</h4>
<div class="i">
<p>まず、sample.ts ファイルを作成します。</p>
<div class="title-tab">sample.ts</div>
<pre class="c2">
function hello(name: string): void {
    console.log("Hello " + name + "!");
}
let your_name: string = "Yamada";
hello(your_name);
</pre>
<p>tsc (TypeScript Compiler)コマンドを使用して TypeScript ファイルを JavaScript ファイルにコンパイルします。</p>
<div class="title-tab">sample.ts</div>
<pre class="c2">
$ tsc sample.ts
</pre>
<p>コンパイルされた sample.js を node で実行します。</p>
<div class="title-tab">sample.ts</div>
<pre class="c2">
$ node sample.js
Hello Yamada!
</pre>
</div>

<h4 id="type-annotatios">型アノテーション</h4>
<div class="i">
<p>TypeScript では、変数、定数、関数、引数などの後ろに 「: 型名」を指定することで型を宣言することができます。型に合致しない代入や参照が行われるとコンパイル時にエラーとなります。</p>
<div class="title-tab">TypeScript</div>
<pre class="c2">
function hello(name<em>: string</em>)<em>: void</em> {
    console.log("Hello " + name + "!");
}
let your_name<em>: string</em> = "Yamada";
hello(your_name);
</pre>
</div>

<h4 id="types">指定できる型</h4>
<div class="i">
<p>下記などのプリミティブ型を指定することができます。</p>
<div class="title-tab">TypeScript</div>
<pre class="c2">
let v_bool<em>: boolean</em> = true;
let v_num<em>: number</em> = 123;
let v_str<em>: string</em> = "ABCDEFG";
let v_null<em>: null</em> = null;
let v_undef<em>: undefined</em> = undefined;
</pre>
<p>リストやタプルは下記の様に指定します。</p>
<div class="title-tab">TypeScript</div>
<pre class="c2">
let v_arr1<em>: string[]</em> = ["Red", "Green", "Blue"];
let v_arr2<em>: Array&lt;string&gt;</em> = ["Red", "Green", "Blue"];
let v_tuple<em>: [string, number]</em> = ["Yamada", 26];
</pre>
<p>オブジェクトは <b>object</b> で表します。</p>
<div class="title-tab">TypeScript</div>
<pre class="c2">
let v_obj<em>: object</em> = {"name": "Yamada", "age": 26};
</pre>
<p>Enum型は型名を指定します。</p>
<div class="title-tab">TypeScript</div>
<pre class="c2">
enum Color {Red, Green, Blue};
let v_enm<em>: Color</em> = Color.Green;
</pre>
<p>クラスはクラス名を指定します。</p>
<div class="title-tab">TypeScript</div>
<pre class="c2">
class MyClass { name: string; }
var val_class<em>: MyClass</em> = new MyClass();
</pre>
<p>任意の型を許容する場合は <b>any</b> を指定します。</p>
<div class="title-tab">TypeScript</div>
<pre class="c2">
let v_any<em>: any</em> = 4;
</pre>
<p>string または number の型を示す場合は <b>|</b> を使用します。</p>
<div class="title-tab">TypeScript</div>
<pre class="c2">
function func(arg: <em>string | number</em>) { ... }
</pre>
<p><b>null</b> と <b>undefined</b> はすべての型の変数に代入することができます。ただし、--strictNullChecks オプション付きでコンパイルする際は厳密なチェックが行われ、これらは許容されなくなります。</p>
<div class="title-tab">TypeScript</div>
<pre class="c2">
let v_num: number = <em>null</em>
let v_str: string = <em>undefined</em>
</pre>
<p><b>void</b> は値を返却しないことを意味します。</p>
<div class="title-tab">TypeScript</div>
<pre class="c2">
function log(msg: string)<em>: void</em> {
    console.log(msg);
}
</pre>
<p><b>never</b> は return さえも行われないことを意味します。</p>
<div class="title-tab">TypeScript</div>
<pre class="c2">
function error(msg: string)<em>: never</em> {
    throw new Error(msg);
}
</pre>
</div>

<h4 id="type-assertion">型アサーション</h4>
<div class="i">
<p>型アサーションを使用することで、型が不明な値に型付けを行うことができます。値の前に <b>&lt;型名&gt;</b> を記述する方法と、値の後ろに <b>as 型名</b> を記述する方法がありますが、前者は、React で使用される JSX の場合にタグとの区別がつかないことから後者の書き方が推奨されています。 </p>
<div class="title-tab">TypeScript</div>
<pre class="c2">
interface Person {
    name: string;
    age: number;
}
let foo = <em>&lt;Person&gt;</em>{}
foo.name = "Yamada";    <span class="cm">// 型アサーションが無いとエラーになる</span>
let bar = {}<em> as Person</em>
bar.name = "Yamada";    <span class="cm">// 型アサーションが無いとエラーになる</span>
</pre>
</div>

<h4 id="type-alias">型エイリアス</h4>
<div class="i">
<p><b>type</b> で型の別名を定義することができます。</p>
<div class="title-tab">TypeScript</div>
<pre class="c2">
<em>type</em> bool = boolean;
let flag: bool = true;
</pre>
</div>

<h4 id="links">リンク</h4>
<div class="i">
<ul>
<li><a target="_top" href="javascript:if(confirm('https://www.typescriptlang.org/docs/home.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://www.typescriptlang.org/docs/home.html'" tppabs="https://www.typescriptlang.org/docs/home.html">https://www.typescriptlang.org/docs/home.html</a>
</ul>
</div>

<hr>
<div>Copyright (C) 2020 杜甫々</div>
<div>初版：2020年5月2日、最終更新：2020年5月2日</div>
<div>http://www.tohoho-web.com/ex/typescript.html</div>
</body>
</html>
