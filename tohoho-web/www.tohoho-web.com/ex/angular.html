<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8"utf-8">
<title>Angularå…¥é–€ - ã¨ã»ã»ã®WWWå…¥é–€</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<link rel="stylesheet" href="../style3.css" tppabs="http://www.tohoho-web.com/style3.css">
<style>
.app { width: 600px; border: 1px solid gray; }
.app table { border-collapse: collapse; width: 90%; margin-top: 2px; }
.app table th { border: 1px solid #ccc; background-color: #ccc; text-align: left; }
.app table td { border: 1px solid #ccc; }
.app .link { text-decoration: underline; }
.app .link:hover { cursor: pointer; }
.app .icon { color: #f00; }
.app .header { padding: 2px; background-color: #000; color: #fff; }
.app .menu { padding: 2px; background-color: #ccc; }
.app .main { padding: 2px; background-color: #fff; border: 1px solid #ddd; height: 200px }
.app .main .h1 { font-size: 120%; font-weight: bold; }
.app .main button { width: 80px; }
.app #main-dashboard { display: block; }
.app #main-user-list { display: none; }
.app #main-user-edit { display: none; }
.app #confirm-dialog { display: none; border: 1px solid gray; position: relative; top: -50px; left: 100px; background-color: #fff; width:200px; padding: 10px; }
</style>
</head>
<body>

<h2>Angularå…¥é–€</h2>
<a href="../www.htm" tppabs="http://www.tohoho-web.com/www.htm">ãƒˆãƒƒãƒ—</a> &gt;
Angularå…¥é–€

<h4>ç›®æ¬¡</h4>
<div class=i>
<ul>
<li><a href="#whatis">Angular ã¨ã¯</a></li>
<li><a href="#tutrial-image">ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã®ã‚¤ãƒ¡ãƒ¼ã‚¸</a></li>
<li><a href="#install">ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</a></li>
<li><a href="#new-application">ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã™ã‚‹</a></li>
<li><a href="#start-server">ã‚µãƒ¼ãƒã‚’èµ·å‹•ã™ã‚‹</a></li>
<li><a href="#edit-html-css">HTMLã‚„CSSã‚’ç·¨é›†ã™ã‚‹</a></li>
<li><a href="#add-component">ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’è¿½åŠ ã™ã‚‹</a></li>
<li><a href="#display-variables">å¤‰æ•°ã®å€¤ã‚’è¡¨ç¤ºã™ã‚‹</a></li>
<li><a href="#routing">ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¿½åŠ ã™ã‚‹</a></li>
<li><a href="#display-list">ãƒªã‚¹ãƒˆã‚’è¡¨ç¤ºã™ã‚‹</a></li>
<li><a href="#create-service">ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½œæˆã™ã‚‹</a></li>
<li><a href="#forms">ãƒ•ã‚©ãƒ¼ãƒ ã‚’ä½œæˆã™ã‚‹</a></li>
<li><a href="#mat-dialog">ãƒ¢ãƒ¼ãƒ€ãƒ«ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’è¡¨ç¤ºã™ã‚‹</a></li>
<li><a href="#rest-api">ç°¡å˜ãª REST-API ã‚µãƒ¼ãƒã‚’ä½œã‚‹</a></li>
<li><a href="#rxjs">RxJS ã§éåŒæœŸé€šä¿¡ã‚’è¡Œã†</a></li>
</ul>
</div>

<h4 id="whatis">Angular ã¨ã¯</h4>
<div class=i>
<ul>
<li>ã€Œã‚¢ãƒ³ã‚®ãƒ¥ãƒ©ãƒ¼ã€ã¨èª­ã¿ã¾ã™ã€‚
<li>Google ã‚’ä¸­å¿ƒã¨ã—ãŸã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã§é–‹ç™ºãƒ»å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚
<li>ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¯åŸºæœ¬çš„ã«ã¯ MIT ãƒ©ã‚¤ã‚»ãƒ³ã‚¹/å•†ç”¨åˆ©ç”¨å¯èƒ½ã§ã™ã€‚
<li>SPA (Single Page Application) ã‚’å®Ÿç¾ã™ã‚‹ JavaScript ç³»ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ä¸€ã¤ã§ã™ã€‚
<li>MVC (Model View Controller) ã‚„ MVVM (Model-View-ViewModel) ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ¼ã‚’å®Ÿç¾ã—ã¾ã™ã€‚
<li>MEAN (MongoDB, Express, Angular, Node.js) ã‚¹ã‚¿ãƒƒã‚¯ã®ä¸€è§’ã‚’æ‹…ã„ã¾ã™ã€‚
<li>2012å¹´ã«å…¬é–‹ã•ã‚ŒãŸ AngularJS 1.x ã‚’ AngularJS ã¾ãŸã¯ Angular 1 ã¨å‘¼ã³ã¾ã™ã€‚
<li>2016å¹´ã«å…¬é–‹ã•ã‚ŒãŸ Angular 2.x ã‚’ Angular 2 ã¨å‘¼ã³ã¾ã™ã€‚Angular 1 ã¨ã¯ã¾ã£ãŸãäº’æ›æ€§ã®ç„¡ã„ã‚‚ã®ã«ãªã‚Šã¾ã—ãŸã€‚
<li>ç¾åœ¨(2020å¹´6æœˆ)ã¯ Angular 10.x ã¾ã§ãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã„ã¦ã€å˜ã« Angular ã¨å‘¼ã¶ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
<li>JavaScript ã‚’æ‹¡å¼µã—ãŸ TypeScript (JavaScript ã«å‹å®šç¾©ã‚„ ES6 æ–‡æ³•ãªã©ã‚’åŠ ãˆãŸæ‹¡å¼µè¨€èª)ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚
<li>TypeScript ã§ä½œæˆã—ãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ã€ES5 ãƒ¬ãƒ™ãƒ«ã® JavaScript ã«ã‚³ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã€ãƒ–ãƒ©ã‚¦ã‚¶ã«èª­ã¿è¾¼ã¾ã›ã¾ã™ã€‚
<li><a href="vuejs.html" tppabs="http://www.tohoho-web.com/ex/vuejs.html">Vue.js</a> ã‚„ <a href="react.html" tppabs="http://www.tohoho-web.com/ex/react.html">React</a> ã¨ã‚ˆãæ¯”è¼ƒã•ã‚Œã¾ã™ã€‚ä¸¡è€…ã«æ¯”ã¹ã¦åˆæœŸå­¦ç¿’ã‚³ã‚¹ãƒˆã¯é«˜ã„ã§ã™ãŒã€æ©Ÿèƒ½ã‚‚è±Šå¯Œã§ã€ä¼æ¥­å‘ã‘å¤§è¦æ¨¡é–‹ç™ºå‘ãã¨è¨€ã‚ã‚Œã¦ã„ã¾ã™ã€‚
<li>ãƒãƒƒãƒˆã§æ¤œç´¢ã™ã‚‹ã¨ AngularJS (Angular 1ç³»)ã®ã‚‚ã®ã¨ã€Angular (Angular 2ç³») ã®ã‚‚ã®ãŒæ··åœ¨ã—ã¦æ¤œç´¢ã•ã‚Œã¦ã—ã¾ã„ã¾ã™ã€‚AngularJS (JS ä»˜ã)ã‚„ $scope ã‚„ã€ng- (ãƒã‚¤ãƒ•ãƒ³ã‚ã‚Š) ãŒã‚ã‚‹ã¨ã€Angular 1 ã«é–¢ã™ã‚‹å¤ã„è¨˜äº‹ã¨ã—ã¦ç„¡è¦–ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
<li>Angular (JS ç„¡ã—)ã‚„ã€ngXxxx (ãƒã‚¤ãƒ•ãƒ³ç„¡ã—) ã§ã‚ã‚Œã°ã€Angular 2 ä»¥é™ã®è¨˜äº‹ã§ã‚ã‚‹å¯èƒ½æ€§ãŒé«˜ã„ã§ã™ã€‚
<li>Angular è‡ªä½“ã®é€²åŒ–ã‚‚æ—©ã„ã®ã§ã€1å¹´ä»¥ä¸Šå¤ã„è¨˜äº‹ã¯å½“ã¦ã«ãªã‚‰ãªã„ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚æœ€æ–°ã®è‹±èªãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚’å‚ç…§ã™ã‚‹ã®ãŒæ—©é“ã ã£ãŸã‚Šã—ã¾ã™ã€‚
<li>Angular ã‚’å‹‰å¼·ã™ã‚‹ã«ã¯ã€è‹±èªã®è¨˜äº‹ã‚’èª­ã¿ã“ãªã™ã‚¹ã‚­ãƒ«ã¯å¿…è¦ã«ãªã‚‹ã‹ã‚‚ã€‚
<li>å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã€è¡¨ç¤ºãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã€ãƒ¢ãƒ‡ãƒ«ã‚’åŒæ–¹å‘ã«ãƒã‚¤ãƒ³ãƒ‰ã™ã‚‹ã€åŒæ–¹å‘ãƒã‚¤ãƒ‡ã‚£ãƒ³ã‚°ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚
<li>Ajax ãªã©ã®éåŒæœŸã‚¤ãƒ™ãƒ³ãƒˆã®å‡¦ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦ã€<a target="_top" href="javascript:if(confirm('http://reactivex.io/rxjs/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://reactivex.io/rxjs/'" tppabs="http://reactivex.io/rxjs/">RxJS</a> ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚
<li>ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãªã©ã® UI éƒ¨å“ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ <a target="_top" href="javascript:if(confirm('https://material.angular.io/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://material.angular.io/'" tppabs="https://material.angular.io/">Angular Material</a> ãŒå…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚
</ul>
</div>

<h4 id="tutrial-image">ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã®ã‚¤ãƒ¡ãƒ¼ã‚¸</h4>
<div class=i>
<p>ä¸‹è¨˜ã®ç’°å¢ƒã§æ¤œè¨¼ã—ã¦ã„ã¾ã™ã€‚</p>
<pre class="c">
OS: CentOS 7.8.2
Node.js: 12.18.1
npm: 6.14.5
Angular CLI: 10.0.0
</pre>
<p>ã“ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã¯ã€æœ€çµ‚çš„ã«ä¸‹è¨˜ã®æ§˜ãªã‚¤ãƒ¡ãƒ¼ã‚¸ã®ç”»é¢ã‚’ä½œæˆã—ã¾ã™ã€‚ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚„ãƒ¦ãƒ¼ã‚¶åã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚å€¤ã¾ã§ã¯å¤‰åŒ–ã—ã¾ã›ã‚“ãŒã€ã“ã‚Œã‹ã‚‰ä½œæˆã™ã‚‹ç”»é¢ã®ãŠãŠã‚ˆãã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ã¤ã‹ã‚€ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<script>
function goPage(id) {
  document.getElementById('main-dashboard').style.display = 'none';
  document.getElementById('main-user-list').style.display = 'none';
  document.getElementById('main-user-edit').style.display = 'none';
  document.getElementById('confirm-dialog').style.display = 'none';
  document.getElementById(id).style.display = 'block';
}
function showDialog(id) {
  document.getElementById(id).style.display = 'block';
}  
</script>
<div class="app">
 <div class="header"><span class="icon">â—†</span> Angular Sample Console</div>
 <div class="menu">
  <span class="link" onclick="goPage('main-dashboard')">Dashboard</span>
  <span class="link" onclick="goPage('main-user-list')">Users</span>
 </div>
 <div class="main">
  <div id="main-dashboard">
   <div class="h1">Dashboard</div>
   <p>This is a sample of Angular application.</p>
  </div>
  <div id="main-user-list">
   <div class="h1">Users</div>
   <table>
    <tr><th>Id</th><th>Name</th><th>Email</th></tr>
    <tr><td>1</td><td><span class="link" onclick="goPage('main-user-edit')">Yamada</span></td><td>yamada@example.com</td></tr>
    <tr><td>2</td><td><span class="link" onclick="goPage('main-user-edit')">Suzuki</span></td><td>suzuki@example.com</td></tr>
    <tr><td>3</td><td><span class="link" onclick="goPage('main-user-edit')">Tanaka</span></td><td>tanaka@example.com</td></tr>
   </table>
  </div>  
  <div id="main-user-edit">
   <div class="h1">User edit</div>
   <table style="margin-bottom:2px">
    <tr><th>Id</th><td>1</td></tr>
    <tr><th>Name</th><td><input type="text" value="Yamada"></td></tr>
    <tr><th>Email</th><td><input type="text" value="yamada@example.com"></td></tr>
   </table>
   <button onclick="showDialog('confirm-dialog')">OK</button>
   <button onclick="goPage('main-user-list')">Cancel</button>
  </div>
  <div id="confirm-dialog">
   <div class="h1">Confirm</div>
   <p>Are you sure you want to update this user?</p>
   <button onclick="goPage('main-user-list')">OK</button>
   <button onclick="goPage('main-user-edit')">Cancel</button>
  </div>
 </div>
</div>
<p>ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ä½œæˆã™ã‚‹ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯ä¸‹è¨˜ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã¾ã™ã€‚</p>
<ul>
<li><a href="angular-sample-1.zip" tppabs="http://www.tohoho-web.com/ex/angular-sample-1.zip">angular-sample-1.zip</a> : ãƒ­ãƒ¼ã‚«ãƒ«ã®ã¿ã§å®Œçµã™ã‚‹ç‰ˆ
<li><a href="angular-sample-2.zip" tppabs="http://www.tohoho-web.com/ex/angular-sample-2.zip">angular-sample-2.zip</a> : ã‚µãƒ¼ãƒã¨ REST-API é€šä¿¡ã™ã‚‹ç‰ˆ
</ul>
</div>

<h4 id="install">ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h4>
<div class=i>
<p><a href="nodejs.html" tppabs="http://www.tohoho-web.com/ex/nodejs.html">Node.js</a> ç³»ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ãƒ„ãƒ¼ãƒ« <a href="npm.html" tppabs="http://www.tohoho-web.com/ex/npm.html">npm</a> ã‚’ä½¿ç”¨ã—ã¦ã€Angular ã® CLI (Command Line Interface) ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚</p>
<div class="tab">Shell</div>
<pre class=c2>
$ <em>npm install -g @angular/cli</em>
    :
how to change this setting, see http://angular.io/analytics. (y/N) <em>N</em>
</pre>
</div>

<h4 id="new-application">ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã™ã‚‹</h4>
<div class=i>
<p><b>ng</b> ã‚³ãƒãƒ³ãƒ‰ã§æ–°ã—ã„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã—ã¾ã™ã€‚<b>my-app</b> ã¯ä½œæˆã™ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åã¨ãªã‚Šã¾ã™ã€‚<b>Angular routing</b> ã¯å¾Œç¨‹åˆ©ç”¨ã™ã‚‹ã®ã§ <b>y</b> ã¨ç­”ãˆã¦ãã ã•ã„ã€‚ã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆã‚’ CSS, SCSS ãªã©ã‹ã‚‰é¸ã¹ã¾ã™ã€‚ã‚ªã‚¹ã‚¹ãƒ¡ã¯ <a href="sass.html" tppabs="http://www.tohoho-web.com/ex/sass.html">SCSS</a> ã§ã™ãŒã€ã¨ã‚Šã‚ãˆãšãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® CSS ã§ã€‚</p>
<div class="tab">Shell</div>
<pre class=c2>
$ <em>ng new my-app</em>
? Would you like to add Angular routing? (y/N) <em>y</em>
? Which stylesheet format would you like to use? <em>CSS</em>	<span class="cm"># ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹•ã‚­ãƒ¼ã§é¸æŠã—ã¦Enter</span>
</pre>
</div>

<h4 id="start-server">ã‚µãƒ¼ãƒã‚’èµ·å‹•ã™ã‚‹</h4>
<div class=i>
<p>ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ“ãƒ«ãƒ‰ã—ã¦é–‹ç™ºç”¨ç°¡æ˜“ã‚µãƒ¼ãƒã‚’èµ·å‹•ã—ã¾ã™ã€‚èµ·å‹•ã«ã¯ã—ã°ã‚‰ãæ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™ã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ã€Angular ã®ã‚µãƒ³ãƒ—ãƒ«ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚LISTEN ã™ã‚‹ IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚„ãƒãƒ¼ãƒˆç•ªå·ã‚’å¤‰æ›´ã™ã‚‹ã«ã¯ã€<b>--host</b>, <b>--port</b> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã—ã¾ã™ã€‚ä»–ã®ãƒã‚·ãƒ³ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹éš›ã¯ã€<b>firewall-cmd</b> ãªã©ã§ãƒãƒ¼ãƒˆã®ç©´ã‚ã‘ãŒå¿…è¦ãªå ´åˆãŒã‚ã‚Šã¾ã™ã€‚</p>
<div class="tab">Shell</div>
<pre class=c2>
$ cd my-app
$ <em>ng serve --host 0.0.0.0 --port 8080</em>
</pre>
<p>ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ http://{ã‚µãƒ¼ãƒã‚¢ãƒ‰ãƒ¬ã‚¹}:8080/ ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ Angular ã®ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚Œã°æˆåŠŸã§ã™ã€‚</p>
</div>

<h4 id="edit-html-css">HTMLã‚„CSSã‚’ç·¨é›†ã™ã‚‹</h4>
<div class=i>
<p>ã‚½ãƒ¼ã‚¹ã‚’ä¸‹è¨˜ã®æ§˜ã«æ›¸ãæ›ãˆã€Hello world! ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚ã‚µãƒ¼ãƒãŒèµ·å‹•ã—ã¦ã„ã‚Œã°ã€ã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿®æ­£ã™ã‚‹ã¨è‡ªå‹•çš„ã«ãƒªãƒ“ãƒ«ãƒ‰ã¨ã€ãƒ–ãƒ©ã‚¦ã‚¶ã®å†è¡¨ç¤ºãŒè¡Œã‚ã‚Œã¾ã™ã€‚</p>
<div class="tab">src/app/app.component.html</div>
<pre class=c2>
&lt;h1&gt;Hello world!&lt;/h1&gt;
</pre>
<div class="tab">src/styles.css</div>
<pre class=c2>
* {
  margin: 0;
  padding: 0;
}
h1 {
  font-size: 1.4em;
}
</pre>
<p>ãƒ–ãƒ©ã‚¦ã‚¶ãŒè‡ªå‹•çš„ã«ãƒªãƒ­ãƒ¼ãƒ‰ã•ã‚Œã€Hello world! ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
</div>

<h4 id="add-component">ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’è¿½åŠ ã™ã‚‹</h4>
<div class=i>
<p>ãƒ˜ãƒƒãƒ€ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã€ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãªã©ã®ç”»é¢è¦ç´ ã‚’ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã—ã¦è¿½åŠ ã—ã¾ã™ã€‚</p>
<div class="tab">Shell</div>
<pre class=c2>
$ ng generate component header
$ ng generate component menu
$ ng generate component dashboard
</pre>
<p>app ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã® HTML ã‚’ä¸‹è¨˜ã®æ§˜ã«æ›¸ãæ›ãˆã¾ã™ã€‚</p>
<div class="tab">src/app/app.component.html</div>
<pre class=c2>
&lt;app-header&gt;&lt;/app-header&gt;
&lt;app-menu&gt;&lt;/app-menu&gt;
&lt;app-dashboard&gt;&lt;/app-dashboard&gt;
</pre>
<p>ãƒ˜ãƒƒãƒ€ã¯é»’åœ°ã«ç™½æ–‡å­—ã¨ã—ã€Angular ã®ã‚¢ã‚¤ã‚³ãƒ³ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚</p>
<div class="tab">src/app/header/header.component.html</div>
<pre class=c2>
&lt;div class="header"&gt;
  &lt;img src="../favicon.ico" alt="Angular"&gt; Angular Sample Console
&lt;/div&gt;
</pre>
<div class="tab">src/app/header/header.component.css</div>
<pre class=c2>
.header {
  padding: 4px;
  background-color: #000;
  color: #fff;
}
.header img {
  width: 18px;
  vertical-align: middle;
}
</pre>
<p>ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«ã¯ Dashboar ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’è¨˜è¿°ã—ã¾ã™ã€‚</p>
<div class="tab">src/app/menu/menu.component.html</div>
<pre class=c2>
&lt;div class="menu"&gt;
  &lt;ul&gt;
  &lt;li&gt;&lt;a href="/"&gt;Dashboard&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/div&gt;
</pre>
<div class="tab">src/app/menu/menu.component.css</div>
<pre class=c2>
.menu {
  background-color: #ccc;
}
.menu li {
  padding: 4px 8px;
  display: inline-block;
}
</pre>
<p>ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ã¯ã‚¿ã‚¤ãƒˆãƒ«ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚</p>
<div class="tab">src/app/dashboard/dashboard.component.html</div>
<pre class=c2>
&lt;h1&gt;Dashboard&lt;/h1&gt;
</pre>
<p>ãƒ˜ãƒƒãƒ€ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒãƒ¼ã€ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚¿ã‚¤ãƒˆãƒ«ãŒè¡¨ç¤ºã•ã‚Œã‚Œã°æˆåŠŸã§ã™ã€‚</p>
</div>

<h4 id="display-variables">å¤‰æ•°ã®å€¤ã‚’è¡¨ç¤ºã™ã‚‹</h4>
<div class=i>
<p>{{å¤‰æ•°å}} ã§ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒæŒã¤å¤‰æ•°ã‚’è¡¨ç¤ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚å„ã‚½ãƒ¼ã‚¹ã‚’ä¸‹è¨˜ã®æ§˜ã«ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚</p>
<div class="tab">src/app/dashboard/dashboard.component.ts</div>
<pre class=c2>
  :
export class DashboardComponent implements OnInit {
  <em>message: string;</em>

  constructor() {
    <em>this.message = 'This is a sample of Angular application.';</em>
  }
  :
</pre>
<div class="tab">src/app/dashboard/dashboard.component.html</div>
<pre class=c2>
&lt;h1&gt;Dashboard&lt;/h1&gt;
<em>&lt;p&gt;{{message}}&lt;/p&gt;</em>
</pre>
<p>Dashboard ç”»é¢ã«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§å®šç¾©ã—ãŸ message å¤‰æ•°ã®å€¤ãŒè¡¨ç¤ºã•ã‚Œã‚Œã°æˆåŠŸã§ã™ã€‚</p>
</div>

<h4 id="routing">ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¿½åŠ ã™ã‚‹</h4>
<div class=i>
<p>URL ã«ã‚ˆã£ã¦ä¸‹è¨˜ã®æ§˜ã«è¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆã¾ã™ã€‚è¡¨ç¤ºã®åˆ‡ã‚Šæ›¿ãˆã«ã¯ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</p>
<ul>
<li>http://ï½/ â†’ Dashboard ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
<li>http://ï½/dashbord â†’ Dashboard ã‚’è¡¨ç¤º
<li>http://ï½/users â†’ ãƒ¦ãƒ¼ã‚¶ä¸€è¦§ã‚’è¡¨ç¤º
<li>http://ï½/users/{user_id}/edit â†’ ãƒ¦ãƒ¼ã‚¶æ›´æ–°ç”»é¢ã‚’è¡¨ç¤º
</ul>
<p>ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆæ™‚ã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®è¿½åŠ ã‚’è¡Œã£ã¦ã„ãªã„å ´åˆã¯ã€ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¿½åŠ ã—ã¾ã™ã€‚</p>
<div class="tab">Shell</div>
<pre class=c2>
$ <em>ng generate module app-routing --flat --module=app</em>
</pre>
<p>ãƒ¦ãƒ¼ã‚¶ä¸€è¦§ã€ãƒ¦ãƒ¼ã‚¶ç·¨é›†ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’è¿½åŠ ã—ã¾ã™ã€‚</p>
<div class="tab">Shell</div>
<pre class=c2>
$ <em>ng generate component user/user-list</em>
$ <em>ng generate component user/user-edit</em>
</pre>
<p>å„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸‹è¨˜ã®æ§˜ã«ä¿®æ­£ã—ã¾ã™ã€‚</p>
<div class="tab">src/app/app-routing.module.ts</div>
<pre class=c2>
import { NgModule } from '@angular/core';
import { Routes, RouterModule } from '@angular/router';

<em>import { DashboardComponent } from './dashboard/dashboard.component';</em>
<em>import { UserListComponent } from './user/user-list/user-list.component';</em>
<em>import { UserEditComponent } from './user/user-edit/user-edit.component';</em>

const routes: Routes = [
  <em>{ path: '', redirectTo: '/dashboard', pathMatch: 'full' },
  { path: 'dashboard', component: DashboardComponent },
  { path: 'users', component: UserListComponent },
  { path: 'users/:id/edit', component: UserEditComponent },</em>
];
    :
</pre>
<div class="tab">src/app/app.component.html</div>
<pre class=c2>
&lt;app-header&gt;&lt;/app-header&gt;
&lt;app-menu&gt;&lt;/app-menu&gt;
<em>&lt;div class="main"&gt;</em>
  <em>&lt;router-outlet&gt;&lt;/router-outlet&gt;</em>
<em>&lt;/div&gt;</em>
</pre>
<div class="tab">src/app/menu/menu.component.html</div>
<pre class=c2>
&lt;div class="menu"&gt;
  &lt;ul&gt;
  &lt;li&gt;&lt;a <em>routerLink</em>="/"&gt;Dashboard&lt;/a&gt;&lt;/li&gt;
  <em>&lt;li&gt;&lt;a routerLink="/users"&gt;Users&lt;/a&gt;&lt;/li&gt;</em>
  &lt;/ul&gt;
&lt;/div&gt;
</pre>
<div class="tab">src/app/user/user-list/user-list.component.html</div>
<pre class=c2>
<em>&lt;h1&gt;Users&lt;/h1&gt;</em>
</pre>
<p>Dashboard ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ Dashboard ç”»é¢ãŒã€Users ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ Users ç”»é¢(ã‚¿ã‚¤ãƒˆãƒ«ã®ã¿)ãŒè¡¨ç¤ºã•ã‚Œã‚Œã°æˆåŠŸã§ã™ã€‚</p>
</div>

<h4 id="display-list">ãƒªã‚¹ãƒˆã‚’è¡¨ç¤ºã™ã‚‹</h4>
<div class=i>
<p>Users ç”»é¢ã«ãƒ¦ãƒ¼ã‚¶ä¸€è¦§ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚ã¾ãšã€User ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¯ãƒ©ã‚¹ã‚’å®šç¾©ã—ã¾ã™ã€‚</p>
<div class="tab">src/app/user/user.ts</div>
<pre class=c2>
<em>export class User {
  id: number;
  name: string;
  email: string;
}</em>
</pre>
<p>UserList ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ users ãƒªã‚¹ãƒˆã‚’åˆæœŸåŒ–ã—ã¾ã™ã€‚</p>
<div class="tab">src/app/user/user-list/user-list.component.ts</div>
<pre class=c2>
import { Component, OnInit } from '@angular/core';
<em>import { User } from '../user';</em>

@Component({
  selector: 'app-user-list',
  templateUrl: './user-list.component.html',
  styleUrls: ['./user-list.component.css']
})
export class UserListComponent implements OnInit {
  <em>users: User[];</em>

  constructor() { }

  ngOnInit(): void {
    <em>this.users = [
      { id: 1, name: 'Yamada', email: 'yamada@example.com' },
      { id: 2, name: 'Suzuki', email: 'suzuki@example.com' },
      { id: 3, name: 'Tanaka', email: 'tanaka@example.com' },
    ];</em>
  }

}
</pre>
<p>UserList ç”»é¢ã§ã€users ãƒªã‚¹ãƒˆã‚’è¡¨ç¤ºã—ã¾ã™ã€‚*ngFor ã¯é…åˆ—ã‚’ç¹°ã‚Šè¿”ã—è¡¨ç¤ºã™ã‚‹éš›ã«ä½¿ç”¨ã•ã‚Œã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã§ã™ã€‚</p>
<div class="tab">src/app/user/user-list/user-list.component.html</div>
<pre class=c2>
&lt;h1&gt;Users&lt;/h1&gt;
<em>&lt;table&gt;
  &lt;tr&gt;&lt;th&gt;Id&lt;/th&gt;&lt;th&gt;Name&lt;/th&gt;&lt;th&gt;Email&lt;/th&gt;&lt;/tr&gt;
  &lt;tr *ngFor="let user of users"&gt;
    &lt;td&gt;{{user.id}}&lt;/td&gt;
    &lt;td&gt;{{user.name}}&lt;/td&gt;
    &lt;td&gt;{{user.email}}&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;</em>
</pre>
<p>ã™ã“ã—ã€è¦‹æ „ãˆã‚’æ•´ãˆã¦ã‚„ã‚Šã¾ã™ã€‚</p>
<div class="tab">src/styles.css</div>
<pre class=c2>
* {
  margin: 0;
  padding: 0;
}
h1 {
  font-size: 1.4em;
}
<em>a:link,
a:visited {
  color: #000;
}
.main {
  padding: 8px;
}
table {
  border-collapse: collapse;
  width: 100%;
}
table th,
table td {
  border: 1px solid #ccc;
  padding: 4px;
}
table th {
  background-color: #ddd;
  text-align: left;
}</em>
</pre>
<p>Users ç”»é¢ã«ã€ãƒ¦ãƒ¼ã‚¶ã®ä¸€è¦§ãŒè¡¨ç¤ºã•ã‚Œã‚Œã°æˆåŠŸã§ã™ã€‚</p>
</div>

<h4 id="create-service">ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½œæˆã™ã‚‹</h4>
<div class=i>
<p>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã§ãƒ‡ãƒ¼ã‚¿ã‚’å…±æœ‰ã—ãŸã‚Šã™ã‚‹ãŸã‚ã«ã€ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½œæˆã—ã¾ã™ã€‚ä¸‹è¨˜ã®ä¾‹ã§ã¯ã€ãƒ¦ãƒ¼ã‚¶ä¸€è¦§ç”»é¢ã€ãƒ¦ãƒ¼ã‚¶ç·¨é›†ç”»é¢ã§å…±æœ‰ã™ã‚‹ãƒ¦ãƒ¼ã‚¶æƒ…å ±ã‚’ç®¡ç†ã™ã‚‹ user ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½œæˆã—ã¾ã™ã€‚</p>
<div class="tab">Shell</div>
<pre class=c2>
$ <em>ng generate service user/user</em>
</pre>
<p>app.module.ts ã« user ã‚µãƒ¼ãƒ“ã‚¹ã‚’è¿½åŠ ã—ã¾ã™ã€‚</p>
<div class="tab">src/app/app.module.ts</div>
<pre class=c2>
  :
import { DashboardComponent } from './dashboard/dashboard.component';
<em>import { UserService } from './user/user.service';</em>
import { UserListComponent } from './user/user-list/user-list.component';
  :

@NgModule({
  :
  providers: [
    <em>UserService</em>
  ],
  :
</pre>
<p>ã‚µãƒ¼ãƒ“ã‚¹ã«ã€åˆæœŸåŒ–ã€ä¸€è¦§å–å¾—ã€è©³ç´°å–å¾—ã€è¨­å®šç”¨ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã—ã¾ã™ã€‚</p>
<div class="tab">src/app/user/user.service.ts</div>
<pre class=c2>
import { Injectable } from '@angular/core';
<em>import { User } from './user';</em>

@Injectable()
export class UserService {
  <em>users: User[];</em>

  constructor() {
    <em>this.users = [
      { id: 1, name: 'Yamada', email: 'yamada@example.com' },
      { id: 2, name: 'Suzuki', email: 'suzuki@example.com' },
      { id: 3, name: 'Tanaka', email: 'tanaka@example.com' },
    ];</em>
  }

  <em>getUsers(): User[] {
    return this.users;
  }

  getUser(id: number): User {
    return this.users.find(user => user.id === id);
  }

  setUser(user: User): void {
    for (let i = 0; i &lt; this.users.length; i++) {
      if (this.users[i].id === user.id) {
        this.users[i] = user;
      }
    }
  }</em>
}
</pre>
<div class="tab">src/app/user/user-list/user-list.component.ts</div>
<pre class=c2>
import { Component, OnInit } from '@angular/core';
import { User } from '../user';
<em>import { UserService } from '../user.service';</em>

  :
export class UserListComponent implements OnInit {
  users: User[];

  constructor(
    <em>private service: UserService</em>
  ) { }

  ngOnInit(): void {
    <em>this.users = this.service.getUsers();</em>
  }
}
</pre>
<p>ç”»é¢ã«ã¯å¤‰å‹•ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€ã‚µãƒ¼ãƒ“ã‚¹ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</p>
</div>

<h4 id="forms">ãƒ•ã‚©ãƒ¼ãƒ ã‚’ä½œæˆã™ã‚‹</h4>
<div class=i>
<p>ãƒ¦ãƒ¼ã‚¶ç·¨é›†ç”»é¢ã§ãƒ•ã‚©ãƒ¼ãƒ ã‚’å–ã‚Šæ‰±ã„ã¾ã™ã€‚ã¾ãšã€åå‰ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€/users/:id/edit ã«å‰²ã‚Šå½“ã¦ã‚‰ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ç·¨é›†ç”»é¢ã«é·ç§»ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚</p>
<div class="tab">src/app/user/user-list/user-list.component.html</div>
<pre class=c2>
&lt;h1&gt;Users&lt;/h1&gt;
&lt;table&gt;
  &lt;tr&gt;&lt;th&gt;Id&lt;/th&gt;&lt;th&gt;Name&lt;/th&gt;&lt;th&gt;Email&lt;/th&gt;&lt;/tr&gt;
  &lt;tr *ngFor="let user of users"&gt;
    &lt;td&gt;{{user.id}}&lt;/td&gt;
    <em>&lt;td&gt;&lt;a routerLink="/users/{{user.id}}/edit"&gt;{{user.name}}&lt;/a&gt;&lt;/td&gt;</em>
    &lt;td&gt;{{user.email}}&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
</pre>
<p>app.modules.ts ã« FormsModule ã‚’çµ„ã¿è¾¼ã¿ã¾ã™ã€‚</p>
<div class="tab">src/app/app.module.ts</div>
<pre class=c2>
import { BrowserModule } from '@angular/platform-browser';
import { NgModule } from '@angular/core';
<em>import { FormsModule } from '@angular/forms';</em>
  :
@NgModule({
  :
  imports: [
    BrowserModule,
    AppRoutingModule<em>,
    FormsModule</em>
  ],
  :
</pre>
<p>ãƒ¦ãƒ¼ã‚¶ç·¨é›†ç”»é¢ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å®šç¾©ã—ã¾ã™ã€‚</p>
<div class="tab">src/app/user/user-edit/user-edit.component.ts</div>
<pre class=c2>
import { Component, OnInit } from '@angular/core';
<em>import { ActivatedRoute, Router } from '@angular/router';</em>

<em>import { User } from '../user';</em>
<em>import { UserService } from '../user.service';</em>

@Component({
  selector: 'app-user-edit',
  templateUrl: './user-edit.component.html',
  styleUrls: ['./user-edit.component.css']
})

export class UserEditComponent implements OnInit {
  <em>user: User;</em>

  constructor(
    <em>private route: ActivatedRoute,
    private router: Router,
    private service: UserService</em>
  ) { }

  ngOnInit(): void {
    <em>const id = Number(this.route.snapshot.paramMap.get('id'));
    this.user = this.service.getUser(id);</em>
  }

  <em>onSubmit(form: any): void {
    let user = {
      id: form.id,
      name: form.name,
      email: form.email
    };
    this.service.setUser(user);
    this.router.navigate(["/users"]);
  }</em>
}
</pre>
<p>ãƒ¦ãƒ¼ã‚¶ç·¨é›†ç”»é¢ã® HTML ã‚’ä¸‹è¨˜ã®æ§˜ã«æ›¸ãæ›ãˆã¾ã™ã€‚</p>
<div class="tab">src/app/user/user-edit/user-edit.component.html</div>
<pre class=c2>
<em>&lt;form #f="ngForm" (ngSubmit)="onSubmit(f.value)"&gt;
  &lt;input type="hidden" name="id" [ngModel]="user.id"&gt;
  &lt;table&gt;
    &lt;tr&gt;&lt;th&gt;Id&lt;/th&gt;&lt;td&gt;{{user.id}}&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;&lt;th&gt;Name&lt;/th&gt;&lt;td&gt;&lt;input type="text" name="name" [ngModel]="user.name"&gt;&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;&lt;th&gt;Email&lt;/th&gt;&lt;td&gt;&lt;input type="text" name="email" [ngModel]="user.email"&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;/table&gt;
  &lt;button type="submit"&gt;OK&lt;/button&gt;
  &lt;button routerLink="/users"&gt;Cancel&lt;/button&gt;
&lt;/form&gt;</em>
</pre>
<p>è¦‹æ „ãˆã‚’å°‘ã—è¿½è¨˜ã€‚</p>
<div class="tab">src/styles.css</div>
<pre class=c2>
  :
<em>button {
  margin-top: 4px;
  margin-right: 4px;
  padding: 4px;
  min-width: 120px;
}
input[type="text"] {
  padding: 4px;
  width: 300px;
}</em>
</pre>
<p>ãƒ¦ãƒ¼ã‚¶åã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ãƒ¦ãƒ¼ã‚¶ç·¨é›†ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã€åå‰ã‚„ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ä¿®æ­£ã™ã‚‹ã¨ã€ä¸€è¦§ã«åæ˜ ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Œã°æˆåŠŸã§ã™ã€‚</p>
</div>

<h4 id="mat-dialog">ãƒ¢ãƒ¼ãƒ€ãƒ«ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’è¡¨ç¤ºã™ã‚‹</h4>
<div class=i>
<p>Angular Material ã¨ã„ã†éƒ¨å“ç¾¤ã®ä¸­ã‹ã‚‰ MatDialog ã¨ã„ã†ãƒ¢ãƒ¼ãƒ€ãƒ«ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’åˆ©ç”¨ã—ã¦ã¿ã¾ã™ã€‚ã¾ãšã€Angular/material ã¨ Angular/CDK (Component Dev. Kit) ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚</p>
<div class="tab">Shell</div>
<pre class=c2>
$ <em>npm install --save @angular/material @angular/cdk</em>
</pre>
<p>Angular Material ç”¨ã® CSS ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚</p>
<div class="tab">src/styles.css</div>
<pre class=c2>
<em>@import '~@angular/material/prebuilt-themes/deeppurple-amber.css';</em>
* {
  margin: 0;
  padding: 0;
}
</pre>
<p>ãƒ¢ãƒ¼ãƒ€ãƒ«ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã®ã‚µãƒ³ãƒ—ãƒ«ã¨ã—ã¦ã€ã‚³ãƒ³ãƒ•ã‚¡ãƒ¼ãƒ ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆã—ã¦ã¿ã¾ã™ã€‚</p>
<div class="tab">Shell</div>
<pre class=c2>
$ <em>ng generate component tools/confirm-dialog</em>
</pre>
<p>å„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¬¡ã®ã‚ˆã†ã«ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚</p>
<div class="tab">src/app/app.module.ts</div>
<pre class=c2>
  :
import { FormsModule } from '@angular/forms';
<em>import { MatDialogModule } from '@angular/material/dialog';</em>
<em>import { BrowserAnimationsModule } from '@angular/platform-browser/animations';</em>
  :

@NgModule({
  :
  imports: [
    :
    FormsModule<em>,
    MatDialogModule,
    BrowserAnimationsModule</em>
  ],
  providers: [
    UserService
  ],
  <em>entryComponents: [
    ConfirmDialogComponent
  ],</em>
  bootstrap: [AppComponent]
})
export class AppModule { }
</pre>
<div class="tab">src/app/tools/confirm-dialog/confirm-dialog.component.ts</div>
<pre class=c2>
import { Component, OnInit<em>, Inject</em> } from '@angular/core';
<em>import { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';</em>

@Component({
  selector: 'app-confirm-dialog',
  templateUrl: './confirm-dialog.component.html',
  styleUrls: ['./confirm-dialog.component.css']
})
export class ConfirmDialogComponent implements OnInit {

  constructor(
    <em>public dialogRef: MatDialogRef&lt;ConfirmDialogComponent&gt;,
    @Inject(MAT_DIALOG_DATA) public data: any</em>
  ) { }

  ngOnInit(): void {
  }

  <em>closeDialog(result) {
    this.dialogRef.close(result);
  }</em>
}
</pre>
<div class="tab">src/app/tools/confirm-dialog/confirm-dialog.component.html</div>
<pre class=c2>
<em>&lt;h1&gt;{{data.title}}&lt;/h1&gt;
&lt;p&gt;{{data.message}}&lt;/p&gt;
&lt;button (click)="closeDialog(false)"&gt;Cancel&lt;/button&gt;
&lt;button (click)="closeDialog(true)"&gt;OK&lt;/button&gt;</em>
</pre>
<div class="tab">src/app/user/user-edit/user-edit.component.ts</div>
<pre class=c2>
import { Component, OnInit } from '@angular/core';
import { ActivatedRoute, Router } from '@angular/router';
<em>import { MatDialog } from '@angular/material/dialog';
import { ConfirmDialogComponent } from '../../tools/confirm-dialog/confirm-dialog.component';</em>
  :

export class UserEditComponent implements OnInit {
  constructor(
    private route: ActivatedRoute,
    private router: Router,
    private service: UserService<em>,
    private dialog: MatDialog</em>
  ) { }

  :
  
  onSubmit(form: any): void {
    let user = {
      id: form.id,
      name: form.name,
      email: form.email
    };

    <em>let dialogRef = this.dialog.open(ConfirmDialogComponent, {
      width: '300px',
      data: {
        title: 'Confirm',
        message: 'Are you sure you want to update this user?'
      }
    });

    dialogRef.afterClosed().subscribe(result =&gt; {
      if (result === true) {
        this.service.setUser(user);
        this.router.navigate(["/users"]);
      }
    });</em>
  }
</pre>
<p>ãƒ¦ãƒ¼ã‚¶ç·¨é›†ç”»é¢ã§ [OK] ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãŸéš›ã€æœ¬å½“ã«å¤‰æ›´ã™ã‚‹ã‹ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã‚Œã°æˆåŠŸã§ã™ã€‚ã“ã“ã¾ã§ã®ã‚½ãƒ¼ã‚¹ã‚’ã€<a href="angular-sample-1.zip" tppabs="http://www.tohoho-web.com/ex/angular-sample-1.zip">angular-sample-1.zip</a> ã¨ã—ã¦ã¾ã¨ã‚ã¦ã‚ã‚Šã¾ã™ã€‚</p>
</div>

<h4 id="rest-api">ç°¡å˜ãª REST-API ã‚µãƒ¼ãƒã‚’ä½œã‚‹</h4>
<div class=i>
<p>ä¸Šè¨˜ã¾ã§ã®ä¾‹ã§ã¯ã€ãƒ–ãƒ©ã‚¦ã‚¶å´ã® JavaScript å†…ã«ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ä¿æŒã—ã€ãã‚Œã‚’æ›¸ãæ›ãˆã‚‹ã®ã¿ã§ã—ãŸãŒã€ãƒ¦ãƒ¼ã‚¶æƒ…å ±ã‚’ã‚µãƒ¼ãƒã‹ã‚‰ REST-API ã§èª­ã¿å‡ºã—ãƒ»æ ¼ç´ã§ãã‚‹ã‚ˆã†ã«æ‹¡å¼µã—ã¦ã„ãã¾ã™ã€‚ã¾ãšã€Express ã‚’ç”¨ã„ã¦ç°¡å˜ãª REST-API ã‚µãƒ¼ãƒã‚’ä½œæˆã—ã¾ã™ã€‚</p>
<div class="tab">Shell</div>
<pre class=c2>
$ mkdir ~/rest-test
$ cd ~/rest-test
$ npm init                        <span class="cm">// è³ªå•ã«ã¯ã™ã¹ã¦ Enter</span>
$ npm install express
$ vi index.js
</pre>
<div class="warning">
ä¸‹è¨˜ã®ä¾‹ã§ã¯ã€Access-Control-Allow-Origin ã‚’ç”¨ã„ã¦ä»–ã‚ªãƒªã‚¸ãƒ³ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ã—ã¦ã„ã¾ã™ãŒã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã®ãƒªã‚¹ã‚¯ãŒã‚ã‚Šã¾ã™ã€‚å®Ÿéš›ã«ä½¿ç”¨ã™ã‚‹éš›ã«ã¯é©åˆ‡ãªã‚ªãƒªã‚¸ãƒ³ã‚’æŒ‡å®šã™ã‚‹ãªã©ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–ã‚’ååˆ†ã«è¡Œã£ã¦ãã ã•ã„ã€‚
</div>
<div class="tab">index.js</div>
<pre class=c2>
var express = require('express');
var bodyParser = require('body-parser');
var app = express();
app.listen(8888);
app.use(bodyParser.json());
app.use(function(req, res, next) {
  res.header("Access-Control-Allow-Origin", "*");     <span class="cm">// ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯æœ‰ã‚Š</span>
  res.header("Access-Control-Allow-Headers", "Origin, X-Requested-With, Content-Type, Accept");
  next();
});

let users = [
  { id: 1, name: "Yamada", email: "yamada@example.com" },
  { id: 2, name: "Tanaka", email: "tanaka@example.com" },
  { id: 3, name: "Suzuki", email: "suzuki@example.com" }
];

app.get('/users', function(req, res) {
  res.send(JSON.stringify(users));
});

app.post('/users', function(req, res) {
  users.push(req.body);
  res.end();
});

app.get('/users/:id', function(req, res) {
  for (let i = 0; i &lt; users.length; i++) {
    if (users[i].id == req.params.id) {
      res.send(JSON.stringify(users[i]));
    }
  }
});

app.post('/users/:id', function(req, res) {
  for (let i = 0; i &lt; users.length; i++) {
    if (users[i].id == req.params.id) {
      users[i] = req.body;
    }
  }
  res.end();
});

app.delete('/users/:id', function(req, res) {
  for (let i = 0; i &lt; users.length; i++) {
    if (users[i].id == req.params.id) {
      users.splice(i, 1);
    }
  }
  res.end();
});
</pre>
<div class="tab">Shell</div>
<pre class=c2>
$ node index.js
</pre>
<p>åˆ¥ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‹ã‚‰å‹•ä½œã‚’ç¢ºèªã—ã¾ã™ã€‚</p>
<div class="tab">Shell</div>
<pre class=c2>
<span class="cm"># ãƒ¦ãƒ¼ã‚¶ä¸€è¦§</span>
$ curl -s -X GET http://localhost:8888/users | python -mjson.tool

<span class="cm"># ãƒ¦ãƒ¼ã‚¶è¿½åŠ </span>
$ curl -s -X POST -H 'Content-Type: application/json' \
  -d '{"id":4,"name":"Sasaki","email":"sasaki@example.com"}' \
  http://127.0.0.1:8888/users

<span class="cm"># ãƒ¦ãƒ¼ã‚¶æ›´æ–°</span>
$ curl -s -X POST -H 'Content-Type: application/json' \
  -d '{"id":4,"name":"Sasaki2","email":"sasaki2@example.com"}' \
  http://127.0.0.1:8888/users/4

<span class="cm"># ãƒ¦ãƒ¼ã‚¶å‰Šé™¤</span>
$ curl -s -X DELETE http://127.0.0.1:8888/users/4
</pre>
</div>

<h4 id="rxjs">RxJS ã§éåŒæœŸé€šä¿¡ã‚’è¡Œã†</h4>
<div class=i>
<p>REST-API ã‚µãƒ¼ãƒã¨éåŒæœŸé€šä¿¡ã‚’è¡Œã†ãŸã‚ã«ã€RxJS ã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’åˆ©ç”¨ã—ã¾ã™ã€‚</p>
<div class="tab">src/app/app.module.ts</div>
<pre class=c2>
  :
import { FormsModule } from '@angular/forms';
<em>import { HttpClientModule } from '@angular/common/http';</em>
  :
@NgModule({
  :
  imports: [
    BrowserModule,
    AppRoutingModule,
    FormsModule,
    <em>HttpClientModule,</em>
    :
  ],
  :
</pre>
<p><b>url</b> ã«æŒ‡å®šã™ã‚‹ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯é©åˆ‡ã«å¤‰æ›´ã—ã¦ãã ã•ã„ã€‚ã‚µãƒ¼ãƒã‹ã‚‰ã§ã¯ãªããƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰è¦‹ãŸ RESTã‚µãƒ¼ãƒã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’æŒ‡å®šã—ã¾ã™ã€‚</p>
<div class="tab">src/app/user/user.service.ts</div>
<pre class=c2>
import { Injectable } from '@angular/core';
<em>import { HttpClient } from '@angular/common/http';</em>
<em>import { Observable, of } from 'rxjs';</em>
<em>import { catchError, map, tap } from 'rxjs/operators';</em>
import { User } from './user';jj

@Injectable()
export class UserService {
  users: User[];
  <em>private url = 'http://127.0.0.1:8888';</em>     <span class="cm">// é©åˆ‡ã«å¤‰æ›´ã—ã¦ãã ã•ã„</span>

  constructor(
    <em>private http: HttpClient</em>
  ) { }

  getUsers(): <em>Observable&lt;User[]&gt;</em> {
    return <em>this.http.get&lt;User[]&gt;(`${this.url}/users`)
      .pipe(
        catchError(this.handleError('getUsers', []))
      );</em>
  }

  getUser(id: number): <em>Observable&lt;User&gt;</em> {
    return <em>this.http.get&lt;User&gt;(`${this.url}/users/${id}`)
      .pipe(
        catchError(this.handleError&lt;User&gt;(`getUser id=${id}`))
      );</em>
  }

  setUser(user: User): <em>Observable&lt;User&gt;</em> {
    <em>const id = user.id;</em>
    return <em>this.http.post&lt;User&gt;(`${this.url}/users/${id}`, user)
      .pipe(
        catchError(this.handleError&lt;User&gt;(`setUser id=${id}`))
      );</em>
  }

  <em>private handleError&lt;T&gt; (operation = 'operation', result?: T) {
    return (error: any): Observable&lt;T&gt; =&gt; {
      console.error(error);
      console.log(`${operation} failed: ${error.message}`);
      return of(result as T);
    };
  }</em>
}
</pre>
<div class="tab">src/app/user/user-list/user-list.component.ts</div>
<pre class=c2>
import { Component, OnInit } from '@angular/core';
import { User } from '../user';
import { UserService } from '../user.service';

@Component({
  selector: 'app-user-list',
  templateUrl: './user-list.component.html',
  styleUrls: ['./user-list.component.css']
})

export class UserListComponent implements OnInit {
  users: User[];

  constructor(
    private service: UserService
  ) { }

  ngOnInit(): voi {
    <em>this.service.getUsers().subscribe(res => {
      this.users = res;
    });</em>
  }
}
</pre>
<div class="tab">src/app/user/user-edit/user-edit.component.ts</div>
<pre class=c2>
import { Component, OnInit } from '@angular/core';
import { ActivatedRoute, Router } from '@angular/router';

import { User } from '../user';
import { UserService } from '../user.service';

@Component({
  selector: 'app-user-edit',
  templateUrl: './user-edit.component.html',
  styleUrls: ['./user-edit.component.css']
})
export class UserEditComponent implements OnInit {
  user: User <em>= { id: 0, name: '', email: '' }</em>;

  constructor(
    private route: ActivatedRoute,
    private router: Router,
    private service: UserService,
    private dialog: MatDialog
  ) { }

  ngOnInit(): void {
    const id = Number(this.route.snapshot.paramMap.get('id'));
    <em>this.service.getUser(id).subscribe(res => {
      this.user = res;
    });</em>
  }

  onSubmit(form: any): void {
    :
    dialogRef.afterClosed().subscribe(result => {
      if (result === true) {
        <em>this.service.setUser(user).subscribe(() => {
          this.router.navigate(["/users"]);
        });</em>
      }
    });
  }
}
</pre>
<p>ã‚µãƒ¼ãƒãŒä¿æŒã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ‡ãƒ¼ã‚¿ã‚’ã€ä¸€è¦§è¡¨ç¤ºã€ç·¨é›†ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã¨ãªã‚Šã¾ã—ãŸã€‚ã“ã“ã¾ã§ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ (src)é…ä¸‹ã‚’ <a href="angular-sample-2.zip" tppabs="http://www.tohoho-web.com/ex/angular-sample-2.zip">angular-sample-2.zip</a> ã¨ã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã¾ã™ã€‚</p>
</div>

<hr>
<div>Copyright (C) 2018-2020 æœç”«ã€…</div>
<div>åˆç‰ˆ:2018å¹´2æœˆ4æ—¥ æœ€çµ‚æ›´æ–°:2020å¹´6æœˆ27æ—¥</div>
<div>http://www.tohoho-web.com/ex/angular.html</div>
</body>
</html>
