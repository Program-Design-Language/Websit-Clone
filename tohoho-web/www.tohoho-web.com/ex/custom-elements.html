<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8"utf-8">
<title>ã‚«ã‚¹ã‚¿ãƒ è¦ç´ (Custom Elements) - ã¨ã»ã»ã®WWWå…¥é–€</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<link rel="stylesheet" href="../style3.css" tppabs="http://www.tohoho-web.com/style3.css">
</head>
<body>
<h2>ã‚«ã‚¹ã‚¿ãƒ è¦ç´ (Custom Elements)</h2>
<a href="../www.htm" tppabs="http://www.tohoho-web.com/www.htm">ãƒˆãƒƒãƒ—</a> &gt;
<a href="../wwwxx.htm" tppabs="http://www.tohoho-web.com/wwwxx.htm">ã‚¢ãƒ©ã‚«ãƒ«ãƒˆ</a> &gt;
ã‚«ã‚¹ã‚¿ãƒ è¦ç´ (Custom Elements)

<h4>æ¦‚è¦</h4>
<div class=i>
<p>ã‚«ã‚¹ã‚¿ãƒ è¦ç´ (custom elements)ã¯ã€<a href="web-components.html" tppabs="http://www.tohoho-web.com/ex/web-components.html">Webã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ(Web Components)</a> ã¨å‘¼ã°ã‚Œã‚‹æŠ€è¡“ç¾¤ã®ã²ã¨ã¤ã§ã™ã€‚JavaScript ã‚’ç”¨ã„ã¦ç‹¬è‡ªã®è¦ç´ ã‚’å®šç¾©ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<p>ã‚«ã‚¹ã‚¿ãƒ è¦ç´ ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã¯ã€document.registerElement() ã‚’ç”¨ã„ã‚‹ v0 ã¨ã€window.customElements() ã‚’ç”¨ã„ã‚‹ v1 ãŒã‚ã‚Šã¾ã™ãŒã€ã“ã“ã§ã¯ã€æ–°ã—ã„ v1 ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚Chrome 59 ã‚„ Opera 47 ãªã©ã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚</p>
<p>ã‚«ã‚¹ã‚¿ãƒ è¦ç´ ã«ã¯ã€æ–°è¦ã®è¦ç´ ã‚’å®šç¾©ã™ã‚‹ã€Œè‡ªå¾‹ã‚«ã‚¹ã‚¿ãƒ è¦ç´ ã€ã¨ã€æ—¢å­˜ã®è¦ç´ ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹ã€Œã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãƒ‰ãƒ“ãƒ«ãƒˆã‚¤ãƒ³è¦ç´ ã€ãŒã‚ã‚Šã¾ã™ã€‚</p>
<p>ã‚«ã‚¹ã‚¿ãƒ è¦ç´ åã¯ã€æ¨™æº–ã®è¦ç´ åã¨ã®é‡è¤‡ã‚’é¿ã‘ã‚‹ãŸã‚ã«ã€å¿…ãšãƒã‚¤ãƒ•ãƒ³(-)ã‚’å«ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p>
</div>

<h4>è‡ªå¾‹ã‚«ã‚¹ã‚¿ãƒ è¦ç´ (autonomous custom element)</h4>
<div class=i>
<p>ä¸‹è¨˜ã¯ã€name å±æ€§ã®å€¤ã«å¿œã˜ã¦ ã€ŒHello, {nameå±æ€§}!ã€ã¨è¡¨ç¤ºã™ã‚‹æ–°è¦ã®ã‚«ã‚¹ã‚¿ãƒ è¦ç´  &lt;hello-element&gt; ã‚’å®šç¾©ã—ã¦ã„ã¾ã™ã€‚</p>
<div class="title-tab">HTML</div>
<pre class="c2">
&lt;script&gt;
class HelloElement extends HTMLElement {
  // ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿
  // å¿…ãšè¦ªã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ super() ã‚’å‘¼ã³å‡ºã™ã“ã¨ã€‚
  // å±æ€§å€¤ _name ã‚’åˆæœŸåŒ–
  constructor() {
    super();
    this._name = null;
  }

  // ç›£è¦–ã™ã‚‹å±æ€§åã®ãƒªã‚¹ãƒˆã‚’è¿”å´ã™ã‚‹
  static get observedAttributes() {
    return ["name"];
  }

  // ç›£è¦–ã™ã‚‹å±æ€§ãŒè¨­å®šãƒ»å¤‰æ›´ã•ã‚ŒãŸéš›ã«å‘¼ã³å‡ºã•ã‚Œã‚‹
  // _name å±æ€§ã‚’å¤‰æ›´ã—ã€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹
  attributeChangedCallback(name, oldValue, newValue) {
    this._name = newValue;
    this._updateRendering();
  }

  // è¦ç´ ãŒæŒ¿å…¥ã•ã‚ŒãŸéš›ã«å‘¼ã³å‡ºã•ã‚Œã‚‹
  connectedCallback() {
    this._updateRendering();
  }

  // nameå±æ€§ã®ã‚²ãƒƒã‚¿ãƒ¼
  get name() {
    return this._name;
  }

  // nameå±æ€§ã®ã‚»ãƒƒã‚¿ãƒ¼
  set name(v) {
    this.setAttribute("name", v);
  }

  // ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
  // Hello, {nameå±æ€§}! ã¨è¡¨ç¤ºã™ã‚‹
  _updateRendering() {
    this.textContent = 'Hello, ' + this._name + '!';
  }
}

// ä¸Šè¨˜ã§å®šç¾©ã—ãŸã‚¯ãƒ©ã‚¹ã‚’ç”¨ã„ã¦ã€ã‚«ã‚¹ã‚¿ãƒ è¦ç´  &lt;hello-element&gt; ã‚’å®šç¾©ã™ã‚‹
customElements.define("hello-element", HelloElement);
&lt;/script&gt;

// ã‚«ã‚¹ã‚¿ãƒ è¦ç´ ã‚’ä½¿ç”¨ã™ã‚‹
&lt;hello-element name="Tanaka"&gt;&lt;/hello-element&gt;
</pre>
<div class="title-tab">è¡¨ç¤º</div>
<div class="c2">
<script>
class HelloElement extends HTMLElement {
  constructor() {
    super();
    this._name = null;
  }
  static get observedAttributes() {
    return ["name"];
  }
  attributeChangedCallback(name, oldValue, newValue) {
    this._name = newValue;
    this._updateRendering();
  }
  connectedCallback() {
    this._updateRendering();
  }
  get name() {
    return this._name;
  }
  set name(v) {
    this.setAttribute("name", v);
  }
  _updateRendering() {
    this.textContent = 'Hello, ' + this._name + '!';
  }
}
customElements.define("hello-element", HelloElement);
</script>
<hello-element name="Tanaka"></hello-element>
</div>
</div>

<h4>ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãƒ‰ãƒ“ãƒ«ãƒˆã‚¤ãƒ³è¦ç´ (customized built-in element)</h4>
<div class=i>
<p>ã‚«ã‚¹ã‚¿ãƒ è¦ç´ ã¯æ–°è¦ã«ä½œæˆã™ã‚‹ä»–ã€æ—¢å­˜ã®è¦ç´ ã‚’æ‹¡å¼µã—ã¦ä½œæˆã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚ä¸‹è¨˜ã®ä¾‹ã§ã¯ã€æ—¢å­˜ã® button è¦ç´ ã«å¯¾ã—ã¦ã€plastic-button ã¨ã„ã†ã‚«ã‚¹ã‚¿ãƒ åŠ¹æœã‚’åŠ ãˆã¦ã„ã¾ã™ã€‚</p>
<div class="title-tab">HTML</div>
<pre class="c2">
&lt;script&gt;
class PlasticButton extends HTMLButtonElement {
  constructor() {
    super();
    this.addEventListener("click", () =&gt; {
      // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãªã©ã®åŠ¹æœã‚’è¨˜è¿°ã™ã‚‹
    });
  }
}
customElements.define("plastic-button", PlasticButton, { extends: "button" });
&lt;script&gt;

&lt;button is="plastic-button"&gt;Click Me!&lt;/button&gt;
</pre>
</div>

<h4>é–¢é€£</h4>
<div class=i>
<a href="web-components.html" tppabs="http://www.tohoho-web.com/ex/web-components.html">Webã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</a>,
<a href="shadow-dom.html" tppabs="http://www.tohoho-web.com/ex/shadow-dom.html">Shadow DOM</a>,
<a href="html-imports.html" tppabs="http://www.tohoho-web.com/ex/html-imports.html">HTMLã‚¤ãƒ³ãƒãƒ¼ãƒˆ</a>,
<a href="html-template.html" tppabs="http://www.tohoho-web.com/ex/html-template.html">HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</a>
</div>

<h4>ãƒªãƒ³ã‚¯</h4>
<div class=i>
<ul>
<li><a target="_top" href="javascript:if(confirm('https://html.spec.whatwg.org/multipage/custom-elements.html  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://html.spec.whatwg.org/multipage/custom-elements.html'" tppabs="https://html.spec.whatwg.org/multipage/custom-elements.html">https://html.spec.whatwg.org/multipage/custom-elements.html</a>
<li><a target="_top" href="javascript:if(confirm('https://www.w3.org/TR/custom-elements/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.w3.org/TR/custom-elements/'" tppabs="https://www.w3.org/TR/custom-elements/">https://www.w3.org/TR/custom-elements/</a>
<li><a target="_top" href="javascript:if(confirm('https://w3c.github.io/webcomponents/spec/custom/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://w3c.github.io/webcomponents/spec/custom/'" tppabs="https://w3c.github.io/webcomponents/spec/custom/">https://w3c.github.io/webcomponents/spec/custom/</a>
</ul>
</div>

<hr>
<div>Copyright (C) 2017 æœç”«ã€…</div>
<div>åˆç‰ˆ:2017å¹´11æœˆ19æ—¥ æœ€çµ‚æ›´æ–°:2017å¹´11æœˆ19æ—¥</div>
<div>http://www.tohoho-web.com/ex/custom-elements.html</div>
</body>
</html>
