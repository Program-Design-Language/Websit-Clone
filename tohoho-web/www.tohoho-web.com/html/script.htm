<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>&lt;script&gt; - スクリプト - とほほのWWW入門</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<link rel="stylesheet" href="../style3.css" tppabs="http://www.tohoho-web.com/style3.css">
</head>
<body>
<h2>&lt;script&gt; - スクリプト</h2>
<a href="../www.htm" tppabs="http://www.tohoho-web.com/www.htm">トップ</a> &gt;
<a href="index.htm" tppabs="http://www.tohoho-web.com/html/index.htm">HTMLリファレンス</a> &gt;
&lt;script&gt;

<h4>概要</h4>
<div class=i>
<dl class="htmlelem">
<dt><a href="memo/intro.htm#Form" tppabs="http://www.tohoho-web.com/html/memo/intro.htm#Form">形式</a></dt>
<dd>&lt;script&gt;～&lt;/script&gt;</dd>
<dt><a href="memo/intro.htm#Support" tppabs="http://www.tohoho-web.com/html/memo/intro.htm#Support">サポート</a></dt>
<dd><em>LS</em> / H3 / e3 / Ch1 / Fx1 / Sa1 / Op1 / N2</dd>
<dt><a href="memo/html5.htm#category" tppabs="http://www.tohoho-web.com/html/memo/html5.htm#category">カテゴリ</a></dt>
<dd><a href="memo/html5.htm#metadata" tppabs="http://www.tohoho-web.com/html/memo/html5.htm#metadata">メタデータコンテンツ</a></dd>
<dd><a href="memo/html5.htm#flow" tppabs="http://www.tohoho-web.com/html/memo/html5.htm#flow">フローコンテンツ</a></dd>
<dd><a href="memo/html5.htm#phrasing" tppabs="http://www.tohoho-web.com/html/memo/html5.htm#phrasing">フレージングコンテンツ</a></dd>
<dd><a href="memo/html5.htm#script_supporting" tppabs="http://www.tohoho-web.com/html/memo/html5.htm#script_supporting">スクリプトサポート要素</a></dd>
<dt><a href="memo/html5.htm#category" tppabs="http://www.tohoho-web.com/html/memo/html5.htm#category">親要素</a></dt>
<dd><a href="memo/html5.htm#metadata" tppabs="http://www.tohoho-web.com/html/memo/html5.htm#metadata">メタデータコンテンツ</a>, <a href="memo/html5.htm#phrasing" tppabs="http://www.tohoho-web.com/html/memo/html5.htm#phrasing">フレージングコンテンツ</a>, <a href="memo/html5.htm#script_supporting" tppabs="http://www.tohoho-web.com/html/memo/html5.htm#script_supporting">スクリプトサポート要素</a> を子要素に持てるもの</dd>
<dt><a href="memo/html5.htm#category" tppabs="http://www.tohoho-web.com/html/memo/html5.htm#category">子要素</a></dt>
<dd>src 属性がない場合: type 属性の値に従い、スクリプトコンテキストの制約に合致したもの。</dd>
<dd>src 属性がある場合: 空、もしくは、スクリプトコンテキストの制約に合致したスクリプト文書。</dd>
<dt><a href="memo/intro.htm#Optional" tppabs="http://www.tohoho-web.com/html/memo/intro.htm#Optional">タグの省略</a></dt>
<dd>開始タグ:必須 / 終了タグ:必須</dd>
<dt><a href="memo/attr.htm" tppabs="http://www.tohoho-web.com/html/memo/attr.htm">属性</a></dt>
<dd><a href="attr/globals.htm" tppabs="http://www.tohoho-web.com/html/attr/globals.htm">グローバル属性</a></dd>
<dd><a href="#src">src</a></dd>
<dd><a href="#type">type</a></dd>
<dd><a href="#module">module</a></dd>
<dd><a href="#async">async</a></dd>
<dd><a href="#defer">defer</a></dd>
<dd><a href="#crossorigin">crossorigin</a></dd>
<dd><a href="#integrity">integrity</a></dd>
</dl>
</div>

<h4>説明</h4>
<div class=i>
<p>&lt;script&gt; は、JavaScript などのスクリプトを記述するために用います。</p>
<p>主に JavaScript を実行するために使用されますが、VBScript など別のスクリプトも実行可能です。</p>
<p>JavaScript に関する詳細は「<a href="../js/index.htm" tppabs="http://www.tohoho-web.com/js/index.htm">とほほのJavaScriptリファレンス</a>」などを参照してください。</p>
</div>

<h4>属性</h4>
<div class=i>
<dl class="htmlattr">
<dt><a href="attr/globals.htm" tppabs="http://www.tohoho-web.com/html/attr/globals.htm">グローバル属性</a></dt>
<dd>詳細は <a href="attr/globals.htm" tppabs="http://www.tohoho-web.com/html/attr/globals.htm">グローバル属性</a> を参照してください。</dd>
<dt id="type"><a href="#type">type</a>=<i>type</i></dt>
<dd><em>LS</em>/H4/e4/Ch/Fx/Sa/Op/N4</dd>
<dd>スクリプトの言語を type="text/javascript" のような MIMEタイプで指定します。HTML4.01では必須の属性として定義されていましたが、HTML5 では省略時は type="text/javascript" とみなされるようになりました。</dd>
<dt id="src"><a href="#src">src</a>=<i><a href="attr/url.htm" tppabs="http://www.tohoho-web.com/html/attr/url.htm">url</a></i></dt>
<dd><em>LS</em>/H4/e4/Ch/Fx/Sa/Op/N3</dd>
<dd>外部スクリプトファイルのURLを指定します。詳細は後述の <a href="#attr_src">外部スクリプトファイル</a> を参照してください。</dd>
<dt id="async"><a href="#async_defer">async</a></dt>
<dd><em>LS</em>/H5/Ch/Ed/Fx/e/Op/Sa</dd>
<dd>スクリプトを非同期に読み込み・実行します。詳細は後述。</dd>
<dt id="defer"><a href="#async_defer">defer</a></dt>
<dd><em>LS</em>/H4/Ch/Ed/Fx3.5/e10/Sa</dd>
<dd>スクリプトを非同期に読み込みます。詳細は後述。</dd>
<dt id="module"><a href="#nomodule">nomodule</a></dt>
<dd><em>LS</em>/Ch/Fx</dd>
<dd>ES6 modules に対応していないブラウザに対するスクリプトを実行する場合に指定します。ES6 modules 対応ブラウザではこのスクリプトの実行を抑制します。詳細は後述の <a href="#attr_module">ES6 modules</a> を参照してください。</dd>
<dt id="crossorigin"><a href="attr/crossorigin.htm" tppabs="http://www.tohoho-web.com/html/attr/crossorigin.htm">crossorigin</a>=<i>state</i></dt>
<dd><em>LS</em>/H5</dd>
<dd>CORS(Cross-Origin Resource Sharing)で使用される属性で、他のサイトのリソースにアクセスする際に、認証情報を使用するかどうかを指定します。</dd>
<dt id="integrity"><a href="#integrity">integrity</a></dt>
<dd><em>LS</em>/Ch45/Fx43</dd>
<dd>スクリプト改竄チェックで使用されるハッシュ値を指定します。詳細は後述の <a href="#attr_integrity">スクリプト改竄チェック</a> を参照してください。</dd>
<dt>charset=<i>charset</i></dt>
<dd><em>H4</em></dd>
<dd>スクリプトのキャラクタセットを指定します。<a href="memo/htmlls.htm" tppabs="http://www.tohoho-web.com/html/memo/htmlls.htm">HTML Living Standard</a> には採用されていません。</dd>
<dt><a href="attr/nonce.htm" tppabs="http://www.tohoho-web.com/html/attr/nonce.htm">nonce</a>=<i>nonce</i></dt>
<dd><em>H5.1</em></dd>
<dd>CPS(Content Security Policy)チェックで用いられるワンタイムトークンを指定します。</dd>
<dt><a href="#language">language</a>=<i>lang</i></dt>
<dd><em>[非推奨]</em> H4T-4T/e2/N2</dd>
<dd>スクリプト言語を指定します。現在では type属性を使用することが推奨されています。</dd>
<dt>event=<i>event</i></dt>
<dd><em>[非推奨]</em> H4-4/e4</dd>
<dd>将来の機能のために予約されていましたが、HTML5 では廃止されました。</dd>
<dt>for=<i>id</i></dt>
<dd><em>[非推奨]</em> H4-4/e3</dd>
<dd>将来の機能のために予約されていましたが、HTML5 では廃止されました。</dd>
</dl>
</div>

<h4>スクリプトの実行(&lt;script&gt;～&lt;/script&gt;)</h4>
<div class=i>
<p>&lt;script&gt;～&lt;/script&gt; の間にスクリプトを記述します。スクリプトは通常 JavaScript を記述します。</p>
<div class="title-tab">HTML</div>
<pre class=c2>
<em>&lt;script&gt;</em>
alert("Hello world!");
<em>&lt;/script&gt;</em>
</pre>
</div>

<h4>スクリプトのコメント化(&lt;!-- ... // --&gt;)</h4>
<div class=i>
<p>以前は、スクリプトに対応していないブラウザのために、スクリプトを下記の様に HTML のコメントとして記述していました。現在は、&lt;script&gt; に対応していないブラウザは皆無のため、コメント化しないことが多くなりました。</p>
<div class="title-tab">HTML</div>
<pre class=c2>
&lt;script&gt;
<em>&lt;!--</em>
alert("Hello world!");
<em>// --&gt;</em>
&lt;/script&gt;
</pre>
</div>

<h4 id="attr_type">スクリプト種別(type)</h4>
<div class=i>
<p><b>type</b> 属性でスクリプト種別を指定します。HTML 4.01 では type 属性は必須とされていましたが、HTML5 では省略時は "text/javascript" とみなされるようになりました。JavaScript 以外の言語を使用する場合に type 属性を指定します。例えば、IE3～IE10 でサポートされていた VBScript(text/vbscript) を用いるには次のようにします。</p>
<div class="title-tab">HTML</div>
<pre class=c2>
&lt;script <em>type="text/vbscript"</em>&gt;
msgbox "Hello world!"
&lt;/script&gt;
</pre>
<p>VBScript は IE11 で基本的には廃止されました。IE11 で VBScript を動かすためにはヘッダ部に下記を記述する必要があります。</p>
<div class="title-tab">HTML</div>
<pre class=c2>
&lt;meta http-equiv="x-ua-compatible" content="IE=10"&gt;
</pre>
</div>

<h4 id="attr_src">外部スクリプトファイル(src)</h4>
<div class=i>
<p><b>src</b> 属性を用いると、JavaScript ファイルを外部ファイルで記述することができます。例えば、sample.js ファイルに下記の内容を記述しておきます。&lt;script&gt; は不用です。</p>
<div class="title-tab">sample.js</div>
<pre class=c2>
alert("Hello!!");
</pre>
<p>これを、HTMLファイルから下記のように呼び出します。</p>
<div class="title-tab">HTML</div>
<pre class=c2>
&lt;script <em>src="sample.js"</em>&gt;&lt;/script&gt;
</pre>
</div>

<h4 id="async_defer">スクリプトの非同期読み込み(async, defer)</h4>
<div class=i>
<p>通常は、HTML のパース中にスクリプトの読み込みが指定されると、ブラウザは HTML の解析を中断し、スクリプトを読み込み、実行し、その後、HTML の解析を再開します。</p>
<div class="title-tab">HTML</div>
<pre class=c2>
&lt;script src="sample.js"&gt;&lt;/script&gt;
</pre>
<p><b>async</b> 属性を指定すると、HTML の解析と、スクリプトの読み込み・実行を非同期に平行して行います。</p>
<div class="title-tab">HTML</div>
<pre class=c2>
&lt;script <em>async</em> src="sample.js"&gt;&lt;/script&gt;
</pre>
<p><b>defer</b> 属性を指定すると、HTML の解析と、スクリプトの読み込みを非同期に平行しておこないますが、スクリプトの実行は、HTML の解析が完了した後で行われます。</p>
<div class="title-tab">HTML</div>
<pre class=c2>
&lt;script <em>defer</em> src="sample.js"&gt;&lt;/script&gt;
</pre>
<p>async や defer を指定した外部スクリプトは、その実行順序が保障されなくなるため、依存関係のあるライブラリに async や defer を指定することはできません。また、async や defer を指定した外部スクリプトでは、document.write() など、レンダリングに影響のある記述を用いてはなりません。</p>
</div>

<h4 id="nonce">コンテンツセキュリティポリシー(nonce)</h4>
<div class=i>
<p><b>nonce</b> は HTML5.1 で追加された属性で、Web ページ上に悪意を持って埋め込まれたスクリプトの実行を抑制するために用いられます。例えば、HTTP のレスポンスに下記の様な HTTP ヘッダが付与されていたとします。</p>
<div class="title-tab">HTTPヘッダ</div>
<pre class="c2">
Content-Security-Policy: script-src 'nonce-hUygTfgbgFcdRt5eDqpLfB6f==' 'strict-dynamic'
</pre>
<p>この場合、下記の HTML コードがある場合、正規のスクリプトは実行されますが、正当な nonce 値を持たない悪意のあるスクリプトは実行されません。</p>
<div class="title-tab">HTML</div>
<pre class="c2">
&lt;article&gt;
  ～悪意のある書き込み～
  &lt;script&gt;悪意のあるスクリプト&lt;/script&gt;
  ～悪意のある書き込み～
&lt;/article&gt;
&lt;script <em>nonce="hUygTfgbgFcdRt5eDqpLfB6f=="</em>&gt;正規のスクリプト&lt;/script&gt;
</pre>
</div>

<h4 id="attr_integrity">スクリプト改竄チェック(integrity)</h4>
<div class=i>
<p><b>integrity</b> 属性は、CDN などの中継サーバにおけるスクリプトの改竄をチェックするために用いられます。まず、スクリプトファイルの SHA-384 ハッシュ値を求めます。</p>
<div class="title-tab">Linux</div>
<pre class="c2">
$ cat sample.js | openssl dgst -sha384 -binary | openssl enc -base64 -A
DAPiLw1y9MaVlqwm9UKKTFNXrbtWUdW5Gwh8Zd8uWrccOb+zap1l8sjnv0QEfaGM
</pre>
<p>このハッシュ値を下記の様に指定します。</p>
<div class="title-tab">HTML</div>
<pre class="c2">
&lt;script
  src="./sample.js"
  <em>integrity="sha384-DAPiLw1y9MaVlqwm9UKKTFNXrbtWUdW5Gwh8Zd8uWrccOb+zap1l8sjnv0QEfaGM"</em>
  crossorigin="anonymous"&gt;&lt;/script&gt;
</pre>
<p>ブラウザは、integrity 属性が指定されている場合、ダウンロードしたスクリプトファイルのハッシュ値と integrity 属性の値を比較し、スクリプトの改竄が無いかチェックします。</p>
</div>

<h4 id="attr_nomodule">ES6 modules(nomodule)</h4>
<div class=i>
<p>ES6(ES2015/ECMAScript 2015) では、ES6 modules と呼ばれる機能が追加されました。PHP の require、Python の import などと同様、import / export で他のスクリプトファイルを読み込むことが可能です。ただし、この機能を用いると、ES6 modules に対応していないブラウザではエラーとなってしまいます。この問題を解決するために、<b>type="module"</b> と <b>nomodule</b> 属性を使用します。</p>
<p>ES6 modules 対応ブラウザのために、export / import を使用した sample-module.js を用意します。ES6 modules 未対応ブラウザのために、読み込むライブラリをすべて展開した sample-classic.js (効率が悪い)を用意します。これらを下記の様に読み込みます。ES6 modules 未対応ブラウザは nomodule 属性を無視し、sample-classic.js を読み込みますが、type="module" は未サポート言語のため sample-module.js は読み込みません。ES6 modules 対応ブラウザは nomodule 属性が指定された sample-classic.js は読み込まず、type="module" が指定された sample-module.js のみを読み込みます。</p>
<div class="title-tab">HTML</div>
<pre class="c2">
&lt;script <em>nomodule</em> src="sample-classic.js"&gt;&lt;/script&gt;
&lt;script <em>type="module"</em> src="sample-module.js"&gt;&lt;/script&gt;
</pre>
</div>

<h4 id="language">スクリプト言語(language)</h4>
<div class=i>
<p>language 属性には、使用する言語とそのバージョンを指定しするのに用いられていました。HTML5 には採用されておらず、非推奨の属性です。</p>
<table class="tb1">
<tr class=at><th rowspan=2>値</th><th colspan=4>IE</th><th colspan=4>Netscape</th></tr>
<tr class=at><th>2.0</th><th>3.0</th><th>4.0</th><th>5.0</th><th>2.0</th><th>3.0</th><th>4.0<br>～<br>4.05</th><th>4.06<br>4.5</th></tr>
<tr><td>language="JavaScript"</td><td>×</td><td>○</td><td>○</td><td>○</td><td>○</td><td>○</td><td>○</td><td>○</td></tr>
<tr><td>language="JavaScript1.0"</td><td>×</td><td>×</td><td>×</td><td>×</td><td>×</td><td>×</td><td>×</td><td>×</td></tr>
<tr><td>language="JavaScript1.1"</td><td>×</td><td>×</td><td>○</td><td>○</td><td>×</td><td>○</td><td>○</td><td>○</td></tr>
<tr><td>language="JavaScript1.2"</td><td>×</td><td>×</td><td>○</td><td>○</td><td>×</td><td>×</td><td>○</td><td>○</td></tr>
<tr><td>language="JavaScript1.3"</td><td>×</td><td>×</td><td>○</td><td>○</td><td>×</td><td>×</td><td>×</td><td>○</td></tr>
<tr><td>language="Jscript"</td><td>×</td><td>？</td><td>○</td><td>○</td><td>×</td><td>×</td><td>×</td><td>×</td></tr>
<tr><td>language="VBScript"</td><td>×</td><td>○</td><td>○</td><td>○</td><td>×</td><td>×</td><td>×</td><td>×</td></tr>
<tr><td>language="VBS"</td><td>×</td><td>？</td><td>○</td><td>○</td><td>×</td><td>×</td><td>×</td><td>×</td></tr>
</table>
</div>

<h4>関連項目</h4>
<div class=i>
<a href="noscript.htm" tppabs="http://www.tohoho-web.com/html/noscript.htm">&lt;noscript&gt;</a>
</div>

<h4>リンク</h4>
<div class=i>
<ul>
<li><a target="_top" href="javascript:if(confirm('https://html.spec.whatwg.org/multipage/web-components.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://html.spec.whatwg.org/multipage/web-components.html#the-script-element'" tppabs="https://html.spec.whatwg.org/multipage/scripting.html#the-script-element">https://html.spec.whatwg.org/multipage/scripting.html#the-script-element</a>
<li><a target="_top" href="javascript:if(confirm('https://www.w3.org/TR/html52/canvas.htm  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://www.w3.org/TR/html52/canvas.htm#elementdef-script'" tppabs="https://www.w3.org/TR/html52/semantics-scripting.html#elementdef-script">https://www.w3.org/TR/html52/semantics-scripting.html#elementdef-script</a>
<li><a target="_top" href="javascript:if(confirm('https://www.w3.org/TR/html51/canvas.htm  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://www.w3.org/TR/html51/canvas.htm#elementdef-script'" tppabs="https://www.w3.org/TR/html51/semantics-scripting.html#elementdef-script">https://www.w3.org/TR/html51/semantics-scripting.html#elementdef-script</a>
<li><a target="_top" href="javascript:if(confirm('https://www.w3.org/TR/2014/REC-html5-20141028/xmp.htm  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://www.w3.org/TR/2014/REC-html5-20141028/xmp.htm#the-script-element'" tppabs="https://www.w3.org/TR/2014/REC-html5-20141028/scripting-1.html#the-script-element">https://www.w3.org/TR/2014/REC-html5-20141028/scripting-1.html#the-script-element</a>
<li><a target="_top" href="javascript:if(confirm('https://www.w3.org/TR/html401/interact/shadow-dom.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://www.w3.org/TR/html401/interact/shadow-dom.html#edef-SCRIPT'" tppabs="https://www.w3.org/TR/html401/interact/scripts.html#edef-SCRIPT">https://www.w3.org/TR/html401/interact/scripts.html#edef-SCRIPT</a>
<li><a target="_top" href="javascript:if(confirm('https://developer.mozilla.org/ja/docs/Web/HTML/Element/custom-elements.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://developer.mozilla.org/ja/docs/Web/HTML/Element/custom-elements.html'" tppabs="https://developer.mozilla.org/ja/docs/Web/HTML/Element/script">https://developer.mozilla.org/ja/docs/Web/HTML/Element/script</a>
<li><a target="_top" href="javascript:if(confirm('https://caniuse.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://caniuse.com/#search=HTML4%20elements'" tppabs="https://caniuse.com/#search=HTML4%20elements">https://caniuse.com/#search=HTML4%20elements</a>
</ul>
</div>

<hr>
<div>Copyright (C) 1996-2017 杜甫々</div>
<div>初版:1996年9月10日 最終更新:2017年12月31日</div>
<div>http://www.tohoho-web.com/html/script.htm</div>
</body>
</html>
