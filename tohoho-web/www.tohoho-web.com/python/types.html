<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>とほほのPython入門 - 数値・文字列・型 - とほほのWWW入門</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<link rel="stylesheet" href="../style3.css" tppabs="http://www.tohoho-web.com/style3.css">
</head>
<body>
<h2>とほほのPython入門 - 数値・文字列・型</h2>
<a href="../www.htm" tppabs="http://www.tohoho-web.com/www.htm">トップ</a> &gt;
<a href="index.html" tppabs="http://www.tohoho-web.com/python/index.html">Python入門</a> &gt;
数値・文字列・型

<h4 id="int">整数(int)</h4>
<div class=i>
<p><b>整数</b>(<b>int</b>)は下記の様に記述します。</p>
<div class="tab">Python</div>
<pre class=c2>
num = <em>1234</em>        # 正の整数
</pre>
<p><b>0o</b>(<b>0O</b>), <b>0x</b>(<b>0X</b>), <b>0b</b>(<b>0B</b>) はそれぞれ、8進数、16進数、2進数を意味します。</p>
<div class="tab">Python</div>
<pre class=c2>
num = <em>0o777</em>        #  8進数 (0oで始まる数値は 8進数とみなされる)
num = <em>0xffff</em>       # 16進数 (0xで始まる数値は16進数とみなされる)
num = <em>0b11000100</em>   #  2進数 (0bで始まる数値は 2進数とみなされる)
</pre>
</div>

<h4 id="long">長整数(long)</h4>
<div class=i>
<p><b>長整数</b>(<b>long</b>)は、整数(int)を超える桁数の整数を扱います。末尾に <b>l</b> か <b>L</b> をつけますが、l は 1 と間違えやすいので L を使うのがよいでしょう。整数(int)の最大値(sys.maxint)はシステムにより異なり、2<sup>31</sup>-1 だったり 2<sup>63</sup>-1 だったりします。</p>
<div class="tab">Python</div>
<pre class=c2>
num = <em>9223372036854775808L</em>
</pre>
<p>長整数は、メモリが許す限り桁数に制限はなく、長整数同士の演算では計算誤差も生じません。</p>
<div class="tab">Python</div>
<pre class=c2>
num = 1234567890123456789012345678901234567890123456789012345678901234567890L
</pre>
<p>Python 3 では、整数(int) と長整数(long)は統合され、すべて整数(int)として扱われるようになり、<b>L</b> や <b>l</b> も廃止されました。</p>
<div class="tab">Python</div>
<pre class=c2>
num = 123L       # Python 3 ではエラー(SyntaxError例外)
</pre>
</div>

<h4 id="float">浮動小数点数(float)</h4>
<div class=i>
<p><b>浮動少数点数</b>(<b>float</b>)は下記の様に記述します。<b>e</b>2 は 10の2乗を意味します。</p>
<div class="tab">Python</div>
<pre class=c2>
num = <em>1.234</em>     # 浮動小数点数
num = <em>1.2e3</em>     # 浮動小数点数(指数表記) 1.2 × 10<sup><small>3</small></sup>
num = <em>1.2E-3</em>    # 浮動小数点数(指数表記) 1.2 × 10<sup><small>-3</small></sup>
</pre>
</div>

<h4 id="complex">虚数(complex)</h4>
<div class=i>
<p><b>虚数</b>(<b>complex</b>)には <b>j</b> または <b>J</b> をつけます。</p>
<div class="tab">Python</div>
<pre class=c2>
num = <em>3.14j</em>
</pre>
</div>

<h4 id="bool">論理値(bool)</h4>
<div class=i>
<p><b>論理値</b>(<b>bool</b>)は、<b>True</b> または <b>False</b> で表します。最初の1文字は大文字で記述します。</p>
<div class="tab">Python</div>
<pre class=c2>
bool = <em>True</em>
bool = <em>False</em>
</pre>
<p>Python では、False、数値の 0 や 0.0、空文字("")、空リスト([])、空タプル(())、空辞書({})などを偽とみなし、それ以外を真とみなします。</p>
</div>

<h4 id="str">文字列(str)</h4>
<div class=i>
<p>文字列(<b>str</b>)は、ダブルクォート(<b>"</b>)、またはシングルクォート(<b>'</b>)で囲みます。</p>
<div class="tab">Python</div>
<pre class=c2>
str = <em>"Hello world"</em>
str = <em>'Hello world'</em>
</pre>
<p>"..." の中では ' を、'...' の中では " を使うことができます。"..." の中で " を、'...' の中で ' を使用するには、バックスラッシュ(\)を用いて引用符をエスケープ(無効化)します。</p>
<div class="tab">Python</div>
<pre class=c2>
str = "We can use <em>\"</em> in the string."
str = 'We can use <em>\'</em> in the string.'
</pre>
<p>バックスラッシュ(<b>\</b>)を用いることで、複数行に分けることができます。</p>
<div class="tab">Python</div>
<pre class=c2>
str = 'Hello <em>\</em>
world!'
</pre>
<p>"..." や '...' の前に <b>r</b> または <b>R</b> をつけると、後述するエスケープシーケンスが無視されます。</p>
<div class="tab">Python</div>
<pre class=c2>
str = 'aaa\nbbb'        # \n は改行とみなされる
str = <em>r</em>'aaa\nbbb'       # \n はバックスラッシュ(\)と小文字nとみなされる
</pre>
<p>三重クォート <b>"""..."""</b> や <b>'''...'''</b> は、複数行にまたがった文字列を記述することができます。三重クォートはしばしば、複数行のコメントとして利用されることがあります。</p>
<div class="tab">Python</div>
<pre class=c2>
str = <em>"""</em>A simple example module
This module is ...
<em>"""</em>
</pre>
<p>複数の文字列をスペースで区切ることで、連結することができます。</p>
<div class="tab">Python</div>
<pre class=c2>
print <em>'Hello ' 'world!'</em>
</pre>
</div>

<h4 id="unicode_bytes">Unicode文字列(unicode)とバイト列(bytes)</h4>
<div class=i>
<p>Python 2 では、日本語など ASCII 以外の文字を扱うには、u"..." や u'...' を用いた <b>Unicode文字列</b>(<b>unicode</b>) とする必要がありました。</p>
<div class="tab">Python</div>
<pre class=c2>
# Python 2
len = len(<em>u</em>'あいうえお')       # ちゃんと5文字として数えられる
len = len('あいうえお')        # Unicodeに対応していないため15文字と数えられる
</pre>
<p>Python 3.0 では u が廃止され、"..." や '...' が Unicodeも扱える文字列(str)を示すようになりました。代わりにバイト列(bytes)を示す b"..." がサポートされました。Python 3.3 では互換性考慮のため u"..." が文字列(str)として復活しました。Python 2 では b"..." は文字列(str)として扱います。</p>
<table class="tb1">
  <tr>
    <th style="width:25%"></th>
    <th style="width:25%">"..."<br>'...'</th>
    <th style="width:25%">u"..."<br>u'...'</th>
    <th style="width:25%">b"..."<br>b'...'</th>
  </tr>
  <tr>
    <th>Python 2.x</th>
    <td>文字列(str)</td>
    <td>Unicode文字列(unicode)</td>
    <td>文字列(str)</td>
  </tr>
  <tr>
    <th>Python 3.0-3.2</th>
    <td>文字列(str)</td>
    <td>SyntaxError</td>
    <td>バイト列(bytes)</td>
  </tr>
  <tr>
    <th>Python 3.3-</th>
    <td>文字列(str)</td>
    <td>文字列(str)</td>
    <td>バイト列(bytes)</td>
  </tr>
</table>
</div>

<p>Python 3 でバイト列(bytes)とUnicodeを含む文字列(str)を変換するには下記の様にします。</p>
<div class="tab">Python</div>
<pre class=c2>
byte_string = b"\xe3\x81\x82"
utf8_string = byte_string<em>.decode()</em>    <span class="cm">// バイト列から文字列に変換</span>
print(utf8_string)

utf8_string = "あ"
byte_string = utf8_string<em>.encode()</em>    <span class="cm">// 文字列からバイト列に変換</span>
print(byte_string)
</pre>
</div>

<h4 id="sjis_euc_jis">Shift_JIS/EUC/JISとの変換</h4>
<div class=i>
<p>Python 3 では、シフトJIS(Shift_JIS)、Windows版シフトJIS(CP932)、EUC(EUC-JP) や ISO-2022-JP(俗にいうJISコード) などの文字列はバイト列(bytes)として扱います。Unicode文字列(str)とバイト列(bytes)を変換するには下記の様にします。</p>
<div class="tab">Python</div>
<pre class=c2>
<span class="cm"># Unicode文字列からUTF8/SJIS/CP932/EUC/JISバイト列への変換</span>
utf8_str = "あ"
utf8_bytes = utf8_str.<em>encode('utf-8')</em>             <span class="cm"># UTF-8バイト列: b'\xe3\x81\x82'</span>
sjis_bytes = utf8_str.<em>encode('sjis')</em>              <span class="cm"># Shift_JISバイト列: b'\x82\xa0'</span>
cp932_bytes = utf8_str.<em>encode('cp932')</em>            <span class="cm"># CP932バイト列: b'\x82\xa0'</span>
eucjp_bytes = utf8_str.<em>encode('euc_jp')</em>           <span class="cm"># EUC-JPバイト列: b'\xa4\xa2'</span>
jis_bytes = utf8_str.<em>encode('iso2022_jp')</em>         <span class="cm"># ISO-2022-JPバイト列: b'\x1b$B$"\x1b(B'</span>

<span class="cm"># UTF8/SJIS/CP932/EUC/JISバイト列からUnicode文字列への変換</span>
utf8_str = utf8_bytes.<em>decode('utf-8')</em>             <span class="cm"># あ</span>
utf8_str = sjis_bytes.<em>decode('sjis')</em>              <span class="cm"># あ</span>
utf8_str = cp932_bytes.<em>decode('cp932')</em>            <span class="cm"># あ</span>
utf8_str = eucjp_bytes.<em>decode('euc_jp')</em>           <span class="cm"># あ</span>
utf8_str = jis_bytes.<em>decode('iso2022_jp')</em>         <span class="cm"># あ</span>
</pre>
</div>

<h4 id="escape">エスケープシーケンス(\x)</h4>
<div class=i>
<p>文字列の中では、下記のエスケープシーケンスを使用できます。</p>
<div class="tab">エスケープシーケンス</div>
<pre class=c2>
<em>\改行</em> : バックスラッシュと改行が無視される
<em>\\</em> : バックスラッシュ(\)
<em>\'</em> : シングルクォート(')
<em>\"</em> : ダブルクォート(")
<em>\a</em> : ベル(BEL)
<em>\b</em> : バックスペース(BS)
<em>\f</em> : フォームフィード(FF)
<em>\n</em> : 改行(LF)
<em>\r</em> : 復帰(CR)
<em>\t</em> : タブ(TAB)
<em>\v</em> : 垂直タブ(VT)
<em>\<i>nnn</i></em> : 8進表記文字(nは0～7)
<em>\x<i>nn</i></em> : 16進表記文字(nは0～f)
<em>\u<i>xxxx</i></em> : ユニコード文字xxxx (例: u"\u3042")
<em>\U<i>....xxxx</i></em> : ユニコード文字xxxxxxxx (例: U"\U00003042")
<em>\N{name}</em> : Unicodeデータベース文字 (例: u"\N{HIRAGANA LETTER A}")
</pre>
</div>

<h4 id="format">文字列のフォーマット(%)</h4>
<div class=i>
<p><b>%</b> 演算子を用いて、C言語の printf()文に似た記法で、下記の様に文字列を <b>フォーマット</b> することができます。ひとつ目の変数 errmsg の値が %s の箇所に、ふたつ目の変数 errcode の値が %d の箇所に挿入されます。</p>
<div class="tab">Python</div>
<pre class=c2>
errmsg = "Can't open file"
errcode = 19042
msg = <em>"ERROR: %s (%d)" % (errmsg, errcode)</em>
print msg                                    #=&gt; ERROR: Can't open file (19042)
</pre>
<p><b>%s</b> は文字列、<b>%d</b> は整数、<b>%f</b> は浮動小数点数、<b>%x</b> は16進数、<b>%o</b> は8進数、<b>%%</b> は %自身を示します。</p>
<div class="tab">Python</div>
<pre class=c2>
print "%s" % "ABC"          #=&gt; ABC
print "%d" % 123            #=&gt; 123
print "%f" % 1.23           #=&gt; 1.23
print "%x" % 255            #=&gt; ff
print "%o" % 255            #=&gt; 377
print "%%%d" % 80           #=&gt; %80
</pre>
<p>% に続く数値で文字幅や桁数を指定することができます。</p>
<div class="tab">Python</div>
<pre class=c2>
print "|%5s|" % 'ABC'        #=&gt; |  ABC| : 右寄せ5文字分
print "|%-5s|" % 'ABC'       #=&gt; |ABC  | : 左寄せ5文字分
print "|%5d|" % 123          #=&gt; |  123| : 右寄せ5桁
print "|%-5d|" % 123         #=&gt; |123  | : 左寄せ5桁
print "|%+5d|" % 123         #=&gt; | +123| : ±符号付き
print "|%5.2f|" % 1.23       #=&gt; | 1.23| : 全体桁数.少数点以下の桁数
print "|%05d|" % 123         #=&gt; |00123| : 0埋め
</pre>
</div>

<hr>
<div>Copyright(C) 2014-2019 杜甫々</div>
<div>初版：2014年12月30日、最終更新：2019年10月7日</div>
<div>http://www.tohoho-web.com/python/types.html</div>
</body>
</html>

