<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>とほほのPython入門 - リスト・タプル・辞書 - とほほのWWW入門</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<link rel="stylesheet" href="../style3.css" tppabs="http://www.tohoho-web.com/style3.css">
</head>
<body>
<h2>とほほのPython入門 -  リスト・タプル・辞書</h2>
<a href="../www.htm" tppabs="http://www.tohoho-web.com/www.htm">トップ</a> &gt;
<a href="index.html" tppabs="http://www.tohoho-web.com/python/index.html">Python入門</a> &gt;
リスト・タプル・辞書

<h4 id="list">リスト(list)</h4>
<div class=i>
<p><b>[</b>...<b>]</b> で<b>リスト</b>(<b>list</b>)を表します。</p>
<div class="tab">Python</div>
<pre class=c2>
a = <em>[10, 20, 30, 40]</em>
</pre>
<p>下記の様に改行して記述することもできます。最後のカンマ(,)は省略可能です。</p>
<div class="tab">Python</div>
<pre class=c2>
colors = [
    'red',
    'green',
    'blue',
]
</pre>
<p>異なる型の要素のリストを作ることもできます。</p>
<div class="tab">Python</div>
<pre class=c2>
a = [10, 'ABC']
</pre>
<p>リストの要素にアクセスするには <a href="control.html#for" tppabs="http://www.tohoho-web.com/python/control.html#for">for</a> を用います。</p>
<div class="tab">Python</div>
<pre class=c2>
a = [1, 2, 3, 4, 5]
<em>for</em> n <em>in</em> a<em>:</em>
    print n
</pre>
<p><b>[</b>n<b>]</b> で n番目の要素を参照します。最初の要素を 0番目と数えます。</p>
<div class="tab">Python</div>
<pre class=c2>
a = ['A', 'B', 'C', 'D', 'E', 'F', 'G']
a1 = <em>a[0]</em>       # 0番目: 'A'
a2 = <em>a[2]</em>       # 2番目: 'C'
</pre>
<p><b>[</b>n:m<b>]</b> で n番目から m番目の前まで(つまり m - 1番目まで)の要素を参照します。n を省略すると最初から、m を省略すると最後までの要素を参照します。</p>
<div class="tab">Python</div>
<pre class=c2>
a = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
a1 = <em>a[2:4]</em>     # 2番目から3番目: [2, 3]
a2 = <em>a[2:]</em>      # 2番目から最後: [2, 3, 4, 5, 6, 7, 8, 9]
a3 = <em>a[:4]</em>      # 最初から3番目: [0, 1, 2, 3]
</pre>
<p><b>[</b>n:m:s<b>]</b> は s個とばしで参照します。</p>
<div class="tab">Python</div>
<pre class=c2>
a = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
a1 = <em>a[1:8:2]</em>            # 1番目から7番目まで2個とばし: [1, 3, 5, 7]
</pre>
<p>n, m にマイナスの値を指定すると、後ろから数えます。</p>
<div class="tab">Python</div>
<pre class=c2>
a = ['A', 'B', 'C', 'D', 'E', 'F', 'G']
a1 = <em>a[-1]</em>           # 最後の文字 'G'
a2 = <em>a[-3:-1]</em>        # 最後から3番目の文字から最後から1番目の前の文字: ['E', 'F']
</pre>
<p>+ 演算子を用いてリストを結合することができます。</p>
<div class="tab">Python</div>
<pre class=c2>
print [1, 2, 3] <em>+</em> [4, 5, 6]        #=&gt; [1, 2, 3, 4, 5, 6]
</pre>
<p><b>len()</b> を用いてリストの個数を調べます。</p>
<div class="tab">Python</div>
<pre class=c2>
print <em>len([1, 2, 3])</em>           #=&gt; 3
</pre>
<p>リストのリストを作ることも可能です。</p>
<div class="tab">Python</div>
<pre class=c2>
<em>a = [[1, 2], [3, 4], [5, 6]]</em>

for list in a:
    for n in list:
        print n,              #=&gt; 1 2 3 4 5 6
</pre>
</div>

<h4 id="tuple">タプル(tuple)</h4>
<div class=i>
<p><b>(</b>...<b>)</b> で要素を並べたものを<b>タプル</b>(<b>tuple</b>)と呼びます。タプルはリストとほぼ同じように使用できますが、要素を変更できない点が異なります。</p>
<div class="tab">Python</div>
<pre class=c2>
a = <em>(10, 20, 30, 40)</em>
</pre>
<p>要素がひとつだけの時は、最後にカンマ(,)を記述する必要があります。</p>
<div class="tab">Python</div>
<pre class=c2>
a = (10)                # タプルではなく数値の10となる
a = (10,)               # タプルの(10,)となる
</pre>
<p>リスト要素は変更することはできますが、タプル要素を変更することはできません。</p>
<div class="tab">Python</div>
<pre class=c2>
a1 = [10, 20, 30, 40]
a2 = (10, 20, 30, 40)

a1[2] = 60              # 代入できる
a2[2] = 60              # エラーとなり、TypeError例外が発生する
</pre>
<p>タプルからリストに変換するには <b>list()</b> を、リストからタプルに変換するには <b>tuple()</b> を使います。</p>
<div class="tab">Python</div>
<pre class=c2>
print <em>list((1, 2, 3))</em>     #=&gt; [1, 2, 3]
print <em>tuple([1, 2, 3])</em>    #=&gt; (1, 2, 3)
</pre>
</div>

<h4 id="dict">辞書(dict)</h4>
<div class=i>
<p><b>{</b>...<b>}</b> は、<b>辞書</b>(<b>dict</b>)と呼ばれるキーと値のペアのリストを保持します。</p>
<div class="tab">Python</div>
<pre class=c2>
d = <em>{'Yamada': 30, 'Suzuki': 40, 'Tanaka': 80}</em>
</pre>
<p>各要素には次のようにアクセスします。</p>
<div class="tab">Python</div>
<pre class=c2>
d1 = <em>d['Yamada']</em>
d2 = <em>d['Suzuki']</em>
d3 = <em>d['Tanaka']</em>
</pre>
<p>全ての要素や値を参照するには、<b>items()</b>, <b>keys()</b>, <b>valus()</b>, <b>iteritems()</b> を使用します。参照される要素の順序は順不同です。</p>
<div class="tab">Python</div>
<pre class=c2>
d = {'Yamada': 30, 'Suzuki': 40, 'Tanaka': 80}

for k, v in d.<em>items()</em>:
    print k, v             # Tanaka 80, Yamada 30, Suzuki 40

for k in d.<em>keys()</em>:
    print k, d[k]          # Suzuki 40, Yamada 30, Tanaka 80

for v in d.<em>values()</em>:
    print v                # 80, 30, 40

for k, v in d.<em>iteritems()</em>:
    print k, v             # Tanaka 80, Yamada 30, Suzuki 40
</pre>
</div>

<h4 id="list_function">リスト関数(map(), filter(), reduce())</h4>
<div class=i>
<p><b>map()</b> はリストの各要素に対して処理を行い、行った結果を返します。下記の例では各要素を2倍にする処理を行います。</p>
<div class="tab">Python</div>
<pre class=c2>
a = [1, 2, 3]

def double(x): return x * 2
print <em>map(double, a)</em>                #=&gt; [2, 4, 6] : 関数方式
print <em>map(lambda x: x * 2, a)</em>       #=&gt; [2, 4, 6] : lambda方式
print [x * 2 for x in a]            #=&gt; [2, 4, 6] : 内包表記(後述)
</pre>
<p><b>filter()</b> はリストの各要素に対して処理を行い、処理結果が真となる要素のみを取り出します。下記の例では各要素から奇数のみを取り出します。</p>
<div class="tab">Python</div>
<pre class=c2>
a = [1, 2, 3]

def isodd(x): return x % 2
print <em>filter(isodd, a)</em>              #=&gt; [1, 3] : 関数方式
print <em>filter(lambda x: x % 2, a)</em>    #=&gt; [1, 3] : lambda方式
print [x for x in a if x % 2]       #=&gt; [1, 3] : 内包表記(後述)
</pre>
<p><b>reduce()</b> はリストの最初の2要素を引数に処理を呼び出し、結果と次の要素を引数に処理の呼び出しを繰り返し、単一の結果を返します。下記の例では、各要素の合計を計算しています。</p>
<div class="tab">Python</div>
<pre class=c2>
a = [1, 2, 3, 4, 5]

def add(x, y): return x + y
print <em>reduce(add, a)</em>                #=&gt; 15 : 関数方式
print <em>reduce(lambda x, y: x + y, a)</em> #=&gt; 15 : lambda方式
</pre>
</div>

<h4 id="comprehension">リストの内包表記</h4>
<div class=i>
<p><b>リストの内包表記</b> を用いることで、map(), filter(), lambda を使用しないで簡単なリスト演算を行うことができます。</p>
<div class="tab">Python</div>
<pre class=c2>
a = [1, 2, 3]
print <em>[x * 2 for x in a]</em>                        #=&gt; [2, 4, 6]
print <em>[x * 2 for x in a if x == 3]</em>              #=&gt; [6]
print <em>[[x, x * 2] for x in a]</em>                   #=&gt; [[1, 2], [2, 4], [3, 6]]
print <em>[(x, x * 2) for x in a]</em>                   #=&gt; [(1, 2), (2, 4), (3, 6)]

b = [4, 5, 6]
print <em>[x * y for x in a for y in b]</em>             #=&gt; [4, 5, 6, 8, 10, 12, 12, 15, 18]
print <em>[a[i] * b[i] for i in range(len(a))]</em>      #=&gt; [4, 10, 18]
</pre>
</div>

<h4 id="set">セット(set)</h4>
<div class=i>
<p><b>セット</b>(<b>set</b>)は、重複の無いリストを扱います。セット同士の減算、OR、AND、XOR 操作が可能です。</p>
<div class="tab">Python</div>
<pre class=c2>
a = <em>set(['red', 'blue', 'green'])</em>
b = <em>set(['green', 'yellow', 'white'])</em>

print a                #=&gt; set(['red', 'blue', 'green'])
print b                #=&gt; set(['green', 'yellow', 'white'])
print a - b            #=&gt; set(['red', 'blue'])
print a | b            #=&gt; set(['red', 'blue', 'green', 'yellow', 'white'])
print a &amp; b            #=&gt; set(['green'])
print a ^ b            #=&gt; set(['red', 'blue', 'yellow', 'white'])
print 'green' in a     #=&gt; True
a.add('black')
print a                #=&gt; set(['red', 'blue', 'green', 'black'])
</pre>
</div>

<hr>
<div>Copyright(C) 2014-2018 杜甫々</div>
<div>初版：2014年12月30日、最終更新：2018年2月5日</div>
<div>http://www.tohoho-web.com/python/list.html</div>
</body>
</html>

