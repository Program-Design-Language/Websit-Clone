<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>PHP入門 - 型 - とほほのWWW入門</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<link rel="stylesheet" href="../style3.css" tppabs="http://www.tohoho-web.com/style3.css">
</head>
<body>
<h2>PHP入門 - 型</h2>
<a href="../www.htm" tppabs="http://www.tohoho-web.com/www.htm">トップ</a> &gt;
<a href="index.html" tppabs="http://www.tohoho-web.com/php/index.html">PHP入門</a> &gt;
型

<h4 id="integer">整数(int, integer)</h4>
<div class=i>
<p>PHPでは、下記の数値を利用することができます。</p>
<div class="tab">PHP</div>
<pre class=c2>
&lt;?php
$num = <em>1234</em>;        // 10進整数
$num = <em>-1234</em>;       // 負の値
$num = <em>01234</em>;       // 8進整数 (0で始まる数値は8進数とみなされる)
$num = <em>0xffff</em>;      // 16進整数 (0xで始まる数値は16進数とみなされる)
$num = <em>0b11000100</em>;  // 2進整数 (0bで始まる数値は2進数とみなされる)(PHP 5.4.0以降)
</pre>
</div>

<h4 id="float">浮動小数点数(float, double, real)</h4>
<div class=i>
<p>浮動少数点数は下記の様に記述します。</p>
<div class="tab">PHP</div>
<pre class=c2>
&lt;?php
$num = <em>1.234</em>;     // 浮動小数点数
$num = <em>1.2e3</em>;     // 浮動小数点数(指数表記) 1.2 × 10<sup><small>3</small></sup>
$num = <em>7E-10</em>;     // 浮動小数点数(指数表記) 7 × 10<sup><small>-10</small></sup>
</pre>
</div>

<h4 id="boolean">論理型(bool, boolean)</h4>
<div class=i>
<p>論理値は、真か偽を <b>true</b> または <b>false</b> で現します。大文字・小文字はどちらでも構いません。</p>
<div class="tab">PHP</div>
<pre class=c2>
&lt;?php
$bool = <em>true</em>;
$bool = <em>false</em>;
$bool = <em>TRUE</em>;
$bool = <em>True</em>;
</pre>
</div>

<h4 id="string">文字列(string)</h4>
<div class=i>
<p>文字列は、引用符、シングルクォート(<b>'</b>)またはダブルクォート(<b>"</b>)で囲みます。</p>
<div class="tab">PHP</div>
<pre class=c2>
&lt;?php
$str = <em>'Hello'</em>;
$str = <em>"Hello"</em>;
</pre>
<p>'...' の中では " を、"..." の中では ' を使うことができます。'...' の中で ' を、"..." の中で " を使用するには、バックスラッシュ(\)を用いて引用符をエスケープ(無効化)します。</p>
<div class="tab">PHP</div>
<pre class=c2>
&lt;?php
$str = 'He said: <em>"</em>I<em>\'</em>ll be back.<em>"</em>';
$str = "He said: <em>\"</em>I<em>'</em>ll be back.<em>\"</em>";
</pre>
<p>"..." の中では、下記のエスケープシーケンスを使用できます。</p>
<div class="tab">エスケープシーケンス</div>
<pre class=c2>
<em>\n</em> : 改行(ラインフィード:LF:0x0A)
<em>\r</em> : 改行(キャリッジリターン:CR:0x0D)
<em>\t</em> : タブ(TAB:0x09)
<em>\v</em> : 垂直タブ(VT:0x0B) (PHP 5.2.5以降)
<em>\e</em> : エスケープコード(ESC:0x1B) (PHP 5.4.0以降)
<em>\f</em> : フォームフィード(FF:\x0C) (PHP 5.2.5以降)
<em>\\</em> : バックスラッシュ(\)
<em>\$</em> : ドル記号($)
<em>\"</em> : 二重引用符(")
</pre>
<p>\数値(0～8) は8進表記の文字コード、\x数値(0～f) は16進表記の文字コードを示します。下記の例では、いずれも文字A(0x41,0101)を表示します。</p>
<div class="tab">PHP</div>
<pre class=c2>
&lt;?php
echo "A";
echo "<em>\101</em>";
echo "<em>\x41</em>";
</pre>
<p>"..." の中では、変数を展開することができます。下記の例では My name is Tanaka. と表示されます。</p>
<div class="tab">PHP</div>
<pre class=c2>
&lt;?php
$name = "Tanaka.";
echo "My name is <em>$name</em>.\n";
</pre>
<p>複雑な変数を展開するには、変数を {...} で囲んでください。</p>
<div class="tab">PHP</div>
<pre class=c2>
&lt;?php
echo "My name is <em>{$name}</em>.\n";
echo "My name is <em>{$names[0]}</em>.\n";
echo "My name is <em>{$foo-&gt;name}</em>.\n";
</pre>
</div>

<h4 id="heredoc">ヒアドキュメント(&lt;&lt;&lt;)</h4>
<div class=i>
<p>ヒアドキュメント(<b>&lt;&lt;&lt;</b>)の構文を用いて、複数行の文字列を現すことができます。下記の例では、This is ～ の3行が表示されます。最後のラベルは行頭をインデントせず、末尾にセミコロンを記述してください。</p>
<div class="tab">PHP</div>
<pre class=c2>
&lt;?php
    echo <em>&lt;&lt;&lt;END_OF_TEXT</em>
This is Japan.
This is America.
This is England.
<em>END_OF_TEXT;</em>
</pre>
<p>END_OF_TEXT の代わりに OWARI など任意のラベルを用いることができます。ヒアドキュメントの中では、シングルクォート(')、ダブルクォート(")、エスケープシーケンス、変数の展開を用いることができます。</p>
<div class="tab">PHP</div>
<pre class=c2>
&lt;?php
    $name = "Tanaka";
    echo <em>&lt;&lt;&lt;OWARI</em>
He said <em>"</em>I<em>'</em>ll be back.<em>"</em>.
My name is <em>$name</em>.
<em>OWARI;</em>
</pre>
<p>ラベルを '...' で囲んだ場合は、エスケープシーケンスや変数の展開を無効化することができます。これは、ヒアドキュメントと似ていますが、Nowdoc と呼ばれ、PHP 5.3.0 以降でサポートされます。</p>
<div class="tab">PHP</div>
<pre class=c2>
&lt;?php
    echo &lt;&lt;&lt;<em>'EOT'</em>
My name is $name.
EOT;
</pre>
<p>ラベルを "..." で囲んだ場合は、通常のヒアドキュメントと同じ動作をします。(PHP 5.3.0以降)</p>
<div class="tab">PHP</div>
<pre class=c2>
&lt;?php
    echo &lt;&lt;&lt;<em>"EOT"</em>
My name is $name.
EOT;
</pre>
</div>

<h4 id="null">NULL型(null)</h4>
<div class=i>
<p><b>null</b> は値が設定されていないことを示す特別な値です。大文字・小文字は区別されません。ただし、null値を持つ値と、未定義値は、is_null() などで判断する際の動作が多少異なります。(後述)</p>
<div class="tab">PHP</div>
<pre class=c2>
&lt;?php
$var = <em>null</em>;
</pre>
</div>

<h4 id="zerovalue">未定義値</h4>
<div class=i>
<p>一度設定された変数を、未定義値に戻すには <b>unset()</b> を用います。</p>
<div class="tab">PHP</div>
<pre class=c2>
&lt;?php
$var = "AAA";                // 一度値が設定される
<em>unset($var)</em>;        // $var の値が未定義状態になる
</pre>
<p>値が空であることを確認するには、<b>isset()</b>, <b>is_null()</b>, <b>empty()</b> などがあります。!isset() は、未定義値やNULL値の場合に真となります。is_null() も同様ですが、未定義値の場合に "PHP Notice: Undefined variable" の警告が発生します。empty() は数値の 0、文字列の "" や "0" などの場合も真になるので注意が必要です。下記の表で、○は真、×は偽を示します。</p>
<table class="tb1">
<tr><th></th><th>!isset($var)</th><th>is_null($var)</th><th>empty($var)</th></tr>
<tr><td>未定義値</td><td>○</td><td>○(※1)</td><td>○</td></tr>
<tr><td>$var = null</td><td>○</td><td>○</td><td>○</td></tr>
<tr><td>$var = 0</td><td>×</td><td>×</td><td>○</td></tr>
<tr><td>$var = ""</td><td>×</td><td>×</td><td>○</td></tr>
<tr><td>$var = false</td><td>×</td><td>×</td><td>○</td></tr>
<tr><td>$var = "0"</td><td>×</td><td>×</td><td>○</td></tr>
<tr><td>$var = 1</td><td>×</td><td>×</td><td>×</td></tr>
<tr><td>$var = "ABC"</td><td>×</td><td>×</td><td>×</td></tr>
</table>
<p>※1 "PHP Notice: Undefined variable" が発生</p>
</div>

<h4 id="nan">NAN(not a number)</h4>
<div class=i>
<p>数値でないことを示す特別な値 <b>NAN</b> があります。例えば acos(1.01) を計算すると NAN を返します。値が NAN か否かを調べるには == や === ではなく、is_nan() を用います。</p>
<div class="tab">PHP</div>
<pre class=c2>
&lt;?php
$num = acos(1.01);                // <em>NAN</em> を返す
if (<em>is_nan($num)</em>) {
    echo "Not a number\n";
}
</pre>
</div>

<h4 id="callable">コールバック(callable)</h4>
<div class=i>
<p><b>callbale</b> はコールバック関数を示す型です(PHP 5.4～)。以前の PHP のマニュアルには <b>callback</b> と記載されていました。</p>
<div class="tab">PHP</div>
<pre class=c2>
&lt;?php
class MyClass {
    protected $callback = null;
    function set_callback(<em>callable</em> $callback) {
        $this-&gt;callback = $callback;
    }
    function call_callback() {
        call_user_func($this-&gt;callback);
    }
}

$obj = new MyClass();
$obj-&gt;set_callback(function test() { echo "TEST\n"; });
$obj-&gt;call_callback();
</pre>
</div>

<h4 id="cast">キャスト</h4>
<div class=i>
<p>PHPでは多くの場合、演算対象の値の型の組み合わせによって暗黙的な型変換が行われますが、式の前に (型名) を記述することで、明示的な型変換を行うことができます。これを、キャストと呼びます。</p>
<div class="tab">PHP</div>
<pre class=c2>
&lt;?php
$a = 3.9;
$b = <em>(integer)</em>$a;            // 切り捨てされて整数の3に変換される
echo $b . "\n";              // 3 と表示される
echo gettype($b) . "\n";     // integer と表示される
</pre>
<p>キャストに指定可能な型には下記のものがあります。</p>
<div class="tab">キャスト</div>
<pre class=c2>
<em>(int)</em>     - 整数
<em>(integer)</em> - (int)と同義
<em>(bool)</em>    - 真偽値
<em>(boolean)</em> - (bool)と同義
<em>(float)</em>   - 実数
<em>(double)</em>  - (float)と同義
<em>(real)</em>    - (float)と同義
<em>(string)</em>  - 文字列
<em>(array)</em>   - 配列
<em>(object)</em>  - オブジェクト
<em>(unset)</em>   - NULL値
<em>(binary)</em>  - バイナリ文字列(PHP5.2.1～)
</pre>
</div>

<hr>
<div>Copyright(C) 2013 杜甫々</div>
<div>初版：2013年5月12日、最終更新：2013年5月12日</div>
<div>http://www.tohoho-web.com/php/types.html</div>
</body>
</html>
