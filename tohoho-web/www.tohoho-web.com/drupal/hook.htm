<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Drupalå…¥é–€ - ã¨ã»ã»ã®WWWå…¥é–€</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<link rel="stylesheet" href="../style3.css" tppabs="http://www.tohoho-web.com/style3.css">
</head>
<body>
<div class="page">
<h2>Drupalå…¥é–€</h2>
<a href="../www.htm" tppabs="http://www.tohoho-web.com/www.htm">ãƒˆãƒƒãƒ—</a> &gt;
<a href="top.htm" tppabs="http://www.tohoho-web.com/drupal/top.htm">Drupalå…¥é–€</a> &gt;
<a href="module.htm" tppabs="http://www.tohoho-web.com/drupal/module.htm">ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«</a> &gt;
ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½œã‚‹

<h4>Hooké–¢æ•°ä¸€è¦§</h4>
<div class=i>
<div class="c">
custom_url_rewrite_inbound /
custom_url_rewrite_outbound /
hook_access /
hook_actions_delete /
hook_action_info /
hook_action_info_alter /
<a href="#hook_block">hook_block</a> /
hook_boot /
hook_comment /
<a href="#hook_cron">hook_cron</a> /
hook_db_rewrite_sql /
hook_delete /
<a href="#hook_disable">hook_disable</a> /
hook_elements /
<a href="#hook_enable">hook_enable</a> /
hook_exit /
hook_file_download /
hook_filter /
hook_filter_tips /
hook_flush_caches /
<a href="#hook_footer">hook_footer</a> /
hook_form /
hook_forms /
hook_form_alter /
hook_form_FORM_ID_alter /
<a href="#hook_help">hook_help</a> /
hook_hook_info /
<a href="#hook_init">hook_init</a> /
hook_insert /
hook_install /
hook_link /
hook_link_alter /
hook_load /
hook_locale /
hook_mail /
hook_mail_alter /
<a href="#hook_menu">hook_menu</a> /
hook_menu_alter /
hook_menu_link_alter /
hook_nodeapi /
hook_node_access_records /
hook_node_grants /
hook_node_info /
hook_node_operations /
hook_node_type /
<a href="#hook_perm">hook_perm</a> /
hook_ping /
hook_prepare /
hook_profile_alter /
hook_requirements /
hook_schema /
hook_schema_alter /
<a href="#hook_search">hook_search</a> /
hook_search_preprocess /
hook_system_info_alter /
hook_taxonomy /
hook_term_path /
hook_theme /
hook_theme_registry_alter /
hook_translated_menu_link_alter /
hook_uninstall /
hook_update /
hook_update_index /
hook_update_N /
hook_update_status_alter /
hook_user /
hook_user_operations /
hook_validate /
hook_view /
<a href="#hook_watchdog">hook_watchdog</a> /
hook_xmlrpc /
module_hook /
module_implements /
module_invoke /
module_invoke_all
</div>
</div>

<h5 id="hook_help">â—†xxx_help()</h5>
<div class=i>
<p>ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚ä¸‹è¨˜ã®ä¾‹ã«ã‚ˆã‚Šã€[ç®¡ç†ã‚»ã‚¯ã‚·ãƒ§ãƒ³]â†’[ãƒ˜ãƒ«ãƒ—] ã« Testãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒè¿½åŠ ã•ã‚Œã¾ã™ã€‚ãƒ‘ã‚¹ã¯ http://ï½/?q=admin/help/test ã¨ãªã‚Šã¾ã™ã€‚Drupal 5.x ã¨ 6.x ã§ã¯å¼•æ•°ãŒå¤‰æ›´ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>
<pre class=c>
function test_help($path, $arg) {
  switch ($path) {
    case 'admin/help#test':
      $output = '&lt;p&gt;' . t('This is TEST module.') . '&lt;/p&gt;';
      return $output;
  }
}
</pre>
</div>

<h5 id="hook_menu">â—†xxx_menu()</h5>
<div class=i>
<p>ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒªãƒ³ã‚¯ã¸ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’è¨­å®šã—ã¾ã™ã€‚ä¸‹è¨˜ã®ä¾‹ã§ã¯ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒªãƒ³ã‚¯ã®ãƒˆãƒƒãƒ—ã« TEST ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã¨ test_main() ãŒå‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚ã“ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¯ 'do test' æ¨©é™ã‚’æŒã£ã¦ã„ã‚‹ãƒ¦ãƒ¼ã‚¶ãŒå®Ÿè¡Œã§ãã¾ã™ã€‚$item['test'] ã‚’ $item['admin/build/test'] ã¨ã™ã‚‹ã¨ã€[ç®¡ç†ã‚»ã‚¯ã‚·ãƒ§ãƒ³]â†’[ã‚µã‚¤ãƒˆã®æ§‹ç¯‰]â†’[TEST] ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒè¿½åŠ ã•ã‚Œã¾ã™ã€‚</p>
<pre class=c>
function test_menu() {
  $item['test'] = array(
    'title' =&gt; 'TEST',
    'page callback' =&gt; 'test_main',
    'access arguments' =&gt; array('do test'),
  );
  return $item;
}
</pre>
</div>

<h5 id="hook_perm">â—†xxx_perm()</h5>
<div class=i>
<p>[ç®¡ç†ã‚»ã‚¯ã‚·ãƒ§ãƒ³]â†’[ãƒ¦ãƒ¼ã‚¶ã®ç®¡ç†]â†’[æ¨©é™] ã§å‚ç…§å¯èƒ½ãªæ¨©é™ã‚’è¿½åŠ ã—ã¾ã™ã€‚</p>
<pre class=c>
function test_perm() {
  return array('do test');
}
</pre>
</div>

<h5 id="hook_init">â—†xxx_init()</h5>
<div class=i>
<p>ãƒšãƒ¼ã‚¸ãŒé–‹ã‹ã‚Œã‚‹åº¦ã«å‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚å¿…è¦ã¨ã™ã‚‹CSSãƒ•ã‚¡ã‚¤ãƒ«ã‚„JavaScriptãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ ã™ã‚‹å ´åˆã«ä¾¿åˆ©ã§ã™ã€‚</p>
<pre class=c>
function test_init() {
  drupal_add_css(drupal_get_path('module', 'test') . '/test.css');
}
</pre>
</div>

<h5 id="hook_cron">â—†xxx_cron()</h5>
<div class=i>
<p>cron.php ãŒå®Ÿè¡Œã•ã‚ŒãŸæ™‚ã«å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚</p>
<pre class=c>
function test_cron() {
  :
}
</pre>
</div>

<h5 id="hook_enabe">â—†xxx_enable()</h5>
<div class=i>
<p>ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒæœ‰åŠ¹åŒ–ã•ã‚ŒãŸæ™‚ã«å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚</p>
<pre class=c>
function test_enable() {
  :
}
</pre>
</div>

<h5 id="hook_disable">â—†xxx_disable()</h5>
<div class=i>
<p>ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒç„¡åŠ¹åŒ–ã•ã‚ŒãŸæ™‚ã«å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚</p>
<pre class=c>
function test_disable() {
  :
}
</pre>
</div>

<h5 id="hook_footer">â—†xxx_footer()</h5>
<div class=i>
<p>ãƒšãƒ¼ã‚¸ã®ãƒ•ãƒƒã‚¿ã«è¿½åŠ ã™ã‚‹HTMLã‚’æŒ‡å®šã—ã¾ã™ã€‚ãƒšãƒ¼ã‚¸æœ«å°¾ã« JavaScript ã‚³ãƒ¼ãƒ‰ã‚’åŸ‹ã‚è¾¼ã‚€ã®ã«ã‚‚ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ãƒ•ãƒ­ãƒ³ãƒˆãƒšãƒ¼ã‚¸ã®æ™‚ $main ã¯ 0 ã«ãªã‚Šã¾ã™ã€‚</p>
<pre class=c>
function test_footer($main) {
  return '&lt;div&gt;See you!&lt;/div&gt;';
}
</pre>
</div>

<h5 id="hook_block">â—†xxx_block()</h5>
<div class=i>
<p>ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒãƒ–ãƒ­ãƒƒã‚¯ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹å ´åˆã«å®šç¾©ã—ã¾ã™ã€‚$op = 'list' ã¯ã€[ç®¡ç†ã‚»ã‚¯ã‚·ãƒ§ãƒ³]â†’[ã‚µã‚¤ãƒˆã®æ§‹ç¯‰]â†’[ãƒ–ãƒ­ãƒƒã‚¯] ã§è¡¨ç¤ºã•ã‚Œã‚‹åå‰ã‚’å®šç¾©ã—ã¾ã™ã€‚$op = 'view' ã¯ã€ãã®ãƒ–ãƒ­ãƒƒã‚¯ãŒè¡¨ç¤ºã•ã‚Œã‚‹éš›ã« $block-&gt;subject ã¨ $block-&gt;content ã§å‚ç…§ã•ã‚Œã‚‹HTMLã‚’å®šç¾©ã—ã¾ã™ã€‚subject ã¨ content ä»¥å¤–ã«ã‚‚ä»»æ„ã®ãƒ–ãƒ­ãƒƒã‚¯å¤‰æ•°ã‚’å¢—ã‚„ã™ã“ã¨ãŒã§ãã¾ã™ã€‚è¤‡æ•°ã®ãƒ–ãƒ­ãƒƒã‚¯ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹å ´åˆã€$delta ãŒ 0, 1, 2... ã¨å¤‰åŒ–ã—ã¾ã™ã€‚</p>
<pre class=c>
function test_block($op = 'list', $delta = 0) {
  if ($op == 'list') {
    $blocks[0] = array(
      'info' =&gt; t('Test block'),
    );
    return $blocks;
  }
  if ($op == 'view') {
    if ($delta == 0) {
      $block = array(
        'subject' =&gt; t('Test block'),
        'content' =&gt; t('Hello World'),
      );
    }
    return $block;
  }
}
</pre>
</div>

<h5 id="hook_watchdog">â—†xxx_watchdog()</h5>
<div class=i>
<p>syslog ã«è¨˜éŒ²ã™ã‚‹ã‚ˆã†ãªä½•ã‚‰ã‹ã®ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç”Ÿã—ãŸéš›ã«å‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚</p>
<pre class=c>
function test_watchdog($log_msg) {
  $msg =
    "---------------------\n";
    "Severity: {$log_msg['severity']}\n" .
    "Time: " . format_date($log_msg['timestamp']) . "\n" .
    "Type: {$log_msg['type']}\n" .
    "Ip Address: {$log_msg['ip']}\n" .
    "Message: {$log_msg['message']}\n" .
    "Name: {$log_msg['user']-&gt;name}\n" .
    "Uid: {$log_msg['user']-&gt;uid}\n" .
    "Link: {$log_msg['link']}\n" .
    "Request URI: {$log_msg['request_uri']}\n" .
    "Referrer URI: {$log_msg['referer_uri']}\n" .
    "---------------------\n";

  $log = fopen("/tmp/xx", "a");
  fwrite($log, "test_watchdog()\n");
  fwrite($log, $msg);
  fclose($log);
}
</pre>
</div>

<h5 id="hook_search">â—†xxx_search()</h5>
<div class=i>
<p>Search ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰å‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚'name' ã§ã¯ã‚µãƒ¼ãƒç”»é¢ã®ã«è¡¨ç¤ºã™ã‚‹ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’ã€'search' ã§ã¯ã‚µãƒ¼ãƒçµæœã‚’è¿”ã—ã¾ã™ã€‚</p>
<pre class=c>
function test_search($op = 'search', $keys = NULL, $skip_access_check = FALSE) {
  switch ($op) {
    case 'name':
      return 'Test';
      break;
    case 'search':
      $find = array();
       $result = db_query("SELECT name FROM {users} WHERE name = '%s'", $keys);
       while ($data = db_fetch_object($result)) {
         $find[] = array(
           'title' =&gt; $data-&gt;name,
           'link' =&gt; $data-&gt;name,
         );
      }
      return $find;
      break;
  }
}
</pre>
</div>

<h5 id="hook_node_info">â—†xxx_node_info()</h5>
<div class=i>
<p>ä¸‹è¨˜ã‚’è¨˜è¿°ã—ã¦ãŠãã¨ã€[ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ä½œæˆ] ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ä¸‹ã« Test ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®è¿½åŠ ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
<pre class=c>
function test_node_info() {
  return array(
    'test' =&gt; array(
      'name' =&gt; 'Test',
      'module' =&gt; 'test',
      'description' =&gt; 'Test is my contents.',
    ),
  );
}
</pre>
</div>

<h5>â—†ãã®ä»–ã®Hooké–¢æ•°</h5>
<div class=i>
<p>ãã®ä»–ã®ãƒ•ãƒƒã‚¯é–¢æ•°ã«ã¤ã„ã¦ã¯ä¸‹è¨˜ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
<ul>
<li><a target="_blank" href="javascript:if(confirm('http://api.drupal.org/api/group/hooks/grid-area.htm  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://api.drupal.org/api/group/hooks/grid-area.htm'" tppabs="http://api.drupal.org/api/group/hooks/6">http://api.drupal.org/api/group/hooks/6</a>
</ul>
</div>

<hr>
<div>Copyright (C) 2008 æœç”«ã€…</div>
<div>åˆç‰ˆï¼š2008å¹´9æœˆ21æ—¥</div>
<div>http://www.tohoho-web.com/drupal/</div>
</div>
</body>
</html>
